<!doctype html>
<head><meta charset="utf-8">
<link rel="icon" href="img/favicon.ico">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/base16/solarized-light.min.css"><link href="ecmarkup.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<script src="ecmarkup.js"></script>
<script>
  if (location.hostname === 'tc39.es' && location.protocol !== 'https:') {
    location.protocol = 'https:';
  }
</script>
<style>
@media print {
  /* for the PDF */
  body.oldtoc {
    font-size: 80%;
  }
  .oldtoc var {
    color: #197124;
  }
}
h1.orange {
  font-size: 2em;
}
.oldtoc {
  padding: 5em;
}
.orange {
  color: #ff6600;
  margin: 0px;
}
.list-of-names {
  list-style-type: none;
  margin-bottom: 10px;
  padding-left: 10px;
}
emu-normative-optional {
  border-left: 5px solid #ff6600;
  padding: .5em;
  display: block;
  background: #ffeedd;
}
emu-normative-optional:before {
  display: block;
  color: #884400;
  content: "NORMATIVE OPTIONAL";
}
#metadata-block {
  margin: 4em 0;
  padding: 10px;
  border: 1px solid #ee8421;
}
#metadata-block h1 {
  font-size: 1.5em;
  margin-top: 0;
}
#metadata-block > ul {
  list-style-type: none;
  margin: 0; padding: 0;
}
#ecma-logo {
  width: 500px;
}
</style>
<title>ECMAScript® 2022 Internationalization API Specification</title></head><body><div id="menu-toggle">☰</div><div id="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins</div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#introduction" title="Introduction">Introduction</a></li><li><span class="item-toggle-none"></span><a href="#scope" title="Scope"><span class="secnum">1</span> Scope</a></li><li><span class="item-toggle-none"></span><a href="#conformance" title="Conformance"><span class="secnum">2</span> Conformance</a></li><li><span class="item-toggle-none"></span><a href="#normative-references" title="Normative References"><span class="secnum">3</span> Normative References</a></li><li><span class="item-toggle">◢</span><a href="#overview" title="Overview"><span class="secnum">4</span> Overview</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-internationalization-localization-globalization" title="Internationalization, Localization, and Globalization"><span class="secnum">4.1</span> Internationalization, Localization, and Globalization</a></li><li><span class="item-toggle-none"></span><a href="#sec-api-overview" title="API Overview"><span class="secnum">4.2</span> API Overview</a></li><li><span class="item-toggle-none"></span><a href="#sec-api-conventions" title="API Conventions"><span class="secnum">4.3</span> API Conventions</a></li><li><span class="item-toggle">◢</span><a href="#sec-implementation-dependencies" title="Implementation Dependencies"><span class="secnum">4.4</span> Implementation Dependencies</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-compatibility" title="Compatibility across implementations"><span class="secnum">4.4.1</span> Compatibility across implementations</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#conventions" title="Notational Conventions"><span class="secnum">5</span> Notational Conventions</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-402-well-known-intrinsic-objects" title="Well-Known Intrinsic Objects"><span class="secnum">5.1</span> Well-Known Intrinsic Objects</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#locales-currencies-tz" title="Identification of Locales, Currencies, Time Zones, and Measurement Units"><span class="secnum">6</span> Identification of Locales, Currencies, Time Zones, and Measurement Units</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-case-sensitivity-and-case-mapping" title="Case Sensitivity and Case Mapping"><span class="secnum">6.1</span> Case Sensitivity and Case Mapping</a></li><li><span class="item-toggle">◢</span><a href="#sec-language-tags" title="Language Tags"><span class="secnum">6.2</span> Language Tags</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-unicode-locale-extension-sequences" title="Unicode Locale Extension Sequences"><span class="secnum">6.2.1</span> Unicode Locale Extension Sequences</a></li><li><span class="item-toggle-none"></span><a href="#sec-isstructurallyvalidlanguagetag" title="IsStructurallyValidLanguageTag ( locale )"><span class="secnum">6.2.2</span> IsStructurallyValidLanguageTag ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-canonicalizeunicodelocaleid" title="CanonicalizeUnicodeLocaleId ( locale )"><span class="secnum">6.2.3</span> CanonicalizeUnicodeLocaleId ( <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-defaultlocale" title="DefaultLocale ( )"><span class="secnum">6.2.4</span> DefaultLocale ( )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-currency-codes" title="Currency Codes"><span class="secnum">6.3</span> Currency Codes</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iswellformedcurrencycode" title="IsWellFormedCurrencyCode ( currency )"><span class="secnum">6.3.1</span> IsWellFormedCurrencyCode ( <var>currency</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-time-zone-names" title="Time Zone Names"><span class="secnum">6.4</span> Time Zone Names</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-isvalidtimezonename" title="IsValidTimeZoneName ( timeZone )"><span class="secnum">6.4.1</span> IsValidTimeZoneName ( <var>timeZone</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-canonicalizetimezonename" title="CanonicalizeTimeZoneName ( timeZone )"><span class="secnum">6.4.2</span> CanonicalizeTimeZoneName ( <var>timeZone</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-defaulttimezone" title="DefaultTimeZone ( )"><span class="secnum">6.4.3</span> DefaultTimeZone ( )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-measurement-unit-identifiers" title="Measurement Unit Identifiers"><span class="secnum">6.5</span> Measurement Unit Identifiers</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-iswellformedunitidentifier" title="IsWellFormedUnitIdentifier ( unitIdentifier )"><span class="secnum">6.5.1</span> IsWellFormedUnitIdentifier ( <var>unitIdentifier</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-issanctionedsimpleunitidentifier" title="IsSanctionedSimpleUnitIdentifier ( unitIdentifier )"><span class="secnum">6.5.2</span> IsSanctionedSimpleUnitIdentifier ( <var>unitIdentifier</var> )</a></li></ol></li></ol></li><li><span class="item-toggle-none"></span><a href="#requirements" title="Requirements for Standard Built-in ECMAScript Objects"><span class="secnum">7</span> Requirements for Standard Built-in ECMAScript Objects</a></li><li><span class="item-toggle">◢</span><a href="#intl-object" title="The Intl Object"><span class="secnum">8</span> The Intl Object</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-value-properties-of-the-intl-object" title="Value Properties of the Intl Object"><span class="secnum">8.1</span> Value Properties of the Intl Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl-toStringTag" title="Intl[ @@toStringTag ]"><span class="secnum">8.1.1</span> Intl[ @@toStringTag ]</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-constructor-properties-of-the-intl-object" title="Constructor Properties of the Intl Object"><span class="secnum">8.2</span> Constructor Properties of the Intl Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator-intro" title="Intl.Collator ( . . . )"><span class="secnum">8.2.1</span> Intl.Collator ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat-intro" title="Intl.DateTimeFormat ( . . . )"><span class="secnum">8.2.2</span> Intl.DateTimeFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.displaynames-intro" title="Intl.DisplayNames ( . . . )"><span class="secnum">8.2.3</span> Intl.DisplayNames ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.listformat-intro" title="Intl.ListFormat ( . . . )"><span class="secnum">8.2.4</span> Intl.ListFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.locale-intro" title="Intl.Locale ( . . . )"><span class="secnum">8.2.5</span> Intl.Locale ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat-intro" title="Intl.NumberFormat ( . . . )"><span class="secnum">8.2.6</span> Intl.NumberFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules-intro" title="Intl.PluralRules ( . . . )"><span class="secnum">8.2.7</span> Intl.PluralRules ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.relativetimeformat-intro" title="Intl.RelativeTimeFormat ( . . . )"><span class="secnum">8.2.8</span> Intl.RelativeTimeFormat ( . . . )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter-intro" title="Intl.Segmenter ( . . . )"><span class="secnum">8.2.9</span> Intl.Segmenter ( . . . )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-function-properties-of-the-intl-object" title="Function Properties of the Intl Object"><span class="secnum">8.3</span> Function Properties of the Intl Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.getcanonicallocales" title="Intl.getCanonicalLocales ( locales )"><span class="secnum">8.3.1</span> Intl.getCanonicalLocales ( <var>locales</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#locale-and-parameter-negotiation" title="Locale and Parameter Negotiation"><span class="secnum">9</span> Locale and Parameter Negotiation</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-internal-slots" title="Internal slots of Service Constructors"><span class="secnum">9.1</span> Internal slots of Service Constructors</a></li><li><span class="item-toggle">◢</span><a href="#sec-abstract-operations" title="Abstract Operations"><span class="secnum">9.2</span> Abstract Operations</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-canonicalizelocalelist" title="CanonicalizeLocaleList ( locales )"><span class="secnum">9.2.1</span> CanonicalizeLocaleList ( <var>locales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-bestavailablelocale" title="BestAvailableLocale ( availableLocales, locale )"><span class="secnum">9.2.2</span> BestAvailableLocale ( <var>availableLocales</var>, <var>locale</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-lookupmatcher" title="LookupMatcher ( availableLocales, requestedLocales )"><span class="secnum">9.2.3</span> LookupMatcher ( <var>availableLocales</var>, <var>requestedLocales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-bestfitmatcher" title="BestFitMatcher ( availableLocales, requestedLocales )"><span class="secnum">9.2.4</span> BestFitMatcher ( <var>availableLocales</var>, <var>requestedLocales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-unicode-extension-components" title="UnicodeExtensionComponents ( extension )"><span class="secnum">9.2.5</span> UnicodeExtensionComponents ( <var>extension</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-insert-unicode-extension-and-canonicalize" title="InsertUnicodeExtensionAndCanonicalize ( locale, extension )"><span class="secnum">9.2.6</span> InsertUnicodeExtensionAndCanonicalize ( <var>locale</var>, <var>extension</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-resolvelocale" title="ResolveLocale ( availableLocales, requestedLocales, options, relevantExtensionKeys, localeData )"><span class="secnum">9.2.7</span> ResolveLocale ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>, <var>relevantExtensionKeys</var>, <var>localeData</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-lookupsupportedlocales" title="LookupSupportedLocales ( availableLocales, requestedLocales )"><span class="secnum">9.2.8</span> LookupSupportedLocales ( <var>availableLocales</var>, <var>requestedLocales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-bestfitsupportedlocales" title="BestFitSupportedLocales ( availableLocales, requestedLocales )"><span class="secnum">9.2.9</span> BestFitSupportedLocales ( <var>availableLocales</var>, <var>requestedLocales</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-supportedlocales" title="SupportedLocales ( availableLocales, requestedLocales, options )"><span class="secnum">9.2.10</span> SupportedLocales ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getoptionsobject" title="GetOptionsObject ( options )"><span class="secnum">9.2.11</span> GetOptionsObject ( <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-coerceoptionstoobject" title="CoerceOptionsToObject ( options )"><span class="secnum">9.2.12</span> CoerceOptionsToObject ( <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getoption" title="GetOption ( options, property, type, values, fallback )"><span class="secnum">9.2.13</span> GetOption ( <var>options</var>, <var>property</var>, <var>type</var>, <var>values</var>, <var>fallback</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-defaultnumberoption" title="DefaultNumberOption ( value, minimum, maximum, fallback )"><span class="secnum">9.2.14</span> DefaultNumberOption ( <var>value</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getnumberoption" title="GetNumberOption ( options, property, minimum, maximum, fallback )"><span class="secnum">9.2.15</span> GetNumberOption ( <var>options</var>, <var>property</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitionpattern" title="PartitionPattern ( pattern )"><span class="secnum">9.2.16</span> PartitionPattern ( <var>pattern</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#collator-objects" title="Collator Objects"><span class="secnum">10</span> Collator Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-the-intl-collator-constructor" title="The Intl.Collator Constructor"><span class="secnum">10.1</span> The Intl.Collator Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator" title="Intl.Collator ( [ locales [ , options ] ] )"><span class="secnum">10.1.1</span> Intl.Collator ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-initializecollator" title="InitializeCollator ( collator, locales, options )"><span class="secnum">10.1.2</span> InitializeCollator ( <var>collator</var>, <var>locales</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-the-intl-collator-constructor" title="Properties of the Intl.Collator Constructor"><span class="secnum">10.2</span> Properties of the Intl.Collator Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype" title="Intl.Collator.prototype"><span class="secnum">10.2.1</span> Intl.Collator.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.supportedlocalesof" title="Intl.Collator.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">10.2.2</span> Intl.Collator.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl-collator-internal-slots" title="Internal slots"><span class="secnum">10.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-the-intl-collator-prototype-object" title="Properties of the Intl.Collator Prototype Object"><span class="secnum">10.3</span> Properties of the Intl.Collator Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype.constructor" title="Intl.Collator.prototype.constructor"><span class="secnum">10.3.1</span> Intl.Collator.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype-@@tostringtag" title="Intl.Collator.prototype [ @@toStringTag ]"><span class="secnum">10.3.2</span> Intl.Collator.prototype [ @@toStringTag ]</a></li><li><span class="item-toggle">◢</span><a href="#sec-intl.collator.prototype.compare" title="get Intl.Collator.prototype.compare"><span class="secnum">10.3.3</span> get Intl.Collator.prototype.compare</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-collator-compare-functions" title="Collator Compare Functions"><span class="secnum">10.3.3.1</span> Collator Compare Functions</a></li><li><span class="item-toggle-none"></span><a href="#sec-collator-comparestrings" title="CompareStrings ( collator, x, y )"><span class="secnum">10.3.3.2</span> CompareStrings ( <var>collator</var>, <var>x</var>, <var>y</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-intl.collator.prototype.resolvedoptions" title="Intl.Collator.prototype.resolvedOptions ( )"><span class="secnum">10.3.4</span> Intl.Collator.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-collator-instances" title="Properties of Intl.Collator Instances"><span class="secnum">10.4</span> Properties of Intl.Collator Instances</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#datetimeformat-objects" title="DateTimeFormat Objects"><span class="secnum">11</span> DateTimeFormat Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-datetimeformat-constructor" title="The Intl.DateTimeFormat Constructor"><span class="secnum">11.1</span> The Intl.DateTimeFormat Constructor</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl.datetimeformat" title="Intl.DateTimeFormat ( [ locales [ , options ] ] )"><span class="secnum">11.1.1</span> Intl.DateTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-chaindatetimeformat" title="ChainDateTimeFormat ( dateTimeFormat, newTarget, this )"><span class="secnum">11.1.1.1</span> ChainDateTimeFormat ( <var>dateTimeFormat</var>, <var>newTarget</var>, <var>this</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-initializedatetimeformat" title="InitializeDateTimeFormat ( dateTimeFormat, locales, options )"><span class="secnum">11.1.2</span> InitializeDateTimeFormat ( <var>dateTimeFormat</var>, <var>locales</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-datetimeformat-constructor" title="Properties of the Intl.DateTimeFormat Constructor"><span class="secnum">11.2</span> Properties of the Intl.DateTimeFormat Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype" title="Intl.DateTimeFormat.prototype"><span class="secnum">11.2.1</span> Intl.DateTimeFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.supportedlocalesof" title="Intl.DateTimeFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">11.2.2</span> Intl.DateTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat-internal-slots" title="Internal slots"><span class="secnum">11.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-datetimeformat-prototype-object" title="Properties of the Intl.DateTimeFormat Prototype Object"><span class="secnum">11.3</span> Properties of the Intl.DateTimeFormat Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.constructor" title="Intl.DateTimeFormat.prototype.constructor"><span class="secnum">11.3.1</span> Intl.DateTimeFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype-@@tostringtag" title="Intl.DateTimeFormat.prototype [ @@toStringTag ]"><span class="secnum">11.3.2</span> Intl.DateTimeFormat.prototype [ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.format" title="get Intl.DateTimeFormat.prototype.format"><span class="secnum">11.3.3</span> get Intl.DateTimeFormat.prototype.format</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DateTimeFormat.prototype.formatToParts" title="Intl.DateTimeFormat.prototype.formatToParts ( date )"><span class="secnum">11.3.4</span> Intl.DateTimeFormat.prototype.formatToParts ( <var>date</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.formatRange" title="Intl.DateTimeFormat.prototype.formatRange ( startDate, endDate )"><span class="secnum">11.3.5</span> Intl.DateTimeFormat.prototype.formatRange ( <var>startDate</var>, <var>endDate</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DateTimeFormat.prototype.formatRangeToParts" title="Intl.DateTimeFormat.prototype.formatRangeToParts ( startDate, endDate )"><span class="secnum">11.3.6</span> Intl.DateTimeFormat.prototype.formatRangeToParts ( <var>startDate</var>, <var>endDate</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.datetimeformat.prototype.resolvedoptions" title="Intl.DateTimeFormat.prototype.resolvedOptions ( )"><span class="secnum">11.3.7</span> Intl.DateTimeFormat.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-datetimeformat-instances" title="Properties of Intl.DateTimeFormat Instances"><span class="secnum">11.4</span> Properties of Intl.DateTimeFormat Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-datetimeformat-abstracts" title="Abstract Operations for DateTimeFormat Objects"><span class="secnum">11.5</span> Abstract Operations for DateTimeFormat Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-todatetimeoptions" title="ToDateTimeOptions ( options, required, defaults )"><span class="secnum">11.5.1</span> ToDateTimeOptions ( <var>options</var>, <var>required</var>, <var>defaults</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-date-time-style-format" title="DateTimeStyleFormat ( dateStyle, timeStyle, styles )"><span class="secnum">11.5.2</span> DateTimeStyleFormat ( <var>dateStyle</var>, <var>timeStyle</var>, <var>styles</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-basicformatmatcher" title="BasicFormatMatcher ( options, formats )"><span class="secnum">11.5.3</span> BasicFormatMatcher ( <var>options</var>, <var>formats</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-bestfitformatmatcher" title="BestFitFormatMatcher ( options, formats )"><span class="secnum">11.5.4</span> BestFitFormatMatcher ( <var>options</var>, <var>formats</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-datetime-format-functions" title="DateTime Format Functions"><span class="secnum">11.5.5</span> DateTime Format Functions</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimepattern" title="FormatDateTimePattern ( dateTimeFormat, patternParts, x, rangeFormatOptions )"><span class="secnum">11.5.6</span> FormatDateTimePattern ( <var>dateTimeFormat</var>, <var>patternParts</var>, <var>x</var>, <var>rangeFormatOptions</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitiondatetimepattern" title="PartitionDateTimePattern ( dateTimeFormat, x )"><span class="secnum">11.5.7</span> PartitionDateTimePattern ( <var>dateTimeFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetime" title="FormatDateTime ( dateTimeFormat, x )"><span class="secnum">11.5.8</span> FormatDateTime ( <var>dateTimeFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimetoparts" title="FormatDateTimeToParts ( dateTimeFormat, x )"><span class="secnum">11.5.9</span> FormatDateTimeToParts ( <var>dateTimeFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitiondatetimerangepattern" title="PartitionDateTimeRangePattern ( dateTimeFormat, x, y )"><span class="secnum">11.5.10</span> PartitionDateTimeRangePattern ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimerange" title="FormatDateTimeRange ( dateTimeFormat, x, y )"><span class="secnum">11.5.11</span> FormatDateTimeRange ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatdatetimerangetoparts" title="FormatDateTimeRangeToParts ( dateTimeFormat, x, y )"><span class="secnum">11.5.12</span> FormatDateTimeRangeToParts ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-tolocaltime" title="ToLocalTime ( t, calendar, timeZone )"><span class="secnum">11.5.13</span> ToLocalTime ( <var>t</var>, <var>calendar</var>, <var>timeZone</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-unwrapdatetimeformat" title="UnwrapDateTimeFormat ( dtf )"><span class="secnum">11.5.14</span> UnwrapDateTimeFormat ( <var>dtf</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#intl-displaynames-objects" title="DisplayNames Objects"><span class="secnum">12</span> DisplayNames Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-displaynames-constructor" title="The Intl.DisplayNames Constructor"><span class="secnum">12.1</span> The Intl.DisplayNames Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames" title="Intl.DisplayNames ( locales, options )"><span class="secnum">12.1.1</span> Intl.DisplayNames ( <var>locales</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-displaynames-constructor" title="Properties of the Intl.DisplayNames Constructor"><span class="secnum">12.2</span> Properties of the Intl.DisplayNames Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype" title="Intl.DisplayNames.prototype"><span class="secnum">12.2.1</span> Intl.DisplayNames.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.supportedLocalesOf" title="Intl.DisplayNames.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">12.2.2</span> Intl.DisplayNames.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames-internal-slots" title="Internal slots"><span class="secnum">12.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-displaynames-prototype-object" title="Properties of the Intl.DisplayNames Prototype Object"><span class="secnum">12.3</span> Properties of the Intl.DisplayNames Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype.constructor" title="Intl.DisplayNames.prototype.constructor"><span class="secnum">12.3.1</span> Intl.DisplayNames.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype-@@tostringtag" title="Intl.DisplayNames.prototype[ @@toStringTag ]"><span class="secnum">12.3.2</span> Intl.DisplayNames.prototype[ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype.of" title="Intl.DisplayNames.prototype.of ( code )"><span class="secnum">12.3.3</span> Intl.DisplayNames.prototype.of ( <var>code</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.DisplayNames.prototype.resolvedOptions" title="Intl.DisplayNames.prototype.resolvedOptions ( )"><span class="secnum">12.3.4</span> Intl.DisplayNames.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-displaynames-instances" title="Properties of Intl.DisplayNames Instances"><span class="secnum">12.4</span> Properties of Intl.DisplayNames Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-intl-displaynames-abstracts" title="Abstract Operations for DisplayNames Objects"><span class="secnum">12.5</span> Abstract Operations for DisplayNames Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-canonicalcodefordisplaynames" title="CanonicalCodeForDisplayNames ( type, code )"><span class="secnum">12.5.1</span> CanonicalCodeForDisplayNames ( <var>type</var>, <var>code</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-isvaliddatetimefieldcode" title="IsValidDateTimeFieldCode ( field )"><span class="secnum">12.5.2</span> IsValidDateTimeFieldCode ( <var>field</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#listformat-objects" title="ListFormat Objects"><span class="secnum">13</span> ListFormat Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-listformat-constructor" title="The Intl.ListFormat Constructor"><span class="secnum">13.1</span> The Intl.ListFormat Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat" title="Intl.ListFormat ( [ locales [ , options ] ] )"><span class="secnum">13.1.1</span> Intl.ListFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-listformat-constructor" title="Properties of the Intl.ListFormat Constructor"><span class="secnum">13.2</span> Properties of the Intl.ListFormat Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype" title="Intl.ListFormat.prototype"><span class="secnum">13.2.1</span> Intl.ListFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.supportedLocalesOf" title="Intl.ListFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">13.2.2</span> Intl.ListFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat-internal-slots" title="Internal slots"><span class="secnum">13.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-listformat-prototype-object" title="Properties of the Intl.ListFormat Prototype Object"><span class="secnum">13.3</span> Properties of the Intl.ListFormat Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.constructor" title="Intl.ListFormat.prototype.constructor"><span class="secnum">13.3.1</span> Intl.ListFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype-toStringTag" title="Intl.ListFormat.prototype [ @@toStringTag ]"><span class="secnum">13.3.2</span> Intl.ListFormat.prototype [ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.format" title="Intl.ListFormat.prototype.format ( list )"><span class="secnum">13.3.3</span> Intl.ListFormat.prototype.format ( <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.formatToParts" title="Intl.ListFormat.prototype.formatToParts ( list )"><span class="secnum">13.3.4</span> Intl.ListFormat.prototype.formatToParts ( <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.ListFormat.prototype.resolvedoptions" title="Intl.ListFormat.prototype.resolvedOptions ( )"><span class="secnum">13.3.5</span> Intl.ListFormat.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-listformat-instances" title="Properties of Intl.ListFormat Instances"><span class="secnum">13.4</span> Properties of Intl.ListFormat Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-intl-listformat-abstracts" title="Abstract Operations for ListFormat Objects"><span class="secnum">13.5</span> Abstract Operations for ListFormat Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-deconstructpattern" title="DeconstructPattern ( pattern, placeables )"><span class="secnum">13.5.1</span> DeconstructPattern ( <var>pattern</var>, <var>placeables</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-createpartsfromlist" title="CreatePartsFromList ( listFormat, list )"><span class="secnum">13.5.2</span> CreatePartsFromList ( <var>listFormat</var>, <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatlist" title="FormatList ( listFormat, list )"><span class="secnum">13.5.3</span> FormatList ( <var>listFormat</var>, <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatlisttoparts" title="FormatListToParts ( listFormat, list )"><span class="secnum">13.5.4</span> FormatListToParts ( <var>listFormat</var>, <var>list</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-createstringlistfromiterable" title="StringListFromIterable ( iterable )"><span class="secnum">13.5.5</span> StringListFromIterable ( <var>iterable</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#locale-objects" title="Locale Objects"><span class="secnum">14</span> Locale Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-locale-constructor" title="The Intl.Locale Constructor"><span class="secnum">14.1</span> The Intl.Locale Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale" title="Intl.Locale ( tag [ , options ] )"><span class="secnum">14.1.1</span> Intl.Locale ( <var>tag</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-apply-options-to-tag" title="ApplyOptionsToTag ( tag, options )"><span class="secnum">14.1.2</span> ApplyOptionsToTag ( <var>tag</var>, <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-apply-unicode-extension-to-tag" title="ApplyUnicodeExtensionToTag ( tag, options, relevantExtensionKeys )"><span class="secnum">14.1.3</span> ApplyUnicodeExtensionToTag ( <var>tag</var>, <var>options</var>, <var>relevantExtensionKeys</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-locale-constructor" title="Properties of the Intl.Locale Constructor"><span class="secnum">14.2</span> Properties of the Intl.Locale Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype" title="Intl.Locale.prototype"><span class="secnum">14.2.1</span> Intl.Locale.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.locale-internal-slots" title="Internal slots"><span class="secnum">14.2.2</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-locale-prototype-object" title="Properties of the Intl.Locale Prototype Object"><span class="secnum">14.3</span> Properties of the Intl.Locale Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.constructor" title="Intl.Locale.prototype.constructor"><span class="secnum">14.3.1</span> Intl.Locale.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype-@@tostringtag" title="Intl.Locale.prototype[ @@toStringTag ]"><span class="secnum">14.3.2</span> Intl.Locale.prototype[ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.maximize" title="Intl.Locale.prototype.maximize ( )"><span class="secnum">14.3.3</span> Intl.Locale.prototype.maximize ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.minimize" title="Intl.Locale.prototype.minimize ( )"><span class="secnum">14.3.4</span> Intl.Locale.prototype.minimize ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.toString" title="Intl.Locale.prototype.toString ( )"><span class="secnum">14.3.5</span> Intl.Locale.prototype.toString ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.baseName" title="get Intl.Locale.prototype.baseName"><span class="secnum">14.3.6</span> get Intl.Locale.prototype.baseName</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.calendar" title="get Intl.Locale.prototype.calendar"><span class="secnum">14.3.7</span> get Intl.Locale.prototype.calendar</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.caseFirst" title="get Intl.Locale.prototype.caseFirst"><span class="secnum">14.3.8</span> get Intl.Locale.prototype.caseFirst</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.collation" title="get Intl.Locale.prototype.collation"><span class="secnum">14.3.9</span> get Intl.Locale.prototype.collation</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.hourCycle" title="get Intl.Locale.prototype.hourCycle"><span class="secnum">14.3.10</span> get Intl.Locale.prototype.hourCycle</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.numeric" title="get Intl.Locale.prototype.numeric"><span class="secnum">14.3.11</span> get Intl.Locale.prototype.numeric</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.numberingSystem" title="get Intl.Locale.prototype.numberingSystem"><span class="secnum">14.3.12</span> get Intl.Locale.prototype.numberingSystem</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.language" title="get Intl.Locale.prototype.language"><span class="secnum">14.3.13</span> get Intl.Locale.prototype.language</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.script" title="get Intl.Locale.prototype.script"><span class="secnum">14.3.14</span> get Intl.Locale.prototype.script</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.Locale.prototype.region" title="get Intl.Locale.prototype.region"><span class="secnum">14.3.15</span> get Intl.Locale.prototype.region</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#numberformat-objects" title="NumberFormat Objects"><span class="secnum">15</span> NumberFormat Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-numberformat-constructor" title="The Intl.NumberFormat Constructor"><span class="secnum">15.1</span> The Intl.NumberFormat Constructor</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl.numberformat" title="Intl.NumberFormat ( [ locales [ , options ] ] )"><span class="secnum">15.1.1</span> Intl.NumberFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-chainnumberformat" title="ChainNumberFormat ( numberFormat, newTarget, this )"><span class="secnum">15.1.1.1</span> ChainNumberFormat ( <var>numberFormat</var>, <var>newTarget</var>, <var>this</var> )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-initializenumberformat" title="InitializeNumberFormat ( numberFormat, locales, options )"><span class="secnum">15.1.2</span> InitializeNumberFormat ( <var>numberFormat</var>, <var>locales</var>, <var>options</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-setnfdigitoptions" title="SetNumberFormatDigitOptions ( intlObj, options, mnfdDefault, mxfdDefault, notation )"><span class="secnum">15.1.3</span> SetNumberFormatDigitOptions ( <var>intlObj</var>, <var>options</var>, <var>mnfdDefault</var>, <var>mxfdDefault</var>, <var>notation</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-setnumberformatunitoptions" title="SetNumberFormatUnitOptions ( intlObj, options )"><span class="secnum">15.1.4</span> SetNumberFormatUnitOptions ( <var>intlObj</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-numberformat-constructor" title="Properties of the Intl.NumberFormat Constructor"><span class="secnum">15.2</span> Properties of the Intl.NumberFormat Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype" title="Intl.NumberFormat.prototype"><span class="secnum">15.2.1</span> Intl.NumberFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.supportedlocalesof" title="Intl.NumberFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">15.2.2</span> Intl.NumberFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat-internal-slots" title="Internal slots"><span class="secnum">15.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-numberformat-prototype-object" title="Properties of the Intl.NumberFormat Prototype Object"><span class="secnum">15.3</span> Properties of the Intl.NumberFormat Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.constructor" title="Intl.NumberFormat.prototype.constructor"><span class="secnum">15.3.1</span> Intl.NumberFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype-@@tostringtag" title="Intl.NumberFormat.prototype [ @@toStringTag ]"><span class="secnum">15.3.2</span> Intl.NumberFormat.prototype [ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.format" title="get Intl.NumberFormat.prototype.format"><span class="secnum">15.3.3</span> get Intl.NumberFormat.prototype.format</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.formattoparts" title="Intl.NumberFormat.prototype.formatToParts ( value )"><span class="secnum">15.3.4</span> Intl.NumberFormat.prototype.formatToParts ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.numberformat.prototype.resolvedoptions" title="Intl.NumberFormat.prototype.resolvedOptions ( )"><span class="secnum">15.3.5</span> Intl.NumberFormat.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-numberformat-instances" title="Properties of Intl.NumberFormat Instances"><span class="secnum">15.4</span> Properties of Intl.NumberFormat Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-numberformat-abstracts" title="Abstract Operations for NumberFormat Objects"><span class="secnum">15.5</span> Abstract Operations for NumberFormat Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-currencydigits" title="CurrencyDigits ( currency )"><span class="secnum">15.5.1</span> CurrencyDigits ( <var>currency</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-number-format-functions" title="Number Format Functions"><span class="secnum">15.5.2</span> Number Format Functions</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumberstring" title="FormatNumericToString ( intlObject, x )"><span class="secnum">15.5.3</span> FormatNumericToString ( <var>intlObject</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitionnumberpattern" title="PartitionNumberPattern ( numberFormat, x )"><span class="secnum">15.5.4</span> PartitionNumberPattern ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-partitionnotationsubpattern" title="PartitionNotationSubPattern ( numberFormat, x, n, exponent )"><span class="secnum">15.5.5</span> PartitionNotationSubPattern ( <var>numberFormat</var>, <var>x</var>, <var>n</var>, <var>exponent</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumber" title="FormatNumeric ( numberFormat, x )"><span class="secnum">15.5.6</span> FormatNumeric ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-formatnumbertoparts" title="FormatNumericToParts ( numberFormat, x )"><span class="secnum">15.5.7</span> FormatNumericToParts ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-torawprecision" title="ToRawPrecision ( x, minPrecision, maxPrecision )"><span class="secnum">15.5.8</span> ToRawPrecision ( <var>x</var>, <var>minPrecision</var>, <var>maxPrecision</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-torawfixed" title="ToRawFixed ( x, minInteger, minFraction, maxFraction )"><span class="secnum">15.5.9</span> ToRawFixed ( <var>x</var>, <var>minInteger</var>, <var>minFraction</var>, <var>maxFraction</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-unwrapnumberformat" title="UnwrapNumberFormat ( nf )"><span class="secnum">15.5.10</span> UnwrapNumberFormat ( <var>nf</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getnumberformatpattern" title="GetNumberFormatPattern ( numberFormat, x )"><span class="secnum">15.5.11</span> GetNumberFormatPattern ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-getnotationsubpattern" title="GetNotationSubPattern ( numberFormat, exponent )"><span class="secnum">15.5.12</span> GetNotationSubPattern ( <var>numberFormat</var>, <var>exponent</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-computeexponent" title="ComputeExponent ( numberFormat, x )"><span class="secnum">15.5.13</span> ComputeExponent ( <var>numberFormat</var>, <var>x</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-computeexponentformagnitude" title="ComputeExponentForMagnitude ( numberFormat, magnitude )"><span class="secnum">15.5.14</span> ComputeExponentForMagnitude ( <var>numberFormat</var>, <var>magnitude</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#pluralrules-objects" title="PluralRules Objects"><span class="secnum">16</span> PluralRules Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-pluralrules-constructor" title="The Intl.PluralRules Constructor"><span class="secnum">16.1</span> The Intl.PluralRules Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules" title="Intl.PluralRules ( [ locales [ , options ] ] )"><span class="secnum">16.1.1</span> Intl.PluralRules ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-initializepluralrules" title="InitializePluralRules ( pluralRules, locales, options )"><span class="secnum">16.1.2</span> InitializePluralRules ( <var>pluralRules</var>, <var>locales</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-pluralrules-constructor" title="Properties of the Intl.PluralRules Constructor"><span class="secnum">16.2</span> Properties of the Intl.PluralRules Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype" title="Intl.PluralRules.prototype"><span class="secnum">16.2.1</span> Intl.PluralRules.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.supportedlocalesof" title="Intl.PluralRules.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">16.2.2</span> Intl.PluralRules.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules-internal-slots" title="Internal slots"><span class="secnum">16.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-pluralrules-prototype-object" title="Properties of the Intl.PluralRules Prototype Object"><span class="secnum">16.3</span> Properties of the Intl.PluralRules Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype.constructor" title="Intl.PluralRules.prototype.constructor"><span class="secnum">16.3.1</span> Intl.PluralRules.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype-tostringtag" title="Intl.PluralRules.prototype [ @@toStringTag ]"><span class="secnum">16.3.2</span> Intl.PluralRules.prototype [ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype.select" title="Intl.PluralRules.prototype.select ( value )"><span class="secnum">16.3.3</span> Intl.PluralRules.prototype.select ( <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.pluralrules.prototype.resolvedoptions" title="Intl.PluralRules.prototype.resolvedOptions ( )"><span class="secnum">16.3.4</span> Intl.PluralRules.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-pluralrules-instances" title="Properties of Intl.PluralRules Instances"><span class="secnum">16.4</span> Properties of Intl.PluralRules Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-intl-pluralrules-abstracts" title="Abstract Operations for PluralRules Objects"><span class="secnum">16.5</span> Abstract Operations for PluralRules Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-getoperands" title="GetOperands ( s )"><span class="secnum">16.5.1</span> GetOperands ( <var>s</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-pluralruleselect" title="PluralRuleSelect ( locale, type, n, operands )"><span class="secnum">16.5.2</span> PluralRuleSelect ( <var>locale</var>, <var>type</var>, <var>n</var>, <var>operands</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-resolveplural" title="ResolvePlural ( pluralRules, n )"><span class="secnum">16.5.3</span> ResolvePlural ( <var>pluralRules</var>, <var>n</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#relativetimeformat-objects" title="RelativeTimeFormat Objects"><span class="secnum">17</span> RelativeTimeFormat Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-relativetimeformat-constructor" title="The Intl.RelativeTimeFormat Constructor"><span class="secnum">17.1</span> The Intl.RelativeTimeFormat Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat" title="Intl.RelativeTimeFormat ( [ locales [ , options ] ] )"><span class="secnum">17.1.1</span> Intl.RelativeTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-InitializeRelativeTimeFormat" title="InitializeRelativeTimeFormat ( relativeTimeFormat, locales, options )"><span class="secnum">17.1.2</span> InitializeRelativeTimeFormat ( <var>relativeTimeFormat</var>, <var>locales</var>, <var>options</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-relativetimeformat-constructor" title="Properties of the Intl.RelativeTimeFormat Constructor"><span class="secnum">17.2</span> Properties of the Intl.RelativeTimeFormat Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype" title="Intl.RelativeTimeFormat.prototype"><span class="secnum">17.2.1</span> Intl.RelativeTimeFormat.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.supportedLocalesOf" title="Intl.RelativeTimeFormat.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">17.2.2</span> Intl.RelativeTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat-internal-slots" title="Internal slots"><span class="secnum">17.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-relativetimeformat-prototype-object" title="Properties of the Intl.RelativeTimeFormat Prototype Object"><span class="secnum">17.3</span> Properties of the Intl.RelativeTimeFormat Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype.constructor" title="Intl.RelativeTimeFormat.prototype.constructor"><span class="secnum">17.3.1</span> Intl.RelativeTimeFormat.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype-toStringTag" title="Intl.RelativeTimeFormat.prototype[ @@toStringTag ]"><span class="secnum">17.3.2</span> Intl.RelativeTimeFormat.prototype[ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype.format" title="Intl.RelativeTimeFormat.prototype.format ( value, unit )"><span class="secnum">17.3.3</span> Intl.RelativeTimeFormat.prototype.format ( <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-Intl.RelativeTimeFormat.prototype.formatToParts" title="Intl.RelativeTimeFormat.prototype.formatToParts ( value, unit )"><span class="secnum">17.3.4</span> Intl.RelativeTimeFormat.prototype.formatToParts ( <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.relativetimeformat.prototype.resolvedoptions" title="Intl.RelativeTimeFormat.prototype.resolvedOptions ( )"><span class="secnum">17.3.5</span> Intl.RelativeTimeFormat.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-relativetimeformat-instances" title="Properties of Intl.RelativeTimeFormat Instances"><span class="secnum">17.4</span> Properties of Intl.RelativeTimeFormat Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-intl-relativetimeformat--abstracts" title="Abstract Operations for RelativeTimeFormat Objects"><span class="secnum">17.5</span> Abstract Operations for RelativeTimeFormat Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-singularrelativetimeunit" title="SingularRelativeTimeUnit ( unit )"><span class="secnum">17.5.1</span> SingularRelativeTimeUnit ( <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-PartitionRelativeTimePattern" title="PartitionRelativeTimePattern ( relativeTimeFormat, value, unit )"><span class="secnum">17.5.2</span> PartitionRelativeTimePattern ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-makepartslist" title="MakePartsList ( pattern, unit, parts )"><span class="secnum">17.5.3</span> MakePartsList ( <var>pattern</var>, <var>unit</var>, <var>parts</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-FormatRelativeTime" title="FormatRelativeTime ( relativeTimeFormat, value, unit )"><span class="secnum">17.5.4</span> FormatRelativeTime ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-FormatRelativeTimeToParts" title="FormatRelativeTimeToParts ( relativeTimeFormat, value, unit )"><span class="secnum">17.5.5</span> FormatRelativeTimeToParts ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#segmenter-objects" title="Segmenter Objects"><span class="secnum">18</span> Segmenter Objects</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sec-intl-segmenter-constructor" title="The Intl.Segmenter Constructor"><span class="secnum">18.1</span> The Intl.Segmenter Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter" title="Intl.Segmenter ( [ locales [ , options ] ] )"><span class="secnum">18.1.1</span> Intl.Segmenter ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-segmenter-constructor" title="Properties of the Intl.Segmenter Constructor"><span class="secnum">18.2</span> Properties of the Intl.Segmenter Constructor</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype" title="Intl.Segmenter.prototype"><span class="secnum">18.2.1</span> Intl.Segmenter.prototype</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.supportedlocalesof" title="Intl.Segmenter.supportedLocalesOf ( locales [ , options ] )"><span class="secnum">18.2.2</span> Intl.Segmenter.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter-internal-slots" title="Internal slots"><span class="secnum">18.2.3</span> Internal slots</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-properties-of-intl-segmenter-prototype-object" title="Properties of the Intl.Segmenter Prototype Object"><span class="secnum">18.3</span> Properties of the Intl.Segmenter Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype.constructor" title="Intl.Segmenter.prototype.constructor"><span class="secnum">18.3.1</span> Intl.Segmenter.prototype.constructor</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype-@@tostringtag" title="Intl.Segmenter.prototype [ @@toStringTag ]"><span class="secnum">18.3.2</span> Intl.Segmenter.prototype [ @@toStringTag ]</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype.segment" title="Intl.Segmenter.prototype.segment ( string )"><span class="secnum">18.3.3</span> Intl.Segmenter.prototype.segment ( <var>string</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-intl.segmenter.prototype.resolvedoptions" title="Intl.Segmenter.prototype.resolvedOptions ( )"><span class="secnum">18.3.4</span> Intl.Segmenter.prototype.resolvedOptions ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-intl-segmenter-instances" title="Properties of Intl.Segmenter Instances"><span class="secnum">18.4</span> Properties of Intl.Segmenter Instances</a></li><li><span class="item-toggle">◢</span><a href="#sec-segments-objects" title="Segments Objects"><span class="secnum">18.5</span> Segments Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-createsegmentsobject" title="CreateSegmentsObject ( segmenter, string )"><span class="secnum">18.5.1</span> CreateSegmentsObject ( <var>segmenter</var>, <var>string</var> )</a></li><li><span class="item-toggle">◢</span><a href="#sec-%segmentsprototype%-object" title="The %SegmentsPrototype% Object"><span class="secnum">18.5.2</span> The %SegmentsPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-%segmentsprototype%.containing" title="%SegmentsPrototype%.containing ( index )"><span class="secnum">18.5.2.1</span> %SegmentsPrototype%.containing ( <var>index</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%segmentsprototype%-@@iterator" title="%SegmentsPrototype% [ @@iterator ] ( )"><span class="secnum">18.5.2.2</span> %SegmentsPrototype% [ @@iterator ] ( )</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-segments-instances" title="Properties of Segments Instances"><span class="secnum">18.5.3</span> Properties of Segments Instances</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-segment-iterator-objects" title="Segment Iterator Objects"><span class="secnum">18.6</span> Segment Iterator Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-createsegmentiterator" title="CreateSegmentIterator ( segmenter, string )"><span class="secnum">18.6.1</span> CreateSegmentIterator ( <var>segmenter</var>, <var>string</var> )</a></li><li><span class="item-toggle">◢</span><a href="#sec-%segmentiteratorprototype%-object" title="The %SegmentIteratorPrototype% Object"><span class="secnum">18.6.2</span> The %SegmentIteratorPrototype% Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-%segmentiteratorprototype%.next" title="%SegmentIteratorPrototype%.next ( )"><span class="secnum">18.6.2.1</span> %SegmentIteratorPrototype%.next ( )</a></li><li><span class="item-toggle-none"></span><a href="#sec-%segmentiteratorprototype%.@@tostringtag" title="%SegmentIteratorPrototype% [ @@toStringTag ]"><span class="secnum">18.6.2.2</span> %SegmentIteratorPrototype% [ @@toStringTag ]</a></li></ol></li><li><span class="item-toggle-none"></span><a href="#sec-properties-of-segment-iterator-instances" title="Properties of Segment Iterator Instances"><span class="secnum">18.6.3</span> Properties of Segment Iterator Instances</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-segment-data-objects" title="Segment Data Objects"><span class="secnum">18.7</span> Segment Data Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-createsegmentdataobject" title="CreateSegmentDataObject ( segmenter, string, startIndex, endIndex )"><span class="secnum">18.7.1</span> CreateSegmentDataObject ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var> )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-intl-segmenter-abstracts" title="Abstract Operations for Segmenter Objects"><span class="secnum">18.8</span> Abstract Operations for Segmenter Objects</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-findboundary" title="FindBoundary ( segmenter, string, startIndex, direction )"><span class="secnum">18.8.1</span> FindBoundary ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>direction</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#locale-sensitive-functions" title="Locale Sensitive Functions of the ECMAScript Language Specification"><span class="secnum">19</span> Locale Sensitive Functions of the ECMAScript Language Specification</a><ol class="toc"><li><span class="item-toggle">◢</span><a href="#sup-properties-of-the-string-prototype-object" title="Properties of the String Prototype Object"><span class="secnum">19.1</span> Properties of the String Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-String.prototype.localeCompare" title="String.prototype.localeCompare ( that [ , locales [ , options ] ] )"><span class="secnum">19.1.1</span> String.prototype.localeCompare ( <var>that</var> [ , <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sup-string.prototype.tolocalelowercase" title="String.prototype.toLocaleLowerCase ( [ locales ] )"><span class="secnum">19.1.2</span> String.prototype.toLocaleLowerCase ( [ <var>locales</var> ] )</a></li><li><span class="item-toggle-none"></span><a href="#sup-string.prototype.tolocaleuppercase" title="String.prototype.toLocaleUpperCase ( [ locales ] )"><span class="secnum">19.1.3</span> String.prototype.toLocaleUpperCase ( [ <var>locales</var> ] )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sup-properties-of-the-number-prototype-object" title="Properties of the Number Prototype Object"><span class="secnum">19.2</span> Properties of the Number Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-number.prototype.tolocalestring" title="Number.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">19.2.1</span> Number.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sup-properties-of-the-bigint-prototype-object" title="Properties of the BigInt Prototype Object"><span class="secnum">19.3</span> Properties of the BigInt Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-bigint.prototype.tolocalestring" title="BigInt.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">19.3.1</span> BigInt.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sup-properties-of-the-date-prototype-object" title="Properties of the Date Prototype Object"><span class="secnum">19.4</span> Properties of the Date Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-date.prototype.tolocalestring" title="Date.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">19.4.1</span> Date.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sup-date.prototype.tolocaledatestring" title="Date.prototype.toLocaleDateString ( [ locales [ , options ] ] )"><span class="secnum">19.4.2</span> Date.prototype.toLocaleDateString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li><li><span class="item-toggle-none"></span><a href="#sup-date.prototype.tolocaletimestring" title="Date.prototype.toLocaleTimeString ( [ locales [ , options ] ] )"><span class="secnum">19.4.3</span> Date.prototype.toLocaleTimeString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sup-properties-of-the-array-prototype-object" title="Properties of the Array Prototype Object"><span class="secnum">19.5</span> Properties of the Array Prototype Object</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sup-array.prototype.tolocalestring" title="Array.prototype.toLocaleString ( [ locales [ , options ] ] )"><span class="secnum">19.5.1</span> Array.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</a></li></ol></li></ol></li><li><span class="item-toggle-none"></span><a href="#annex-implementation-dependent-behaviour" title="Implementation Dependent Behaviour"><span class="secnum">A</span> Implementation Dependent Behaviour</a></li><li><span class="item-toggle-none"></span><a href="#annex-incompatibilities" title="Additions and Changes That Introduce Incompatibilities with Prior Editions"><span class="secnum">B</span> Additions and Changes That Introduce Incompatibilities with Prior Editions</a></li><li><span class="item-toggle-none"></span><a href="#sec-colophon" title="Colophon"><span class="secnum">C</span> Colophon</a></li><li><span class="item-toggle-none"></span><a href="#sec-copyright-and-software-license" title="Copyright &amp; Software License"><span class="secnum">D</span> Copyright &amp; Software License</a></li></ol></div></div><div id="spec-container"><h1 class="version">Draft ECMA-402 / March 18, 2022</h1><h1 class="title">ECMAScript® 2022 Internationalization API Specification</h1>
<p><img src="img/ecma-logo.svg" id="ecma-logo"></p>
<emu-biblio href="./biblio.json"></emu-biblio>
<emu-import href="./metablock.html"><div id="metadata-block">
  <h1>Contributing to this Specification</h1>
  <p>This specification is developed on GitHub with the help of the ECMAScript community. There are a number of ways to contribute to the development of this specification:</p>
  <ul>
    <li>GitHub Repository: <a href="https://github.com/tc39/ecma402">https://github.com/tc39/ecma402</a></li>
    <li>Issues: <a href="https://github.com/tc39/ecma402/issues">All Issues</a>, <a href="https://github.com/tc39/ecma402/issues/new">File a New Issue</a></li>
    <li>Pull Requests: <a href="https://github.com/tc39/ecma402/pulls">All Pull Requests</a>, <a href="https://github.com/tc39/ecma402/pulls/new">Create a New Pull Request</a></li>
    <li>Test Suite: <a href="https://github.com/tc39/test262">Test262</a></li>
    <li>TC39-TG2:
      <ul>
        <li>Convener: <a href="mailto:shane@unicode.org">Shane F. Carr</a> (<a href="https://github.com/sffc">@sffc</a>)</li>
        <li>Admin group: <a href="mailto:ecma402-admin@chromium.org">contact by email</a></li>
      </ul>
    </li>
    <li>Editors:
      <ul>
        <li><a href="mailto:leonardo.balter+ecma402@gmail.com">Leo Balter</a> (<a href="https://github.com/leobalter">@leobalter</a>)</li>
        <li><a href="mailto:richard.gibson+ecma402@gmail.com">Richard Gibson</a> (<a href="https://github.com/gibson042">@gibson042</a>)</li>
        <li><a href="mailto:ryzokuken@igalia.com">Ujjwal Sharma</a> (<a href="https://github.com/ryzokuken">@ryzokuken</a>)</li>
      </ul>
    </li>
    <li>
      Community:
      <ul>
        <li>Matrix: <a href="https://matrix.to/#/#tc39:matrix.org">#tc39:matrix.org</a></li>
        <li>Matrix: <a href="https://matrix.to/#/#tc39-ecma402:matrix.org">#tc39-ecma402:matrix.org</a></li>
      </ul>
    </li>
  </ul>
  <p>Refer to the <emu-xref href="#sec-colophon" id="_ref_0"><a href="#sec-colophon">colophon</a></emu-xref> for more information on how this document is created.</p>
</div></emu-import>
<emu-import href="./introduction.html"><emu-intro id="introduction">
  <h1>Introduction</h1>
  <p>
    This specification's source can be found at <a href="https://github.com/tc39/ecma402">https://github.com/tc39/ecma402</a>.
  </p>
  <p>
    The ECMAScript 2022 Internationalization API Specification (ECMA-402 9<sup>th</sup> Edition), provides key language sensitive functionality as a complement to the ECMAScript 2022 Language Specification (ECMA-262 13<sup>th</sup> Edition or successor). Its functionality has been selected from that of well-established internationalization APIs such as those of the <dfn id="icu">Internationalization Components for Unicode (ICU) library</dfn> (<a href="https://unicode-org.github.io/icu-docs/">https://unicode-org.github.io/icu-docs/</a>), of the .NET framework, or of the Java platform.
  </p>
  <p>
    The 1<sup>st</sup> Edition API was developed by an ad-hoc group established by Ecma TC39 in September 2010 based on a proposal by Nebojša Ćirić and Jungshik Shin.
  </p>
  <p>
    The 2<sup>nd</sup> Edition API was adopted by the General Assembly of June 2015, as a complement to the ECMAScript 6<sup>th</sup> Edition.
  </p>
  <p>
    The 3<sup>rd</sup> Edition API was the first edition released under Ecma TC39's new yearly release cadence and open development process. A plain-text source document was built from the ECMA-402 source document to serve as the base for further development entirely on GitHub. Over the year of this standard's development, dozens of pull requests and issues were filed representing several of bug fixes, editorial fixes and other improvements. Additionally, numerous software tools were developed to aid in this effort including Ecmarkup, Ecmarkdown, and Grammarkdown.
  </p>
  <p>
    Dozens of individuals representing many organizations have made very significant contributions within Ecma TC39 to the development of this edition and to the prior editions. In addition, a vibrant community has emerged supporting TC39's ECMAScript efforts. This community has reviewed numerous drafts, filed dozens of bug reports, performed implementation experiments, contributed test suites, and educated the world-wide developer community about ECMAScript Internationalization. Unfortunately, it is impossible to identify and acknowledge every person and organization who has contributed to this effort.
  </p>
  <p>
    Norbert Lindenberg<br>
    ECMA-402, 1<sup>st</sup> Edition Project Editor
  </p>
  <p>
    Rick Waldron<br>
    ECMA-402, 2<sup>nd</sup> Edition Project Editor
  </p>
  <p>
    Caridy Patiño<br>
    ECMA-402, 3<sup>rd</sup>, 4<sup>th</sup> and 5<sup>th</sup> Editions Project Editor
  </p>
  <p>
    Caridy Patiño, Daniel Ehrenberg, Leo Balter<br>
    ECMA-402, 6<sup>th</sup> Edition Project Editors
  </p>
  <p>
    Leo Balter, Valerie Young, Isaac Durazo<br>
    ECMA-402, 7<sup>th</sup> Edition Project Editors
  </p>
  <p>
    Leo Balter, Richard Gibson<br>
    ECMA-402, 8<sup>th</sup> and 9<sup>th</sup> Edition Project Editors
  </p>
</emu-intro></emu-import>
<emu-import href="./scope.html"><emu-clause id="scope">
  <h1><span class="secnum">1</span> Scope</h1>
  <p>
    This Standard defines the application programming interface for ECMAScript objects that support programs that need to adapt to the linguistic and cultural conventions used by different human languages and countries.
  </p>
</emu-clause></emu-import>
<emu-import href="./conformance.html"><emu-clause id="conformance">
  <h1><span class="secnum">2</span> Conformance</h1>
  <p>
    A conforming implementation of the ECMAScript 2022 Internationalization API Specification must conform to the ECMAScript 2022 Language Specification (ECMA-262 13<sup>th</sup> Edition, or successor), and must provide and support all the objects, properties, functions, and program semantics described in this specification.
  </p>
  <p>
    A conforming implementation of the ECMAScript 2022 Internationalization API Specification is permitted to provide additional objects, properties, and functions beyond those described in this specification. In particular, a conforming implementation of the ECMAScript 2022 Internationalization API Specification is permitted to provide properties not described in this specification, and values for those properties, for objects that are described in this specification. A conforming implementation is not permitted to add optional arguments to the functions defined in this specification.
  </p>
  <p>
    A conforming implementation is permitted to accept additional values, and then have implementation-defined behaviour instead of throwing a <emu-val>RangeError</emu-val>, for the following properties of <var>options</var> arguments:
  </p>
  <ul>
    <li>The <var>options</var> property <emu-val>"localeMatcher"</emu-val> in all constructors and <code>supportedLocalesOf</code> methods.</li>
    <li>The <var>options</var> properties <emu-val>"usage"</emu-val> and <emu-val>"sensitivity"</emu-val> in the Collator <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</li>
    <li>The <var>options</var> properties <emu-val>"style"</emu-val>, <emu-val>"currencyDisplay"</emu-val>, <emu-val>"notation"</emu-val>, <emu-val>"compactDisplay"</emu-val>, <emu-val>"signDisplay"</emu-val>, <emu-val>"currencySign"</emu-val>, and <emu-val>"unitDisplay"</emu-val> in the NumberFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</li>
    <li>The <var>options</var> properties <emu-val>"minimumIntegerDigits"</emu-val>, <emu-val>"minimumFractionDigits"</emu-val>, <emu-val>"maximumFractionDigits"</emu-val>, <emu-val>"minimumSignificantDigits"</emu-val>, and <emu-val>"maximumSignificantDigits"</emu-val> in the NumberFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>, provided that the additional values are interpreted as <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> values higher than the specified limits.</li>
    <li>The <var>options</var> properties listed in <emu-xref href="#table-datetimeformat-components" id="_ref_1"><a href="#table-datetimeformat-components">Table 6</a></emu-xref> in the DateTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</li>
    <li>The <var>options</var> property <emu-val>"formatMatcher"</emu-val> in the DateTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</li>
    <li>The <var>options</var> properties <emu-val>"minimumIntegerDigits"</emu-val>, <emu-val>"minimumFractionDigits"</emu-val>, <emu-val>"maximumFractionDigits"</emu-val>, and <emu-val>"minimumSignificantDigits"</emu-val> in the PluralRules <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>, provided that the additional values are interpreted as <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> values higher than the specified limits.</li>
    <li>The <var>options</var> property <emu-val>"type"</emu-val> in the PluralRules <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</li>
    <li>The <var>options</var> property <emu-val>"style"</emu-val> and <emu-val>"numeric"</emu-val> in the RelativeTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</li>
    <li>The <var>options</var> property <emu-val>"style"</emu-val> and <emu-val>"type"</emu-val> in the DisplayNames <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>.</li>
  </ul>
</emu-clause></emu-import>
<emu-import href="./normative-references.html"><emu-clause id="normative-references">
  <h1><span class="secnum">3</span> Normative References</h1>
  <p>
    The following referenced documents are required for the application of this document. For dated references, only the edition cited applies. For undated references, the latest edition of the referenced document (including any amendments) applies.
  </p>

  <p>
    ECMAScript 2022 Language Specification (ECMA-262 13<sup>th</sup> Edition, or successor).<br>
    <a href="https://www.ecma-international.org/publications/standards/Ecma-262.htm">https://www.ecma-international.org/publications/standards/Ecma-262.htm</a>
  </p>

  <emu-note><span class="note">Note</span><div class="note-contents">
    Throughout this document, the phrase “es2022, <var>x</var>” (where x is a sequence of numbers separated by periods) may be used as shorthand for "ECMAScript 2022 Language Specification (ECMA-262 13<sup>th</sup> Edition, sub clause <var>x</var>)".
  </div></emu-note>

  <ul>
    <li>
      ISO/IEC 10646:2014: Information Technology – Universal Multiple-Octet Coded Character Set (UCS) plus Amendment 1:2015 and Amendment 2, plus additional amendments and corrigenda, or successor
      <ul>
        <li><a href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=63182">https://www.iso.org/iso/catalogue_detail.htm?csnumber=63182</a></li>
        <li><a href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=65047">https://www.iso.org/iso/catalogue_detail.htm?csnumber=65047</a></li>
        <li><a href="https://www.iso.org/iso/catalogue_detail.htm?csnumber=66791">https://www.iso.org/iso/catalogue_detail.htm?csnumber=66791</a></li>
      </ul>
    </li>
    <li>
      <a href="https://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=64758">ISO 4217:2015, Codes for the representation of currencies and funds, or successor</a>
    </li>
    <li>
      <a href="https://tools.ietf.org/html/rfc4647">IETF RFC 4647, Matching of Language Tags, or successor</a>
    </li>
    <li>
      <a href="https://www.iana.org/time-zones/">IANA Time Zone Database</a>
    </li>
    <li>
      <a href="https://www.unicode.org/versions/latest">The Unicode Standard</a>
    </li>
    <li>
      <a href="https://www.unicode.org/reports/tr29/">Unicode Standard Annex #29: Unicode Text Segmentation</a>
    </li>
    <li>
      Unicode Technical Standard 35
      <ul>
        <li>
          <a href="https://unicode.org/reports/tr35/">Unicode Locale Data Markup Language</a>
        </li>
        <li>
          <a href="https://unicode.org/reports/tr35/#Unicode_Language_and_Locale_Identifiers">Unicode BCP 47 Locale Identifiers</a>
        </li>
      </ul>
    </li>
  </ul>
</emu-clause></emu-import>
<emu-import href="./overview.html"><emu-clause id="overview">
  <h1><span class="secnum">4</span> Overview</h1>

  <p>
    This section contains a non-normative overview of the ECMAScript 2022 Internationalization API Specification.
  </p>

  <emu-clause id="sec-internationalization-localization-globalization">
    <h1><span class="secnum">4.1</span> Internationalization, Localization, and Globalization</h1>

    <p>
      Internationalization of software means designing it such that it supports or can be easily adapted to support the needs of users speaking different languages and having different cultural expectations, and enables worldwide communication between them. Localization then is the actual adaptation to a specific language and culture. Globalization of software is commonly understood to be the combination of internationalization and localization. Globalization starts at the lowest level by using a text representation that supports all languages in the world, and using standard identifiers to identify languages, countries, time zones, and other relevant parameters. It continues with using a user interface language and data presentation that the user understands, and finally often requires product-specific adaptations to the user's language, culture, and environment.
    </p>
    <p>
      The ECMAScript 2022 Language Specification lays the foundation by using Unicode for text representation and by providing a few language-sensitive functions, but gives applications little control over the behaviour of these functions. The ECMAScript 2022 Internationalization API Specification builds on this by providing a set of customizable language-sensitive functionality. The API is useful even for applications that themselves are not internationalized, as even applications targeting only one language and one region need to properly support that one language and region. However, the API also enables applications that support multiple languages and regions, even concurrently, as may be needed in server environments.
    </p>
  </emu-clause>

  <emu-clause id="sec-api-overview">
    <h1><span class="secnum">4.2</span> API Overview</h1>

    <p>
      The ECMAScript 2022 Internationalization API Specification is designed to complement the ECMAScript 2022 Language Specification by providing key language-sensitive functionality. The API can be added to an implementation of the ECMAScript 2022 Language Specification (ECMA-262 13<sup>th</sup> Edition, or successor).
    </p>
    <p>
      The ECMAScript 2022 Internationalization API Specification provides several key pieces of language-sensitive functionality that are required in most applications: String comparison (collation), number formatting, date and time formatting, relative time formatting, display names, list formatting, locale selection and operation, pluralization rules, case conversion, and text segmentation. While the ECMAScript 2022 Language Specification provides functions for this basic functionality (on <emu-xref href="#sec-array.prototype"><a href="https://tc39.es/ecma262/#sec-array.prototype">Array.prototype</a></emu-xref>: <code>toLocaleString</code>; on <emu-xref href="#sec-string.prototype"><a href="https://tc39.es/ecma262/#sec-string.prototype">String.prototype</a></emu-xref>: <code>localeCompare</code>, <code>toLocaleLowerCase</code>, <code>toLocaleUpperCase</code>; on <emu-xref href="#sec-number.prototype"><a href="https://tc39.es/ecma262/#sec-number.prototype">Number.prototype</a></emu-xref>: <code>toLocaleString</code>; on <emu-xref href="#sec-date.prototype"><a href="https://tc39.es/ecma262/#sec-date.prototype">Date.prototype</a></emu-xref>: <code>toLocaleString</code>, <code>toLocaleDateString</code>, and <code>toLocaleTimeString</code>), it leaves the actual behaviour of these functions largely up to implementations to define. The ECMAScript 2022 Internationalization API Specification provides additional functionality, control over the language and over details of the behaviour to be used, and a more complete specification of required functionality.
    </p>

    <p>Applications can use the API in two ways:</p>
    <ol>
      <li>
        Directly, by using a <emu-xref href="#service-constructor" id="_ref_179"><a href="#service-constructor">service constructor</a></emu-xref> to construct an object, specifying a list of preferred languages and options to configure its behaviour. The object provides a main function (<code>compare</code>, <code>select</code>, <code>format</code>, etc.), which can be called repeatedly. It also provides a <code>resolvedOptions</code> function, which the application can use to find out the exact configuration of the object.
      </li>
      <li>
        Indirectly, by using the functions of the ECMAScript 2022 Language Specification mentioned above. The collation and formatting functions are respecified in this specification to accept the same arguments as the Collator, NumberFormat, and DateTimeFormat constructors and produce the same results as their compare or format methods. The case conversion functions are respecified to accept a list of preferred languages.
      </li>
    </ol>

    <p>
      The Intl object is used to package all functionality defined in the ECMAScript 2022 Internationalization API Specification to avoid name collisions.
    </p>

    <emu-note><span class="note">Note</span><div class="note-contents">While the API includes a variety of formatters, it does not provide any parsing facilities. This is intentional, has been discussed extensively, and concluded after weighing in all the benefits and drawbacks of including said functionality. See the discussion on the <a href="https://github.com/tc39/ecma402/issues/342">issue tracker</a>.</div></emu-note>
  </emu-clause>

  <emu-clause id="sec-api-conventions">
    <h1><span class="secnum">4.3</span> API Conventions</h1>

    <p>
      Every <emu-xref href="#sec-constructor-properties-of-the-intl-object" id="_ref_2"><a href="#sec-constructor-properties-of-the-intl-object">Intl constructor</a></emu-xref> should behave as if defined by a class, throwing a <emu-val>TypeError</emu-val> exception when called as a function (without NewTarget). For backwards compatibility with past editions, this does not apply to <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_180"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>, <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_181"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>, or <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_182"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, each of which construct and return a new object when called as a function.
    </p>

    <emu-note id="legacy-constructor"><span class="note"><a href="#legacy-constructor">Note</a></span><div class="note-contents">
      In ECMA 402 v1, Intl constructors supported a mode of operation where calling them with an existing object as a receiver would add relevant internal slots to the receiver, effectively transforming it into an instance of the class. In ECMA 402 v2, this capability was removed, to avoid adding internal slots to existing objects. In ECMA 402 v3, the capability was re-added as "normative optional" in a mode which chains the underlying Intl instance on any object, when the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is called. See <a href="https://github.com/tc39/ecma402/issues/57">Issue 57</a> for details.
    </div></emu-note>
  </emu-clause>

  <emu-clause id="sec-implementation-dependencies">
    <h1><span class="secnum">4.4</span> Implementation Dependencies</h1>

    <p>
      Due to the nature of internationalization, the API specification has to leave several details implementation dependent:
    </p>
    <ul>
      <li>
        <em>The set of locales that an implementation supports with adequate localizations:</em> Linguists estimate the number of human languages to around 6000, and the more widely spoken ones have variations based on regions or other parameters. Even large locale data collections, such as the Common Locale Data Repository, cover only a subset of this large set. Implementations targeting resource-constrained devices may have to further reduce the subset.
      </li>
      <li>
        <em>The exact form of localizations such as format patterns:</em> In many cases locale-dependent conventions are not standardized, so different forms may exist side by side, or they vary over time. Different internationalization libraries may have implemented different forms, without any of them being actually wrong. In order to allow this API to be implemented on top of existing libraries, such variations have to be permitted.
      </li>
      <li>
        <em>Subsets of Unicode:</em> Some operations, such as collation, operate on strings that can include characters from the entire Unicode character set. However, both the Unicode standard and the ECMAScript standard allow implementations to limit their functionality to subsets of the Unicode character set. In addition, locale conventions typically don't specify the desired behaviour for the entire Unicode character set, but only for those characters that are relevant for the locale. While the Unicode Collation Algorithm combines a default collation order for the entire Unicode character set with the ability to tailor for local conventions, subsets and tailorings still result in differences in behaviour.
      </li>
    </ul>

    <emu-clause id="sec-compatibility">
      <h1><span class="secnum">4.4.1</span> Compatibility across implementations</h1>

      <p>
        ECMA 402 describes the schema of the data used by its functions. The
        data contained inside is implementation-dependent, and expected to
        change over time and vary between implementations. The variation is
        visible by programmers, and it is possible to construct programs which
        will depend on a particular output. However, this specification
        attempts to describe reasonable constraints which will allow
        well-written programs to function across implementations.
        Implementations are encouraged to continue their efforts to harmonize
        linguistic data.
      </p>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./conventions.html"><emu-clause id="conventions">
  <h1><span class="secnum">5</span> Notational Conventions</h1>

  <p>
    This standard uses a subset of the notational conventions of the ECMAScript 2022 Language Specification (ECMA-262 13<sup>th</sup> Edition), as es2022:
  </p>

  <ul>
    <li>Object Internal Methods and Internal Slots, as described in es2022, <emu-xref href="#sec-object-internal-methods-and-internal-slots"><a href="https://tc39.es/ecma262/#sec-object-internal-methods-and-internal-slots">6.1.7.2</a></emu-xref>.</li>
    <li>Algorithm conventions, as described in es2022, <emu-xref href="#sec-algorithm-conventions"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions">5.2</a></emu-xref>, and the use of <emu-xref href="#sec-algorithm-conventions-abstract-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-abstract-operations">abstract operations</a></emu-xref>, as described in es2022, <emu-xref href="#sec-type-conversion"><a href="https://tc39.es/ecma262/#sec-type-conversion">7.1</a></emu-xref>, <emu-xref href="#sec-testing-and-comparison-operations"><a href="https://tc39.es/ecma262/#sec-testing-and-comparison-operations">7.2</a></emu-xref>, <emu-xref href="#sec-operations-on-objects"><a href="https://tc39.es/ecma262/#sec-operations-on-objects">7.3</a></emu-xref>, <emu-xref href="#sec-operations-on-iterator-objects"><a href="https://tc39.es/ecma262/#sec-operations-on-iterator-objects">7.4</a></emu-xref>.</li>
    <li>Internal Slots, as described in es2022, <emu-xref href="#sec-ordinary-object-internal-methods-and-internal-slots"><a href="https://tc39.es/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots">9.1</a></emu-xref>.</li>
    <li>The <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> and <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> Specification Type, as described in es2022, <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">6.2.1</a></emu-xref>.</li>
  </ul>

  <emu-note><span class="note">Note</span><div class="note-contents">
    As described in the ECMAScript Language Specification, algorithms are used to precisely specify the required semantics of ECMAScript constructs, but are not intended to imply the use of any specific implementation technique. Internal slots are used to define the semantics of object values, but are not part of the API. They are defined purely for expository purposes. An implementation of the API must behave as if it produced and operated upon internal slots in the manner described here.
  </div></emu-note>

  <p>
    As an extension to the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> Specification Type, the notation “[[&lt;<var>name</var>&gt;]]” denotes a field whose name is given by the variable <var>name</var>, which must have a String value. For example, if a variable <var>s</var> has the value <emu-val>"a"</emu-val>, then [[&lt;<var>s</var>&gt;]] denotes the field [[a]].
  </p>

  <p>
    This specification uses blocks demarcated as <span class="normative-optional">Normative Optional</span> to denote the sense of <a href="https://tc39.es/ecma262/#sec-additional-ecmascript-features-for-web-browsers">Annex B</a> in ECMA 262. That is, normative optional sections are required when the ECMAScript host is a web browser. The content of the section is normative but optional if the ECMAScript host is not a web browser.
  </p>

  <emu-clause id="sec-402-well-known-intrinsic-objects">
    <h1><span class="secnum">5.1</span> Well-Known Intrinsic Objects</h1>

    <p>
      The following table extends the Well-Known Intrinsic Objects table defined in es2022, <emu-xref href="#sec-well-known-intrinsic-objects"><a href="https://tc39.es/ecma262/#sec-well-known-intrinsic-objects">6.1.7.4</a></emu-xref>.
    </p>

    <emu-table id="table-402-well-known-intrinsic-objects"><figure><figcaption>Table 1: Well-known Intrinsic Objects (Extensions)</figcaption>
      
      <table class="real-table">
        <thead>
          <tr>
            <th>Intrinsic Name</th>
            <th>Global Name</th>
            <th>ECMAScript Language Association</th>
          </tr>
        </thead>
        <tbody><tr>
          <td><emu-xref href="#sec-the-intl-collator-constructor" id="_ref_183"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref></td>
          <td><code>Intl.Collator</code></td>
          <td>The <code>Intl.Collator</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-the-intl-collator-constructor" id="_ref_3"><a href="#sec-the-intl-collator-constructor">10.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_184"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref></td>
          <td><code>Intl.DateTimeFormat</code></td>
          <td>The <code>Intl.DateTimeFormat</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_4"><a href="#sec-intl-datetimeformat-constructor">11.1</a></emu-xref>).</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-displaynames-constructor" id="_ref_185"><a href="#sec-intl-displaynames-constructor">%DisplayNames%</a></emu-xref></td>
          <td><code>Intl.DisplayNames</code></td>
          <td>The <code>Intl.DisplayNames</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-displaynames-constructor" id="_ref_5"><a href="#sec-intl-displaynames-constructor">12.1</a></emu-xref>).</td>
        </tr>
        <tr>
          <td><emu-xref href="#intl-object" id="_ref_186"><a href="#intl-object">%Intl%</a></emu-xref></td>
          <td><code>Intl</code></td>
          <td>The <code>Intl</code> object (<emu-xref href="#intl-object" id="_ref_6"><a href="#intl-object">8</a></emu-xref>).</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-listformat-constructor" id="_ref_187"><a href="#sec-intl-listformat-constructor">%ListFormat%</a></emu-xref></td>
          <td><code>Intl.ListFormat</code></td>
          <td>The <code>Intl.ListFormat</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-listformat-constructor" id="_ref_7"><a href="#sec-intl-listformat-constructor">13.1</a></emu-xref>).</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-locale-constructor" id="_ref_188"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref></td>
          <td><code>Intl.Locale</code></td>
          <td>The <code>Intl.Locale</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-locale-constructor" id="_ref_8"><a href="#sec-intl-locale-constructor">14.1</a></emu-xref>).</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-numberformat-constructor" id="_ref_189"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref></td>
          <td><code>Intl.NumberFormat</code></td>
          <td>The <code>Intl.NumberFormat</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_9"><a href="#sec-intl-numberformat-constructor">15.1</a></emu-xref>)</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_190"><a href="#sec-intl-pluralrules-constructor">%PluralRules%</a></emu-xref></td>
          <td><code>Intl.PluralRules</code></td>
          <td>The <code>Intl.PluralRules</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_10"><a href="#sec-intl-pluralrules-constructor">16.1</a></emu-xref>).</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_191"><a href="#sec-intl-relativetimeformat-constructor">%RelativeTimeFormat%</a></emu-xref></td>
          <td><code>Intl.RelativeTimeFormat</code></td>
          <td>The <code>Intl.RelativeTimeFormat</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_11"><a href="#sec-intl-relativetimeformat-constructor">17.1</a></emu-xref>).</td>
        </tr>
        <tr>
          <td><emu-xref href="#sec-intl-segmenter-constructor" id="_ref_192"><a href="#sec-intl-segmenter-constructor">%Segmenter%</a></emu-xref></td>
          <td><code>Intl.Segmenter</code></td>
          <td>The <code>Intl.Segmenter</code> <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-intl-segmenter-constructor" id="_ref_12"><a href="#sec-intl-segmenter-constructor">18.1</a></emu-xref>).</td>
        </tr>
      </tbody></table>
    </figure></emu-table>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./locales-currencies-tz.html"><emu-clause id="locales-currencies-tz">
  <h1><span class="secnum">6</span> Identification of Locales, Currencies, Time Zones, and Measurement Units</h1>

  <p>
    This clause describes the String values used in the ECMAScript 2022 Internationalization API Specification to identify locales, currencies, time zones, and measurement units.
  </p>

  <emu-clause id="sec-case-sensitivity-and-case-mapping">
    <h1><span class="secnum">6.1</span> Case Sensitivity and Case Mapping</h1>

    <p>
      The String values used to identify locales, currencies, scripts, and time zones are interpreted in an ASCII-case-insensitive manner, treating the code units 0x0041 through 0x005A (corresponding to Unicode characters LATIN CAPITAL LETTER A through LATIN CAPITAL LETTER Z) as equivalent to the corresponding code units 0x0061 through 0x007A (corresponding to Unicode characters LATIN SMALL LETTER A through LATIN SMALL LETTER Z), inclusive. No other case folding equivalences are applied.
    </p>
    <p>
      Mapping to upper case takes a String value and produces a new String value in which each lower case ASCII letter code unit (0x0061 through 0x007A, inclusive) is replaced with the corresponding upper case ASCII letter code unit (0x0041 through 0x005A, inclusive) and all other code units are preserved.
    </p>
    <p>
      Mapping to lower case takes a String value and produces a new String value in which each upper case ASCII letter code unit (0x0041 through 0x005A, inclusive) is replaced with the corresponding lower case ASCII letter code unit (0x0061 through 0x007A, inclusive) and all other code units are preserved.
    </p>
    <p>
      A String value <var>A</var> is an ASCII-case-insensitive match for String value <var>B</var> if mapping <var>A</var> to upper case is exactly the same sequence of code units as mapping <var>B</var> to upper case. A sequence of Unicode code points <var>A</var> is an ASCII-case-insensitive match for <var>B</var> if <var>B</var> is an ASCII-case-insensitive match for ! <emu-xref aoid="CodePointsToString"><a href="https://tc39.es/ecma262/#sec-codepointstostring">CodePointsToString</a></emu-xref>(<var>A</var>).
    </p>

    <emu-note><span class="note">Note</span><div class="note-contents">
      For example, <emu-val>"ß"</emu-val> (U+00DF) must not match or be mapped to <emu-val>"SS"</emu-val> (U+0053, U+0053). <emu-val>"ı"</emu-val> (U+0131) must not match or be mapped to <emu-val>"I"</emu-val> (U+0049).
    </div></emu-note>
  </emu-clause>

  <emu-clause id="sec-language-tags">
    <h1><span class="secnum">6.2</span> Language Tags</h1>

    <p>
      The ECMAScript 2022 Internationalization API Specification identifies locales using Unicode BCP 47 locale identifiers as defined by <a href="https://unicode.org/reports/tr35/#Identifiers">Unicode Technical Standard #35 LDML § 3 Unicode Language and Locale Identifiers</a>, which may include extensions such as the <a href="https://unicode.org/reports/tr35/#Locale_Extension_Key_and_Type_Data">Unicode BCP 47 U Extension</a>. Their canonical form is specified in <a href="https://unicode.org/reports/tr35/#Canonical_Unicode_Locale_Identifiers">Unicode Technical Standard #35 LDML § 3.2.1 Canonical Unicode Locale Identifiers</a>.
    </p>

    <p>
      Unicode BCP 47 locale identifiers are structurally valid when they match those syntactical formatting criteria of <a href="https://unicode.org/reports/tr35/tr35.html#Unicode_locale_identifier">Unicode Technical Standard 35, section 3.2</a>, but it is not required to validate them according to the Unicode validation data. All structurally valid language tags are valid for use with the APIs defined by this standard. However, the set of locales and thus language tags that an implementation supports with adequate localizations is implementation dependent. <emu-xref href="#sec-constructor-properties-of-the-intl-object" id="_ref_13"><a href="#sec-constructor-properties-of-the-intl-object">Intl constructors</a></emu-xref> map the language tags used in requests to locales supported by their respective implementations.
    </p>

    <emu-clause id="sec-unicode-locale-extension-sequences">
      <h1><span class="secnum">6.2.1</span> Unicode Locale Extension Sequences</h1>

      <p>
        This standard uses the term "<dfn>Unicode locale extension sequence</dfn>" - as described in <a href="https://unicode.org/reports/tr35/#unicode_locale_extensions"><code>unicode_locale_extensions</code></a> in UTS 35 Unicode Locale Identifier, section 3.2 - for any substring of a language tag that is not part of a private use subtag sequence, starts with a separator <emu-val>"-"</emu-val> and the singleton <emu-val>"u"</emu-val>, and includes the maximum sequence of following non-singleton subtags and their preceding <emu-val>"-"</emu-val> separators.
      </p>
    </emu-clause>

    <emu-clause id="sec-isstructurallyvalidlanguagetag" aoid="IsStructurallyValidLanguageTag">
      <h1><span class="secnum">6.2.2</span> IsStructurallyValidLanguageTag ( <var>locale</var> )</h1>

      <p>
        The IsStructurallyValidLanguageTag abstract operation determines whether the <var>locale</var> argument (which must be a String value) is a language tag recognized by this specification. (It does not consider whether the language tag conveys any meaningful semantics, differentiate between aliased subtags and their preferred replacement subtags, or require canonical casing or subtag ordering.)
      </p>

      <p>
        IsStructurallyValidLanguageTag returns <emu-val>true</emu-val> if all of the following conditions hold, <emu-val>false</emu-val> otherwise:
      </p>

      <ul>
        <li><var>locale</var> can be generated from the EBNF grammar for <code>unicode_locale_id</code> in <a href="https://unicode.org/reports/tr35/#Unicode_locale_identifier">Unicode Technical Standard #35 LDML § 3.2 Unicode Locale Identifier</a>;</li>
        <li><var>locale</var> does not use any of the backwards compatibility syntax described in <a href="https://unicode.org/reports/tr35/#BCP_47_Conformance">Unicode Technical Standard #35 LDML § 3.3 BCP 47 Conformance</a>;</li>
        <li>the <code>unicode_language_id</code> within <var>locale</var> contains no duplicate <code>unicode_variant_subtag</code> subtags; and</li>
        <li>if <var>locale</var> contains an <code>extensions*</code> component, that component
          <ul>
            <li>does not contain any <code>other_extensions</code> components with duplicate <code>[alphanum-[tTuUxX]]</code> subtags,</li>
            <li>contains at most one <code>unicode_locale_extensions</code> component,</li>
            <li>contains at most one <code>transformed_extensions</code> component, and</li>
            <li>if a <code>transformed_extensions</code> component that contains a <code>tlang</code> component is present, then
              <ul>
                <li>the <code>tlang</code> component contains no duplicate <code>unicode_variant_subtag</code> subtags.</li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>

      <p>
        When evaluating each condition, terminal value characters in the grammar are interpreted as the corresponding ASCII code points. Subtags are duplicates if they are ASCII case-insensitively equivalent.
      </p>

      <emu-note><span class="note">Note</span><div class="note-contents">
        Every string for which this function returns <emu-val>true</emu-val> is both a "Unicode BCP 47 locale identifier", consistent with <a href="https://unicode.org/reports/tr35/#Unicode_locale_identifier">Unicode Technical Standard #35 LDML § 3.2 Unicode Locale Identifier</a> and <a href="https://unicode.org/reports/tr35/#BCP_47_Conformance">Unicode Technical Standard #35 LDML § 3.3 BCP 47 Conformance</a>, and a valid <a href="https://www.rfc-editor.org/rfc/bcp/bcp47.txt">BCP 47</a> language tag.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-canonicalizeunicodelocaleid" aoid="CanonicalizeUnicodeLocaleId">
      <h1><span class="secnum">6.2.3</span> CanonicalizeUnicodeLocaleId ( <var>locale</var> )</h1>

      <p>
        The CanonicalizeUnicodeLocaleId abstract operation returns the canonical and case-regularized form of the <var>locale</var> argument (which must be a String value for which <emu-xref aoid="IsStructurallyValidLanguageTag" id="_ref_193"><a href="#sec-isstructurallyvalidlanguagetag">IsStructurallyValidLanguageTag</a></emu-xref>(<var>locale</var>) equals <emu-val>true</emu-val>).
        The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>localeId</var> be the string <var>locale</var> after performing the algorithm to transform it to canonical syntax per <a href="https://unicode.org/reports/tr35/#Canonical_Unicode_Locale_Identifiers">Unicode Technical Standard #35 LDML § 3.2.1 Canonical Unicode Locale Identifiers</a>.
          (The result is a Unicode BCP 47 locale identifier, in canonical syntax but not necessarily in canonical form.)</li><li>Let <var>localeId</var> be the string <var>localeId</var> after performing the algorithm to <a href="https://unicode.org/reports/tr35/#Canonical_Unicode_Locale_Identifiers">transform it to canonical form</a>.
          (The result is a Unicode BCP 47 locale identifier, in both canonical syntax and canonical form.)</li><li>If <var>localeId</var> contains a substring <var>extension</var> that is a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_194"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>, then<ol><li>Let <var>components</var> be !&nbsp;<emu-xref aoid="UnicodeExtensionComponents" id="_ref_195"><a href="#sec-unicode-extension-components">UnicodeExtensionComponents</a></emu-xref>(<var>extension</var>).</li><li>Let <var>attributes</var> be <var>components</var>.[[Attributes]].</li><li>Let <var>keywords</var> be <var>components</var>.[[Keywords]].</li><li>Let <var>newExtension</var> be <emu-val>"u"</emu-val>.</li><li>For each element <var>attr</var> of <var>attributes</var>, do<ol><li>Append <emu-val>"-"</emu-val> to <var>newExtension</var>.</li><li>Append <var>attr</var> to <var>newExtension</var>.</li></ol></li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>keyword</var> in <var>keywords</var>, do<ol><li>Append <emu-val>"-"</emu-val> to <var>newExtension</var>.</li><li>Append <var>keyword</var>.[[Key]] to <var>newExtension</var>.</li><li>If <var>keyword</var>.[[Value]] is not the empty String, then<ol><li>Append <emu-val>"-"</emu-val> to <var>newExtension</var>.</li><li>Append <var>keyword</var>.[[Value]] to <var>newExtension</var>.</li></ol></li></ol></li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>newExtension</var> is not equal to <emu-val>"u"</emu-val>.</li><li>Let <var>localeId</var> be <var>localeId</var> with the substring corresponding to <var>extension</var> replaced by the string <var>newExtension</var>.</li></ol></li><li>Return <var>localeId</var>.</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        The third step of this algorithm ensures that a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_196"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref> in the returned language tag contains:
        <ul>
          <li>only the first instance of any attribute duplicated in the input, and</li>
          <li>only the first <emu-xref href="#sec-keywords-and-reserved-words"><a href="https://tc39.es/ecma262/#sec-keywords-and-reserved-words">keyword</a></emu-xref> for a given key in the input.</li>
        </ul>
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-defaultlocale" aoid="DefaultLocale">
      <h1><span class="secnum">6.2.4</span> DefaultLocale ( )</h1>

      <p>
        The DefaultLocale abstract operation returns a String value representing the structurally valid (<emu-xref href="#sec-isstructurallyvalidlanguagetag" id="_ref_14"><a href="#sec-isstructurallyvalidlanguagetag">6.2.2</a></emu-xref>) and canonicalized (<emu-xref href="#sec-canonicalizeunicodelocaleid" id="_ref_15"><a href="#sec-canonicalizeunicodelocaleid">6.2.3</a></emu-xref>) Unicode BCP 47 locale identifier for the host environment's current locale.
      </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-currency-codes">
    <h1><span class="secnum">6.3</span> Currency Codes</h1>

    <p>
      The ECMAScript 2022 Internationalization API Specification identifies currencies using 3-letter currency codes as defined by ISO 4217. Their canonical form is upper case.
    </p>

    <p>
      All well-formed 3-letter ISO 4217 currency codes are allowed. However, the set of combinations of currency code and language tag for which localized currency symbols are available is implementation dependent. Where a localized currency symbol is not available, the ISO 4217 currency code is used for formatting.
    </p>

    <emu-clause id="sec-iswellformedcurrencycode" aoid="IsWellFormedCurrencyCode">
      <h1><span class="secnum">6.3.1</span> IsWellFormedCurrencyCode ( <var>currency</var> )</h1>

      <p>
        The IsWellFormedCurrencyCode abstract operation verifies that the <var>currency</var> argument (which must be a String value) represents a well-formed 3-letter ISO currency code. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>normalized</var> be the result of mapping <var>currency</var> to upper case as described in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_16"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>.</li><li>If the number of elements in <var>normalized</var> is not 3, return <emu-val>false</emu-val>.</li><li>If <var>normalized</var> contains any character that is not in the range <emu-val>"A"</emu-val> to <emu-val>"Z"</emu-val> (U+0041 to U+005A), return <emu-val>false</emu-val>.</li><li>Return <emu-val>true</emu-val>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-time-zone-names">
    <h1><span class="secnum">6.4</span> Time Zone Names</h1>

    <p>
      The ECMAScript 2022 Internationalization API Specification identifies time zones using the Zone and Link names of the IANA Time Zone Database. Their canonical form is the corresponding Zone name in the casing used in the IANA Time Zone Database except as specifically overridden by <emu-xref aoid="CanonicalizeTimeZoneName" id="_ref_197"><a href="#sec-canonicalizetimezonename">CanonicalizeTimeZoneName</a></emu-xref>.
    </p>

    <p>
      A conforming implementation must recognize <emu-val>"UTC"</emu-val> and all other Zone and Link names (and <strong>only</strong> such names), and use best available current and historical information about their offsets from UTC and their daylight saving time rules in calculations. However, the set of combinations of time zone name and language tag for which localized time zone names are available is implementation dependent.
    </p>

    <emu-clause id="sec-isvalidtimezonename" aoid="IsValidTimeZoneName">
      <h1><span class="secnum">6.4.1</span> IsValidTimeZoneName ( <var>timeZone</var> )</h1>

      <p>
        The abstract operation IsValidTimeZoneName takes argument <var>timeZone</var>, a String value, and verifies that it represents a valid Zone or Link name of the IANA Time Zone Database.
      </p>

      <emu-alg><ol><li>If one of the Zone or Link names of the IANA Time Zone Database is an ASCII-case-insensitive match of <var>timeZone</var> as described in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_17"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>, return <emu-val>true</emu-val>.</li><li>If <var>timeZone</var> is an ASCII-case-insensitive match of <emu-val>"UTC"</emu-val>, return <emu-val>true</emu-val>.</li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
    </emu-clause>

    <emu-note><span class="note">Note</span><div class="note-contents">
      Any value returned from <emu-xref aoid="DefaultTimeZone" id="_ref_198"><a href="#sec-defaulttimezone">DefaultTimeZone</a></emu-xref> must be recognized as valid.
    </div></emu-note>

    <emu-clause id="sec-canonicalizetimezonename" aoid="CanonicalizeTimeZoneName">
      <h1><span class="secnum">6.4.2</span> CanonicalizeTimeZoneName ( <var>timeZone</var> )</h1>
      <p>The abstract operation CanonicalizeTimeZoneName takes argument <var>timeZone</var> (a String value that is a valid time zone name as verified by <emu-xref aoid="IsValidTimeZoneName" id="_ref_199"><a href="#sec-isvalidtimezonename">IsValidTimeZoneName</a></emu-xref>). It returns the canonical and case-regularized form of <var>timeZone</var>. It performs the following steps when called:</p>
      <emu-alg><ol><li>Let <var>ianaTimeZone</var> be the String value of the Zone or Link name of the IANA Time Zone Database that is an ASCII-case-insensitive match of <var>timeZone</var> as described in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_18"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>.</li><li>If <var>ianaTimeZone</var> is a Link name, let <var>ianaTimeZone</var> be the String value of the corresponding Zone name as specified in the file <code>backward</code> of the IANA Time Zone Database.</li><li>If <var>ianaTimeZone</var> is <emu-val>"Etc/UTC"</emu-val> or <emu-val>"Etc/GMT"</emu-val>, return <emu-val>"UTC"</emu-val>.</li><li>Return <var>ianaTimeZone</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-defaulttimezone" aoid="DefaultTimeZone">
      <h1><span class="secnum">6.4.3</span> DefaultTimeZone ( )</h1>

      <p>
        The DefaultTimeZone abstract operation returns a String value representing the valid (<emu-xref href="#sec-isvalidtimezonename" id="_ref_19"><a href="#sec-isvalidtimezonename">6.4.1</a></emu-xref>) and canonicalized (<emu-xref href="#sec-canonicalizetimezonename" id="_ref_20"><a href="#sec-canonicalizetimezonename">6.4.2</a></emu-xref>) time zone name for the host environment's current time zone.
      </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-measurement-unit-identifiers">
    <h1><span class="secnum">6.5</span> Measurement Unit Identifiers</h1>

    <p>
      The ECMAScript 2022 Internationalization API Specification identifies measurement units using a <em>core unit identifier</em> as defined by <a href="https://unicode.org/reports/tr35/tr35-general.html#Unit_Elements">Unicode Technical Standard #35, Part 2, Section 6</a>. Their canonical form is a string containing all lowercase letters with zero or more hyphens.
    </p>

    <p>
      Only a limited set of core unit identifiers are allowed.
      An illegal core unit identifier results in a RangeError.
    </p>

    <emu-clause id="sec-iswellformedunitidentifier" aoid="IsWellFormedUnitIdentifier">
      <h1><span class="secnum">6.5.1</span> IsWellFormedUnitIdentifier ( <var>unitIdentifier</var> )</h1>

      <p>
        The IsWellFormedUnitIdentifier abstract operation verifies that the <var>unitIdentifier</var> argument (which must be a String value) represents a well-formed core unit identifier as defined in <a href="https://unicode.org/reports/tr35/tr35-general.html#Unit_Elements">UTS #35, Part 2, Section 6</a>. In addition to obeying the UTS #35 core unit identifier syntax, <var>unitIdentifier</var> must be one of the identifiers sanctioned by UTS #35 or be a compound unit composed of two sanctioned simple units. The following steps are taken:
      </p>

      <emu-alg><ol><li>If the result of <emu-xref aoid="IsSanctionedSimpleUnitIdentifier" id="_ref_200"><a href="#sec-issanctionedsimpleunitidentifier">IsSanctionedSimpleUnitIdentifier</a></emu-xref>(<var>unitIdentifier</var>) is <emu-val>true</emu-val>, then<ol><li>Return <emu-val>true</emu-val>.</li></ol></li><li>If the substring <emu-val>"-per-"</emu-val> does not occur exactly once in <var>unitIdentifier</var>, then<ol><li>Return <emu-val>false</emu-val>.</li></ol></li><li>Let <var>numerator</var> be the substring of <var>unitIdentifier</var> from the beginning to just before <emu-val>"-per-"</emu-val>.</li><li>If the result of <emu-xref aoid="IsSanctionedSimpleUnitIdentifier" id="_ref_201"><a href="#sec-issanctionedsimpleunitidentifier">IsSanctionedSimpleUnitIdentifier</a></emu-xref>(<var>numerator</var>) is <emu-val>false</emu-val>, then<ol><li>Return <emu-val>false</emu-val>.</li></ol></li><li>Let <var>denominator</var> be the substring of <var>unitIdentifier</var> from just after <emu-val>"-per-"</emu-val> to the end.</li><li>If the result of <emu-xref aoid="IsSanctionedSimpleUnitIdentifier" id="_ref_202"><a href="#sec-issanctionedsimpleunitidentifier">IsSanctionedSimpleUnitIdentifier</a></emu-xref>(<var>denominator</var>) is <emu-val>false</emu-val>, then<ol><li>Return <emu-val>false</emu-val>.</li></ol></li><li>Return <emu-val>true</emu-val>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-issanctionedsimpleunitidentifier" aoid="IsSanctionedSimpleUnitIdentifier">
      <h1><span class="secnum">6.5.2</span> IsSanctionedSimpleUnitIdentifier ( <var>unitIdentifier</var> )</h1>

      <p>
        The IsSanctionedSimpleUnitIdentifier abstract operation verifies that the given core unit identifier is among the simple units sanctioned in the current version of the ECMAScript Internationalization API Specification, a subset of the Validity Data as described in <a href="https://unicode.org/reports/tr35/tr35.html#Validity_Data">UTS #35, Part 1, Section 3.11</a>; the list may grow over time. As discussed in UTS #35, a simple unit is one that does not have a numerator and denominator. The following steps are taken:
      </p>

      <emu-alg><ol><li>If <var>unitIdentifier</var> is listed in <emu-xref href="#table-sanctioned-simple-unit-identifiers" id="_ref_21"><a href="#table-sanctioned-simple-unit-identifiers">Table 2</a></emu-xref> below, return <emu-val>true</emu-val>.</li><li>Else, return <emu-val>false</emu-val>.</li></ol></emu-alg>

      <emu-table id="table-sanctioned-simple-unit-identifiers"><figure><figcaption>Table 2: Simple units sanctioned for use in ECMAScript</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Simple Unit</th>
            </tr>
          </thead>
          <tbody><tr><td>acre</td></tr>
          <tr><td>bit</td></tr>
          <tr><td>byte</td></tr>
          <tr><td>celsius</td></tr>
          <tr><td>centimeter</td></tr>
          <tr><td>day</td></tr>
          <tr><td>degree</td></tr>
          <tr><td>fahrenheit</td></tr>
          <tr><td>fluid-ounce</td></tr>
          <tr><td>foot</td></tr>
          <tr><td>gallon</td></tr>
          <tr><td>gigabit</td></tr>
          <tr><td>gigabyte</td></tr>
          <tr><td>gram</td></tr>
          <tr><td>hectare</td></tr>
          <tr><td>hour</td></tr>
          <tr><td>inch</td></tr>
          <tr><td>kilobit</td></tr>
          <tr><td>kilobyte</td></tr>
          <tr><td>kilogram</td></tr>
          <tr><td>kilometer</td></tr>
          <tr><td>liter</td></tr>
          <tr><td>megabit</td></tr>
          <tr><td>megabyte</td></tr>
          <tr><td>meter</td></tr>
          <tr><td>mile</td></tr>
          <tr><td>mile-scandinavian</td></tr>
          <tr><td>milliliter</td></tr>
          <tr><td>millimeter</td></tr>
          <tr><td>millisecond</td></tr>
          <tr><td>minute</td></tr>
          <tr><td>month</td></tr>
          <tr><td>ounce</td></tr>
          <tr><td>percent</td></tr>
          <tr><td>petabyte</td></tr>
          <tr><td>pound</td></tr>
          <tr><td>second</td></tr>
          <tr><td>stone</td></tr>
          <tr><td>terabit</td></tr>
          <tr><td>terabyte</td></tr>
          <tr><td>week</td></tr>
          <tr><td>yard</td></tr>
          <tr><td>year</td></tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./requirements.html"><emu-clause id="requirements">
  <h1><span class="secnum">7</span> Requirements for Standard Built-in ECMAScript Objects</h1>

  <p>
    Unless specified otherwise in this document, the objects, functions, and constructors described in this standard are subject to the generic requirements and restrictions specified for standard built-in ECMAScript objects in the ECMAScript 2022 Language Specification (ECMA-262 13<sup>th</sup> Edition, or successor), clause <emu-xref href="#sec-ecmascript-standard-built-in-objects"><a href="https://tc39.es/ecma262/#sec-ecmascript-standard-built-in-objects">17</a></emu-xref>.
  </p>
</emu-clause></emu-import>
<emu-import href="./intl.html"><emu-clause id="intl-object">
  <h1><span class="secnum">8</span> The Intl Object</h1>
  <p>
    The Intl object is the <dfn>%Intl%</dfn> intrinsic object and the initial value of the <emu-val>"Intl"</emu-val> property of the <emu-xref href="#sec-global-object"><a href="https://tc39.es/ecma262/#sec-global-object">global object</a></emu-xref>. The Intl object is a single ordinary object.
  </p>

  <p>
    The value of the [[Prototype]] internal slot of the Intl object is the intrinsic object <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>.
  </p>

  <p>
    The Intl object is not a <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref>. It does not have a [[Construct]] internal method; it is not possible to use the Intl object as a <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> with the <code>new</code> operator. The Intl object does not have a [[Call]] internal method; it is not possible to invoke the Intl object as a function.
  </p>

  <p>
    The Intl object has an internal slot, [[FallbackSymbol]], which is a new <emu-xref href="#sec-symbol-constructor"><a href="https://tc39.es/ecma262/#sec-symbol-constructor">%Symbol%</a></emu-xref> in the current <emu-xref href="#realm"><a href="https://tc39.es/ecma262/#realm">realm</a></emu-xref> with the [[Description]] <emu-val>"IntlLegacyConstructedSymbol"</emu-val>.
  </p>

  <emu-clause id="sec-value-properties-of-the-intl-object">
    <h1><span class="secnum">8.1</span> Value Properties of the Intl Object</h1>

    <emu-clause id="sec-Intl-toStringTag">
      <h1><span class="secnum">8.1.1</span> Intl[ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl"</emu-val>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-constructor-properties-of-the-intl-object">
    <h1><span class="secnum">8.2</span> Constructor Properties of the Intl Object</h1>

    <p>
      With the exception of Intl.Locale, each of the following constructors is a <dfn id="service-constructor">service constructor</dfn> that creates objects providing locale-sensitive services.
    </p>

    <emu-clause id="sec-intl.collator-intro">
      <h1><span class="secnum">8.2.1</span> Intl.Collator ( . . . )</h1>
      <p>
        See <emu-xref href="#collator-objects" id="_ref_22"><a href="#collator-objects">10</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat-intro">
      <h1><span class="secnum">8.2.2</span> Intl.DateTimeFormat ( . . . )</h1>
      <p>
        See <emu-xref href="#datetimeformat-objects" id="_ref_23"><a href="#datetimeformat-objects">11</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.displaynames-intro">
      <h1><span class="secnum">8.2.3</span> Intl.DisplayNames ( . . . )</h1>
      <p>
        See <emu-xref href="#intl-displaynames-objects" id="_ref_24"><a href="#intl-displaynames-objects">12</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.listformat-intro">
      <h1><span class="secnum">8.2.4</span> Intl.ListFormat ( . . . )</h1>
      <p>
        See <emu-xref href="#listformat-objects" id="_ref_25"><a href="#listformat-objects">13</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.locale-intro">
      <h1><span class="secnum">8.2.5</span> Intl.Locale ( . . . )</h1>
      <p>
        See <emu-xref href="#locale-objects" id="_ref_26"><a href="#locale-objects">14</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat-intro">
      <h1><span class="secnum">8.2.6</span> Intl.NumberFormat ( . . . )</h1>
      <p>
        See <emu-xref href="#numberformat-objects" id="_ref_27"><a href="#numberformat-objects">15</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules-intro">
      <h1><span class="secnum">8.2.7</span> Intl.PluralRules ( . . . )</h1>
      <p>
        See <emu-xref href="#pluralrules-objects" id="_ref_28"><a href="#pluralrules-objects">16</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.relativetimeformat-intro">
      <h1><span class="secnum">8.2.8</span> Intl.RelativeTimeFormat ( . . . )</h1>
      <p>
        See <emu-xref href="#relativetimeformat-objects" id="_ref_29"><a href="#relativetimeformat-objects">17</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter-intro">
      <h1><span class="secnum">8.2.9</span> Intl.Segmenter ( . . . )</h1>
      <p>
        See <emu-xref href="#segmenter-objects" id="_ref_30"><a href="#segmenter-objects">18</a></emu-xref>.
      </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-function-properties-of-the-intl-object">
    <h1><span class="secnum">8.3</span> Function Properties of the Intl Object</h1>

    <emu-clause id="sec-intl.getcanonicallocales">
      <h1><span class="secnum">8.3.1</span> Intl.getCanonicalLocales ( <var>locales</var> )</h1>

      <p>
        When the <code>getCanonicalLocales</code> method is called with argument <var>locales</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>ll</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_203"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return <emu-xref aoid="CreateArrayFromList" id="_ref_204"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>ll</var>).</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./negotiation.html"><emu-clause id="locale-and-parameter-negotiation">
  <h1><span class="secnum">9</span> Locale and Parameter Negotiation</h1>

  <p>
    <emu-xref href="#service-constructor" id="_ref_31"><a href="#service-constructor">Service constructors</a></emu-xref> use a common pattern to negotiate the requests represented by their <var>locales</var> and <var>options</var> arguments against the actual capabilities of their implementations. That common behaviour is explained here in terms of internal slots describing the capabilities and <emu-xref href="#sec-algorithm-conventions-abstract-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-abstract-operations">abstract operations</a></emu-xref> using these internal slots.
  </p>

  <emu-clause id="sec-internal-slots">
    <h1><span class="secnum">9.1</span> Internal slots of Service Constructors</h1>

    <p>
      Each <emu-xref href="#service-constructor" id="_ref_205"><a href="#service-constructor">service constructor</a></emu-xref> has the following internal slots:
    </p>

    <ul>
      <li>[[AvailableLocales]] is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> that contains structurally valid (<emu-xref href="#sec-isstructurallyvalidlanguagetag" id="_ref_32"><a href="#sec-isstructurallyvalidlanguagetag">6.2.2</a></emu-xref>) and canonicalized (<emu-xref href="#sec-canonicalizeunicodelocaleid" id="_ref_33"><a href="#sec-canonicalizeunicodelocaleid">6.2.3</a></emu-xref>) Unicode BCP 47 locale identifiers identifying the locales for which the implementation provides the functionality of the constructed objects. Language tags on the list must not have a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_206"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>. The list must include the value returned by the <emu-xref aoid="DefaultLocale" id="_ref_207"><a href="#sec-defaultlocale">DefaultLocale</a></emu-xref> abstract operation (<emu-xref href="#sec-defaultlocale" id="_ref_34"><a href="#sec-defaultlocale">6.2.4</a></emu-xref>), and must not include duplicates. Implementations must include in [[AvailableLocales]] locales that can serve as fallbacks in the algorithm used to resolve locales (see <emu-xref href="#sec-resolvelocale" id="_ref_35"><a href="#sec-resolvelocale">9.2.7</a></emu-xref>). For example, implementations that provide a <emu-val>"de-DE"</emu-val> locale must include a <emu-val>"de"</emu-val> locale that can serve as a fallback for requests such as <emu-val>"de-AT"</emu-val> and <emu-val>"de-CH"</emu-val>. For locales that include a script subtag in addition to language and region, the corresponding locale without a script subtag must also be supported; that is, if an implementation recognizes <emu-val>"zh-Hant-TW"</emu-val>, it is also expected to recognize <emu-val>"zh-TW"</emu-val>. The ordering of the locales within [[AvailableLocales]] is irrelevant.</li>
      <li>[[RelevantExtensionKeys]] is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of keys of the language tag extensions defined in Unicode Technical Standard 35 that are relevant for the functionality of the constructed objects.</li>
      <li>[[SortLocaleData]] and [[SearchLocaleData]] (for Intl.Collator) and [[LocaleData]] (for every other <emu-xref href="#service-constructor" id="_ref_208"><a href="#service-constructor">service constructor</a></emu-xref>) are records that have fields for each locale contained in [[AvailableLocales]]. The value of each of these fields must be a record that has fields for each key contained in [[RelevantExtensionKeys]]. The value of each of these fields must be a non-empty list of those values defined in Unicode Technical Standard 35 for the given key that are supported by the implementation for the given locale, with the first element providing the default value.</li>
    </ul>

    <emu-note><span class="note">Note</span><div class="note-contents">
      For example, an implementation of DateTimeFormat might include the language tag <emu-val>"th"</emu-val> in its [[AvailableLocales]] internal slot, and must (according to <emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_36"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>) include the key <emu-val>"ca"</emu-val> in its [[RelevantExtensionKeys]] internal slot.
      For Thai, the <emu-val>"buddhist"</emu-val> calendar is usually the default, but an implementation might also support the calendars <emu-val>"gregory"</emu-val>, <emu-val>"chinese"</emu-val>, and <emu-val>"islamicc"</emu-val> for the locale <emu-val>"th"</emu-val>.
      The [[LocaleData]] internal slot would therefore at least include {[[th]]: {[[ca]]: « <emu-val>"buddhist"</emu-val>, <emu-val>"gregory"</emu-val>, <emu-val>"chinese"</emu-val>, <emu-val>"islamicc"</emu-val> »}}.
    </div></emu-note>
  </emu-clause>

  <emu-clause id="sec-abstract-operations">
    <h1><span class="secnum">9.2</span> Abstract Operations</h1>

    <p>
      Where the following <emu-xref href="#sec-algorithm-conventions-abstract-operations"><a href="https://tc39.es/ecma262/#sec-algorithm-conventions-abstract-operations">abstract operations</a></emu-xref> take an <var>availableLocales</var> argument, it must be an [[AvailableLocales]] <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> as specified in <emu-xref href="#sec-internal-slots" id="_ref_37"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-canonicalizelocalelist" aoid="CanonicalizeLocaleList">
      <h1><span class="secnum">9.2.1</span> CanonicalizeLocaleList ( <var>locales</var> )</h1>

      <p>
        The abstract operation CanonicalizeLocaleList takes the following steps:
      </p>

      <emu-alg><ol><li>If <var>locales</var> is <emu-val>undefined</emu-val>, then<ol><li>Return a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li></ol></li><li>Let <var>seen</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <emu-xref aoid="Type" id="_ref_209"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>locales</var>) is String or <emu-xref aoid="Type" id="_ref_210"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>locales</var>) is Object and <var>locales</var> has an [[InitializedLocale]] internal slot, then<ol><li>Let <var>O</var> be <emu-xref aoid="CreateArrayFromList" id="_ref_211"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(« <var>locales</var> »).</li></ol></li><li>Else,<ol><li>Let <var>O</var> be ?&nbsp;<emu-xref aoid="ToObject" id="_ref_212"><a href="https://tc39.es/ecma262/#sec-toobject">ToObject</a></emu-xref>(<var>locales</var>).</li></ol></li><li>Let <var>len</var> be ?&nbsp;<emu-xref aoid="ToLength" id="_ref_213"><a href="https://tc39.es/ecma262/#sec-tolength">ToLength</a></emu-xref>(? <emu-xref aoid="Get" id="_ref_214"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>O</var>, <emu-val>"length"</emu-val>)).</li><li>Let <var>k</var> be 0.</li><li>Repeat, while <var>k</var> &lt; <var>len</var>,<ol><li>Let <var>Pk</var> be <emu-xref aoid="ToString" id="_ref_215"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>k</var>).</li><li>Let <var>kPresent</var> be ?&nbsp;<emu-xref aoid="HasProperty" id="_ref_216"><a href="https://tc39.es/ecma262/#sec-hasproperty">HasProperty</a></emu-xref>(<var>O</var>, <var>Pk</var>).</li><li>If <var>kPresent</var> is <emu-val>true</emu-val>, then<ol><li>Let <var>kValue</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_217"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>O</var>, <var>Pk</var>).</li><li>If <emu-xref aoid="Type" id="_ref_218"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>kValue</var>) is not String or Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid="Type" id="_ref_219"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>kValue</var>) is Object and <var>kValue</var> has an [[InitializedLocale]] internal slot, then<ol><li>Let <var>tag</var> be <var>kValue</var>.[[Locale]].</li></ol></li><li>Else,<ol><li>Let <var>tag</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_220"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>kValue</var>).</li></ol></li><li>If <emu-xref aoid="IsStructurallyValidLanguageTag" id="_ref_221"><a href="#sec-isstructurallyvalidlanguagetag">IsStructurallyValidLanguageTag</a></emu-xref>(<var>tag</var>) is <emu-val>false</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>canonicalizedTag</var> be <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_222"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>tag</var>).</li><li>If <var>canonicalizedTag</var> is not an element of <var>seen</var>, append <var>canonicalizedTag</var> as the last element of <var>seen</var>.</li></ol></li><li>Increase <var>k</var> by 1.</li></ol></li><li>Return <var>seen</var>.</li></ol></emu-alg>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        Non-normative summary: The abstract operation interprets the <var>locales</var> argument as an array and copies its elements into a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>, validating the elements as structurally valid language tags and canonicalizing them, and omitting duplicates.
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        Requiring <var>kValue</var> to be a String or Object means that the <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref> <emu-val>NaN</emu-val> will not be interpreted as the language tag <emu-val>"nan"</emu-val>, which stands for Min Nan Chinese.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-bestavailablelocale" aoid="BestAvailableLocale">
      <h1><span class="secnum">9.2.2</span> BestAvailableLocale ( <var>availableLocales</var>, <var>locale</var> )</h1>

      <p>
        The BestAvailableLocale abstract operation compares the provided argument <var>locale</var>, which must be a String value with a structurally valid and canonicalized Unicode BCP 47 locale identifier, against the locales in <var>availableLocales</var> and returns either the longest non-empty prefix of <var>locale</var> that is an element of <var>availableLocales</var>, or <emu-val>undefined</emu-val> if there is no such element. It uses the fallback mechanism of RFC 4647, section 3.4. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>candidate</var> be <var>locale</var>.</li><li>Repeat,<ol><li>If <var>availableLocales</var> contains an element equal to <var>candidate</var>, return <var>candidate</var>.</li><li>Let <var>pos</var> be the character index of the last occurrence of <emu-val>"-"</emu-val> (U+002D) within <var>candidate</var>. If that character does not occur, return <emu-val>undefined</emu-val>.</li><li>If <var>pos</var> ≥ 2 and the character <emu-val>"-"</emu-val> occurs at index <var>pos</var>-2 of candidate, decrease <var>pos</var> by 2.</li><li>Let <var>candidate</var> be the substring of <var>candidate</var> from position 0, inclusive, to position <var>pos</var>, exclusive.</li></ol></li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-lookupmatcher" aoid="LookupMatcher">
      <h1><span class="secnum">9.2.3</span> LookupMatcher ( <var>availableLocales</var>, <var>requestedLocales</var> )</h1>

      <p>
        The LookupMatcher abstract operation compares <var>requestedLocales</var>, which must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> as returned by <emu-xref aoid="CanonicalizeLocaleList" id="_ref_223"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>, against the locales in <var>availableLocales</var> and determines the best available language to meet the request. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>result</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>For each element <var>locale</var> of <var>requestedLocales</var>, do<ol><li>Let <var>noExtensionsLocale</var> be the String value that is <var>locale</var> with any Unicode locale extension sequences removed.</li><li>Let <var>availableLocale</var> be <emu-xref aoid="BestAvailableLocale" id="_ref_224"><a href="#sec-bestavailablelocale">BestAvailableLocale</a></emu-xref>(<var>availableLocales</var>, <var>noExtensionsLocale</var>).</li><li>If <var>availableLocale</var> is not <emu-val>undefined</emu-val>, then<ol><li>Set <var>result</var>.[[locale]] to <var>availableLocale</var>.</li><li>If <var>locale</var> and <var>noExtensionsLocale</var> are not the same String value, then<ol><li>Let <var>extension</var> be the String value consisting of the substring of the <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_225"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref> within <var>locale</var>.</li><li>Set <var>result</var>.[[extension]] to <var>extension</var>.</li></ol></li><li>Return <var>result</var>.</li></ol></li></ol></li><li>Let <var>defLocale</var> be <emu-xref aoid="DefaultLocale" id="_ref_226"><a href="#sec-defaultlocale">DefaultLocale</a></emu-xref>().</li><li>Set <var>result</var>.[[locale]] to <var>defLocale</var>.</li><li>Return <var>result</var>.</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        The algorithm is based on the Lookup algorithm described in RFC 4647 section 3.4, but options specified through Unicode locale extension sequences are ignored in the lookup. Information about such subsequences is returned separately. The abstract operation returns a record with a [[locale]] field, whose value is the language tag of the selected locale, which must be an element of <var>availableLocales</var>. If the language tag of the request locale that led to the selected locale contained a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_227"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>, then the returned record also contains an [[extension]] field whose value is the substring of the <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_228"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref> within the request locale language tag.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-bestfitmatcher" aoid="BestFitMatcher">
      <h1><span class="secnum">9.2.4</span> BestFitMatcher ( <var>availableLocales</var>, <var>requestedLocales</var> )</h1>

      <p>
        The BestFitMatcher abstract operation compares <var>requestedLocales</var>, which must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> as returned by <emu-xref aoid="CanonicalizeLocaleList" id="_ref_229"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>, against the locales in <var>availableLocales</var> and determines the best available language to meet the request. The algorithm is implementation dependent, but should produce results that a typical user of the requested locales would perceive as at least as good as those produced by the <emu-xref aoid="LookupMatcher" id="_ref_230"><a href="#sec-lookupmatcher">LookupMatcher</a></emu-xref> abstract operation. Options specified through Unicode locale extension sequences must be ignored by the algorithm. Information about such subsequences is returned separately. The abstract operation returns a record with a [[locale]] field, whose value is the language tag of the selected locale, which must be an element of <var>availableLocales</var>. If the language tag of the request locale that led to the selected locale contained a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_231"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>, then the returned record also contains an [[extension]] field whose value is the substring of the <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_232"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref> within the request locale language tag.
      </p>
    </emu-clause>

    <emu-clause id="sec-unicode-extension-components" aoid="UnicodeExtensionComponents">
      <h1><span class="secnum">9.2.5</span> UnicodeExtensionComponents ( <var>extension</var> )</h1>
      <p>
        The UnicodeExtensionComponents abstract operation returns the attributes and keywords from <var>extension</var>, which must be a String value whose contents are a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_233"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>. If an attribute or a <emu-xref href="#sec-keywords-and-reserved-words"><a href="https://tc39.es/ecma262/#sec-keywords-and-reserved-words">keyword</a></emu-xref> occurs multiple times in <var>extension</var>, only the first occurence is returned. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>attributes</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>keywords</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>keyword</var> be <emu-val>undefined</emu-val>.</li><li>Let <var>size</var> be the length of <var>extension</var>.</li><li>Let <var>k</var> be 3.</li><li>Repeat, while <var>k</var> &lt; <var>size</var>,<ol><li>Let <var>e</var> be !&nbsp;<emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>extension</var>, <emu-val>"-"</emu-val>, <var>k</var>).</li><li>If <var>e</var> = -1, let <var>len</var> be <var>size</var> - <var>k</var>; else let <var>len</var> be <var>e</var> - <var>k</var>.</li><li>Let <var>subtag</var> be the String value equal to the substring of <var>extension</var> consisting of the code units at indices <var>k</var> (inclusive) through <var>k</var> + <var>len</var> (exclusive).</li><li>If <var>keyword</var> is <emu-val>undefined</emu-val> and <var>len</var> ≠ 2, then<ol><li>If <var>subtag</var> is not an element of <var>attributes</var>, then<ol><li>Append <var>subtag</var> to <var>attributes</var>.</li></ol></li></ol></li><li>Else if <var>len</var> = 2, then<ol><li>If <var>keyword</var> is not <emu-val>undefined</emu-val> and <var>keywords</var> does not contain an element whose [[Key]] is the same as <var>keyword</var>.[[Key]], then<ol><li>Append <var>keyword</var> to <var>keywords</var>.</li></ol></li><li>Set <var>keyword</var> to the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]]: <var>subtag</var>, [[Value]]: <emu-val>""</emu-val> }.</li></ol></li><li>Else,<ol><li>If <var>keyword</var>.[[Value]] is the empty String, then<ol><li>Set <var>keyword</var>.[[Value]] to <var>subtag</var>.</li></ol></li><li>Else,<ol><li>Set <var>keyword</var>.[[Value]] to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>keyword</var>.[[Value]], <emu-val>"-"</emu-val>, and <var>subtag</var>.</li></ol></li></ol></li><li>Let <var>k</var> be <var>k</var> + <var>len</var> + 1.</li></ol></li><li>If <var>keyword</var> is not <emu-val>undefined</emu-val> and <var>keywords</var> does not contain an element whose [[Key]] is the same as <var>keyword</var>.[[Key]], then<ol><li>Append <var>keyword</var> to <var>keywords</var>.</li></ol></li><li>Return the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Attributes]]: <var>attributes</var>, [[Keywords]]: <var>keywords</var> }.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-insert-unicode-extension-and-canonicalize" aoid="InsertUnicodeExtensionAndCanonicalize">
      <h1><span class="secnum">9.2.6</span> InsertUnicodeExtensionAndCanonicalize ( <var>locale</var>, <var>extension</var> )</h1>
      <p>
        The InsertUnicodeExtensionAndCanonicalize abstract operation inserts <var>extension</var>, which must be a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_234"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>, into <var>locale</var>, which must be a String value with a structurally valid and canonicalized Unicode BCP 47 locale identifier. The following steps are taken:
      </p>
      <p>
        The following algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>.
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>locale</var> does not contain a substring that is a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_235"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>extension</var> is a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_236"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>tag</var> matches the <code>unicode_locale_id</code> production.</li><li>Let <var>privateIndex</var> be !&nbsp;<emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>locale</var>, <emu-val>"-x-"</emu-val>, 0).</li><li>If <var>privateIndex</var> = -1, then<ol><li>Let <var>locale</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>locale</var> and <var>extension</var>.</li></ol></li><li>Else,<ol><li>Let <var>preExtension</var> be the substring of <var>locale</var> from position 0, inclusive, to position <var>privateIndex</var>, exclusive.</li><li>Let <var>postExtension</var> be the substring of <var>locale</var> from position <var>privateIndex</var> to the end of the string.</li><li>Let <var>locale</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>preExtension</var>, <var>extension</var>, and <var>postExtension</var>.</li></ol></li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="IsStructurallyValidLanguageTag" id="_ref_237"><a href="#sec-isstructurallyvalidlanguagetag">IsStructurallyValidLanguageTag</a></emu-xref>(<var>locale</var>) is <emu-val>true</emu-val>.</li><li>Return !&nbsp;<emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_238"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>locale</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-resolvelocale" aoid="ResolveLocale">
      <h1><span class="secnum">9.2.7</span> ResolveLocale ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>, <var>relevantExtensionKeys</var>, <var>localeData</var> )</h1>

      <p>
        The ResolveLocale abstract operation compares a BCP 47 language priority list <var>requestedLocales</var> against the locales in <var>availableLocales</var> and determines the best available language to meet the request. <var>availableLocales</var>, <var>requestedLocales</var>, and <var>relevantExtensionKeys</var> must be provided as <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> values, <var>options</var> and <var>localeData</var> as Records.
      </p>

      <p>
        The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>matcher</var> be <var>options</var>.[[localeMatcher]].</li><li>If <var>matcher</var> is <emu-val>"lookup"</emu-val>, then<ol><li>Let <var>r</var> be <emu-xref aoid="LookupMatcher" id="_ref_239"><a href="#sec-lookupmatcher">LookupMatcher</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>).</li></ol></li><li>Else,<ol><li>Let <var>r</var> be <emu-xref aoid="BestFitMatcher" id="_ref_240"><a href="#sec-bestfitmatcher">BestFitMatcher</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>).</li></ol></li><li>Let <var>foundLocale</var> be <var>r</var>.[[locale]].</li><li>Let <var>result</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Set <var>result</var>.[[dataLocale]] to <var>foundLocale</var>.</li><li>If <var>r</var> has an [[extension]] field, then<ol><li>Let <var>components</var> be !&nbsp;<emu-xref aoid="UnicodeExtensionComponents" id="_ref_241"><a href="#sec-unicode-extension-components">UnicodeExtensionComponents</a></emu-xref>(<var>r</var>.[[extension]]).</li><li>Let <var>keywords</var> be <var>components</var>.[[Keywords]].</li></ol></li><li>Let <var>supportedExtension</var> be <emu-val>"-u"</emu-val>.</li><li>For each element <var>key</var> of <var>relevantExtensionKeys</var>, do<ol><li>Let <var>foundLocaleData</var> be <var>localeData</var>.[[&lt;<var>foundLocale</var>&gt;]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_242"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>foundLocaleData</var>) is <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>keyLocaleData</var> be <var>foundLocaleData</var>.[[&lt;<var>key</var>&gt;]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_243"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>keyLocaleData</var>) is <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>value</var> be <var>keyLocaleData</var>[0].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_244"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>value</var>) is either String or Null.</li><li>Let <var>supportedExtensionAddition</var> be <emu-val>""</emu-val>.</li><li>If <var>r</var> has an [[extension]] field, then<ol><li>If <var>keywords</var> contains an element whose [[Key]] is the same as <var>key</var>, then<ol><li>Let <var>entry</var> be the element of <var>keywords</var> whose [[Key]] is the same as <var>key</var>.</li><li>Let <var>requestedValue</var> be <var>entry</var>.[[Value]].</li><li>If <var>requestedValue</var> is not the empty String, then<ol><li>If <var>keyLocaleData</var> contains <var>requestedValue</var>, then<ol><li>Let <var>value</var> be <var>requestedValue</var>.</li><li>Let <var>supportedExtensionAddition</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <emu-val>"-"</emu-val>, <var>key</var>, <emu-val>"-"</emu-val>, and <var>value</var>.</li></ol></li></ol></li><li>Else if <var>keyLocaleData</var> contains <emu-val>"true"</emu-val>, then<ol><li>Let <var>value</var> be <emu-val>"true"</emu-val>.</li><li>Let <var>supportedExtensionAddition</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <emu-val>"-"</emu-val> and <var>key</var>.</li></ol></li></ol></li></ol></li><li>If <var>options</var> has a field [[&lt;<var>key</var>&gt;]], then<ol><li>Let <var>optionsValue</var> be <var>options</var>.[[&lt;<var>key</var>&gt;]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_245"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>optionsValue</var>) is either String, Undefined, or Null.</li><li>If <emu-xref aoid="Type" id="_ref_246"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>optionsValue</var>) is String, then<ol><li>Let <var>optionsValue</var> be the string <var>optionsValue</var> after performing the algorithm steps to transform Unicode extension values to canonical syntax per <a href="https://unicode.org/reports/tr35/#Canonical_Unicode_Locale_Identifiers">Unicode Technical Standard #35 LDML § 3.2.1 Canonical Unicode Locale Identifiers</a>, treating <var>key</var> as <code>ukey</code> and <var>optionsValue</var> as <code>uvalue</code> productions.</li><li>Let <var>optionsValue</var> be the string <var>optionsValue</var> after performing the algorithm steps to replace Unicode extension values with their canonical form per <a href="https://unicode.org/reports/tr35/#Canonical_Unicode_Locale_Identifiers">Unicode Technical Standard #35 LDML § 3.2.1 Canonical Unicode Locale Identifiers</a>, treating <var>key</var> as <code>ukey</code> and <var>optionsValue</var> as <code>uvalue</code> productions.</li><li>If <var>optionsValue</var> is the empty String, then<ol><li>Let <var>optionsValue</var> be <emu-val>"true"</emu-val>.</li></ol></li></ol></li><li>If <var>keyLocaleData</var> contains <var>optionsValue</var>, then<ol><li>If <emu-xref aoid="SameValue" id="_ref_247"><a href="https://tc39.es/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>optionsValue</var>, <var>value</var>) is <emu-val>false</emu-val>, then<ol><li>Let <var>value</var> be <var>optionsValue</var>.</li><li>Let <var>supportedExtensionAddition</var> be <emu-val>""</emu-val>.</li></ol></li></ol></li></ol></li><li>Set <var>result</var>.[[&lt;<var>key</var>&gt;]] to <var>value</var>.</li><li>Append <var>supportedExtensionAddition</var> to <var>supportedExtension</var>.</li></ol></li><li>If the number of elements in <var>supportedExtension</var> is greater than 2, then<ol><li>Let <var>foundLocale</var> be <emu-xref aoid="InsertUnicodeExtensionAndCanonicalize" id="_ref_248"><a href="#sec-insert-unicode-extension-and-canonicalize">InsertUnicodeExtensionAndCanonicalize</a></emu-xref>(<var>foundLocale</var>, <var>supportedExtension</var>).</li></ol></li><li>Set <var>result</var>.[[locale]] to <var>foundLocale</var>.</li><li>Return <var>result</var>.</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        Non-normative summary: Two algorithms are available to match the locales: the Lookup algorithm described in RFC 4647 section 3.4, and an implementation dependent best-fit algorithm. Independent of the locale matching algorithm, options specified through Unicode locale extension sequences are negotiated separately, taking the caller's relevant extension keys and locale data as well as client-provided options into consideration. The abstract operation returns a record with a [[locale]] field whose value is the language tag of the selected locale, and fields for each key in <var>relevantExtensionKeys</var> providing the selected value for that key.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-lookupsupportedlocales" aoid="LookupSupportedLocales">
      <h1><span class="secnum">9.2.8</span> LookupSupportedLocales ( <var>availableLocales</var>, <var>requestedLocales</var> )</h1>

      <p>
        The LookupSupportedLocales abstract operation returns the subset of the provided BCP 47 language priority list <var>requestedLocales</var> for which <var>availableLocales</var> has a matching locale when using the BCP 47 Lookup algorithm. Locales appear in the same order in the returned list as in <var>requestedLocales</var>. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>subset</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>For each element <var>locale</var> of <var>requestedLocales</var>, do<ol><li>Let <var>noExtensionsLocale</var> be the String value that is <var>locale</var> with any Unicode locale extension sequences removed.</li><li>Let <var>availableLocale</var> be <emu-xref aoid="BestAvailableLocale" id="_ref_249"><a href="#sec-bestavailablelocale">BestAvailableLocale</a></emu-xref>(<var>availableLocales</var>, <var>noExtensionsLocale</var>).</li><li>If <var>availableLocale</var> is not <emu-val>undefined</emu-val>, append <var>locale</var> to the end of <var>subset</var>.</li></ol></li><li>Return <var>subset</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-bestfitsupportedlocales" aoid="BestFitSupportedLocales">
      <h1><span class="secnum">9.2.9</span> BestFitSupportedLocales ( <var>availableLocales</var>, <var>requestedLocales</var> )</h1>

      <p>
        The BestFitSupportedLocales abstract operation returns the subset of the provided BCP 47 language priority list <var>requestedLocales</var> for which <var>availableLocales</var> has a matching locale when using the Best Fit Matcher algorithm. Locales appear in the same order in the returned list as in <var>requestedLocales</var>. The steps taken are implementation dependent.
      </p>
    </emu-clause>

    <emu-clause id="sec-supportedlocales" aoid="SupportedLocales">
      <h1><span class="secnum">9.2.10</span> SupportedLocales ( <var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var> )</h1>

      <p>
        The SupportedLocales abstract operation returns the subset of the provided BCP 47 language priority list <var>requestedLocales</var> for which <var>availableLocales</var> has a matching locale. Two algorithms are available to match the locales: the Lookup algorithm described in RFC 4647 section 3.4, and an implementation dependent best-fit algorithm. Locales appear in the same order in the returned list as in <var>requestedLocales</var>. The following steps are taken:
      </p>

      <emu-alg><ol><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_250"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_251"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>If <var>matcher</var> is <emu-val>"best fit"</emu-val>, then<ol><li>Let <var>supportedLocales</var> be <emu-xref aoid="BestFitSupportedLocales" id="_ref_252"><a href="#sec-bestfitsupportedlocales">BestFitSupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>).</li></ol></li><li>Else,<ol><li>Let <var>supportedLocales</var> be <emu-xref aoid="LookupSupportedLocales" id="_ref_253"><a href="#sec-lookupsupportedlocales">LookupSupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>).</li></ol></li><li>Return <emu-xref aoid="CreateArrayFromList" id="_ref_254"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>supportedLocales</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getoptionsobject" aoid="GetOptionsObject">
      <h1><span class="secnum">9.2.11</span> GetOptionsObject ( <var>options</var> )</h1>
      <p>
        The abstract operation GetOptionsObject returns an Object suitable for use with <emu-xref aoid="GetOption" id="_ref_255"><a href="#sec-getoption">GetOption</a></emu-xref>, either <var>options</var> itself or a default empty Object.
        It throws a TypeError if <var>options</var> is not undefined and not an Object.
      </p>
      <emu-alg><ol><li>If <var>options</var> is <emu-val>undefined</emu-val>, then<ol><li>Return !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>).</li></ol></li><li>If <emu-xref aoid="Type" id="_ref_256"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>options</var>) is Object, then<ol><li>Return <var>options</var>.</li></ol></li><li>Throw a <emu-val>TypeError</emu-val> exception.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-coerceoptionstoobject" aoid="CoerceOptionsToObject">
      <h1><span class="secnum">9.2.12</span> CoerceOptionsToObject ( <var>options</var> )</h1>
      <p>
        The abstract operation CoerceOptionsToObject coerces <var>options</var> into an Object suitable for use with <emu-xref aoid="GetOption" id="_ref_257"><a href="#sec-getoption">GetOption</a></emu-xref>, defaulting to an empty Object.
        Because it coerces non-null primitive values into objects, its use is discouraged for new functionality in favour of <emu-xref aoid="GetOptionsObject" id="_ref_258"><a href="#sec-getoptionsobject">GetOptionsObject</a></emu-xref>.
      </p>
      <emu-alg><ol><li>If <var>options</var> is <emu-val>undefined</emu-val>, then<ol><li>Return !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>).</li></ol></li><li>Return ?&nbsp;<emu-xref aoid="ToObject" id="_ref_259"><a href="https://tc39.es/ecma262/#sec-toobject">ToObject</a></emu-xref>(<var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getoption" aoid="GetOption">
      <h1><span class="secnum">9.2.13</span> GetOption ( <var>options</var>, <var>property</var>, <var>type</var>, <var>values</var>, <var>fallback</var> )</h1>

      <p>
        The abstract operation GetOption extracts the value of the property named <var>property</var> from the provided <var>options</var> object, converts it to the required <var>type</var>, checks whether it is one of a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of allowed <var>values</var>, and fills in a <var>fallback</var> value if necessary. If <var>values</var> is <emu-val>undefined</emu-val>, there is no fixed set of values and any is permitted.
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_260"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>options</var>) is Object.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_261"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <var>property</var>).</li><li>If <var>value</var> is <emu-val>undefined</emu-val>, return <var>fallback</var>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>type</var> is <emu-val>"boolean"</emu-val> or <emu-val>"string"</emu-val>.</li><li>If <var>type</var> is <emu-val>"boolean"</emu-val>, then<ol><li>Set <var>value</var> to !&nbsp;<emu-xref aoid="ToBoolean" id="_ref_262"><a href="https://tc39.es/ecma262/#sec-toboolean">ToBoolean</a></emu-xref>(<var>value</var>).</li></ol></li><li>If <var>type</var> is <emu-val>"string"</emu-val>, then<ol><li>Set <var>value</var> to ?&nbsp;<emu-xref aoid="ToString" id="_ref_263"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>value</var>).</li></ol></li><li>If <var>values</var> is not <emu-val>undefined</emu-val> and <var>values</var> does not contain an element equal to <var>value</var>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Return <var>value</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-defaultnumberoption" aoid="DefaultNumberOption">
      <h1><span class="secnum">9.2.14</span> DefaultNumberOption ( <var>value</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</h1>

      <p>
        The abstract operation DefaultNumberOption converts <var>value</var> to a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>, checks whether it is in the allowed range, and fills in a <var>fallback</var> value if necessary.
      </p>

      <emu-alg><ol><li>If <var>value</var> is <emu-val>undefined</emu-val>, return <var>fallback</var>.</li><li>Set <var>value</var> to ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_264"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>value</var>).</li><li>If <var>value</var> is <emu-val>NaN</emu-val> or less than <var>minimum</var> or greater than <var>maximum</var>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Return <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>value</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getnumberoption" aoid="GetNumberOption">
      <h1><span class="secnum">9.2.15</span> GetNumberOption ( <var>options</var>, <var>property</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var> )</h1>

      <p>
        The abstract operation GetNumberOption extracts the value of the property named <var>property</var> from the provided <var>options</var> object, converts it to a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>, checks whether it is in the allowed range, and fills in a <var>fallback</var> value if necessary.
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_265"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>options</var>) is Object.</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_266"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <var>property</var>).</li><li>Return ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_267"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>value</var>, <var>minimum</var>, <var>maximum</var>, <var>fallback</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitionpattern" aoid="PartitionPattern">
      <h1><span class="secnum">9.2.16</span> PartitionPattern ( <var>pattern</var> )</h1>

      <p>
        The PartitionPattern abstract operation is called with argument <var>pattern</var>.
        This abstract operation parses an abstract pattern string into a list of Records with two fields, [[Type]] and [[Value]].
        The [[Value]] field will be a String value if [[Type]] is <emu-val>"literal"</emu-val>, and <emu-val>undefined</emu-val> otherwise.
        The syntax of the abstract pattern strings is an implementation detail and is not exposed to users of ECMA-402.
        The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>result</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>beginIndex</var> be !&nbsp;<emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>pattern</var>, <emu-val>"{"</emu-val>, 0).</li><li>Let <var>endIndex</var> be 0.</li><li>Let <var>nextIndex</var> be 0.</li><li>Let <var>length</var> be the number of code units in <var>pattern</var>.</li><li>Repeat, while <var>beginIndex</var> is an <emu-xref href="#integer-index"><a href="https://tc39.es/ecma262/#integer-index">integer index</a></emu-xref> into <var>pattern</var>,<ol><li>Set <var>endIndex</var> to !&nbsp;<emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>pattern</var>, <emu-val>"}"</emu-val>, <var>beginIndex</var>).</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>endIndex</var> is greater than <var>beginIndex</var>.</li><li>If <var>beginIndex</var> is greater than <var>nextIndex</var>, then<ol><li>Let <var>literal</var> be a substring of <var>pattern</var> from position <var>nextIndex</var>, inclusive, to position <var>beginIndex</var>, exclusive.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>literal</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Let <var>p</var> be the substring of <var>pattern</var> from position <var>beginIndex</var>, exclusive, to position <var>endIndex</var>, exclusive.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <var>p</var>, [[Value]]: <emu-val>undefined</emu-val> } as the last element of the list <var>result</var>.</li><li>Set <var>nextIndex</var> to <var>endIndex</var> + 1.</li><li>Set <var>beginIndex</var> to !&nbsp;<emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>pattern</var>, <emu-val>"{"</emu-val>, <var>nextIndex</var>).</li></ol></li><li>If <var>nextIndex</var> is less than <var>length</var>, then<ol><li>Let <var>literal</var> be the substring of <var>pattern</var> from position <var>nextIndex</var>, inclusive, to position <var>length</var>, exclusive.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>literal</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>

<emu-import href="./collator.html"><emu-clause id="collator-objects">
  <h1><span class="secnum">10</span> Collator Objects</h1>

  <emu-clause id="sec-the-intl-collator-constructor">
    <h1><span class="secnum">10.1</span> The Intl.Collator Constructor</h1>
    <p>
      The Intl.Collator <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%Collator%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_268"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_38"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-intl.collator">
      <h1><span class="secnum">10.1.1</span> Intl.Collator ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        When the <code>Intl.Collator</code> function is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>
      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, let <var>newTarget</var> be the <emu-xref href="#active-function-object"><a href="https://tc39.es/ecma262/#active-function-object">active function object</a></emu-xref>, else let <var>newTarget</var> be NewTarget.</li><li>Let <var>internalSlotsList</var> be « [[InitializedCollator]], [[Locale]], [[Usage]], [[Sensitivity]], [[IgnorePunctuation]], [[Collation]], [[BoundCompare]] ».</li><li>If <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_269"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[RelevantExtensionKeys]] contains <emu-val>"kn"</emu-val>, then<ol><li>Append [[Numeric]] as the last element of <var>internalSlotsList</var>.</li></ol></li><li>If <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_270"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[RelevantExtensionKeys]] contains <emu-val>"kf"</emu-val>, then<ol><li>Append [[CaseFirst]] as the last element of <var>internalSlotsList</var>.</li></ol></li><li>Let <var>collator</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_271"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <emu-val>"%Collator.prototype%"</emu-val>, <var>internalSlotsList</var>).</li><li>Return ?&nbsp;<emu-xref aoid="InitializeCollator" id="_ref_272"><a href="#sec-initializecollator">InitializeCollator</a></emu-xref>(<var>collator</var>, <var>locales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-initializecollator" aoid="InitializeCollator">
      <h1><span class="secnum">10.1.2</span> InitializeCollator ( <var>collator</var>, <var>locales</var>, <var>options</var> )</h1>

      <p>
        The abstract operation InitializeCollator accepts the arguments <var>collator</var> (which must be an object), <var>locales</var>, and <var>options</var>. It initializes <var>collator</var> as a Collator object. The following steps are taken:
      </p>
      <p>
        The following algorithm refers to the <code>type</code> nonterminal from <a href="https://www.unicode.org/reports/tr35/#Unicode_locale_identifier">UTS 35's Unicode Locale Identifier grammar</a>.
      </p>
      <emu-alg><ol><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_273"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_274"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>usage</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_275"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"usage"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"sort"</emu-val>, <emu-val>"search"</emu-val> », <emu-val>"sort"</emu-val>).</li><li>Set <var>collator</var>.[[Usage]] to <var>usage</var>.</li><li>If <var>usage</var> is <emu-val>"sort"</emu-val>, then<ol><li>Let <var>localeData</var> be <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_276"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[SortLocaleData]].</li></ol></li><li>Else,<ol><li>Let <var>localeData</var> be <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_277"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[SearchLocaleData]].</li></ol></li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_278"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[localeMatcher]] to <var>matcher</var>.</li><li>Let <var>collation</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_279"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"collation"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>collation</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>collation</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[co]] to <var>collation</var>.</li><li>Let <var>numeric</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_280"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numeric"</emu-val>, <emu-val>"boolean"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>numeric</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>numeric</var> be !&nbsp;<emu-xref aoid="ToString" id="_ref_281"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>numeric</var>).</li></ol></li><li>Set <var>opt</var>.[[kn]] to <var>numeric</var>.</li><li>Let <var>caseFirst</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_282"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"caseFirst"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"upper"</emu-val>, <emu-val>"lower"</emu-val>, <emu-val>"false"</emu-val> », <emu-val>undefined</emu-val>).</li><li>Set <var>opt</var>.[[kf]] to <var>caseFirst</var>.</li><li>Let <var>relevantExtensionKeys</var> be <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_283"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[RelevantExtensionKeys]].</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_284"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-the-intl-collator-constructor" id="_ref_285"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <var>relevantExtensionKeys</var>, <var>localeData</var>).</li><li>Set <var>collator</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Let <var>collation</var> be <var>r</var>.[[co]].</li><li>If <var>collation</var> is <emu-val>null</emu-val>, let <var>collation</var> be <emu-val>"default"</emu-val>.</li><li>Set <var>collator</var>.[[Collation]] to <var>collation</var>.</li><li>If <var>relevantExtensionKeys</var> contains <emu-val>"kn"</emu-val>, then<ol><li>Set <var>collator</var>.[[Numeric]] to !&nbsp;<emu-xref aoid="SameValue" id="_ref_286"><a href="https://tc39.es/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>r</var>.[[kn]], <emu-val>"true"</emu-val>).</li></ol></li><li>If <var>relevantExtensionKeys</var> contains <emu-val>"kf"</emu-val>, then<ol><li>Set <var>collator</var>.[[CaseFirst]] to <var>r</var>.[[kf]].</li></ol></li><li>Let <var>sensitivity</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_287"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"sensitivity"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"base"</emu-val>, <emu-val>"accent"</emu-val>, <emu-val>"case"</emu-val>, <emu-val>"variant"</emu-val> », <emu-val>undefined</emu-val>).</li><li>If <var>sensitivity</var> is <emu-val>undefined</emu-val>, then<ol><li>If <var>usage</var> is <emu-val>"sort"</emu-val>, then<ol><li>Let <var>sensitivity</var> be <emu-val>"variant"</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>dataLocale</var> be <var>r</var>.[[dataLocale]].</li><li>Let <var>dataLocaleData</var> be <var>localeData</var>.[[&lt;<var>dataLocale</var>&gt;]].</li><li>Let <var>sensitivity</var> be <var>dataLocaleData</var>.[[sensitivity]].</li></ol></li></ol></li><li>Set <var>collator</var>.[[Sensitivity]] to <var>sensitivity</var>.</li><li>Let <var>ignorePunctuation</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_288"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"ignorePunctuation"</emu-val>, <emu-val>"boolean"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>false</emu-val>).</li><li>Set <var>collator</var>.[[IgnorePunctuation]] to <var>ignorePunctuation</var>.</li><li>Return <var>collator</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-the-intl-collator-constructor">
    <h1><span class="secnum">10.2</span> Properties of the Intl.Collator Constructor</h1>

    <p>
      The Intl.Collator <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-intl.collator.prototype">
      <h1><span class="secnum">10.2.1</span> Intl.Collator.prototype</h1>

      <p>
        The value of <code>Intl.Collator.prototype</code> is <emu-xref href="#sec-properties-of-the-intl-collator-prototype-object" id="_ref_289"><a href="#sec-properties-of-the-intl-collator-prototype-object">%Collator.prototype%</a></emu-xref>.
      </p>

      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.collator.supportedlocalesof">
      <h1><span class="secnum">10.2.2</span> Intl.Collator.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_290"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_291"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_292"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl-collator-internal-slots">
      <h1><span class="secnum">10.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_39"><a href="#sec-internal-slots">9.1</a></emu-xref>. The value of the [[RelevantExtensionKeys]] internal slot is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> that must include the element <emu-val>"co"</emu-val>, may include any or all of the elements <emu-val>"kf"</emu-val> and <emu-val>"kn"</emu-val>, and must not include any other elements.
      </p>

      <emu-note><span class="note">Note</span><div class="note-contents">
        Unicode Technical Standard 35 describes ten locale extension keys that are relevant to collation: <emu-val>"co"</emu-val> for collator usage and specializations, <emu-val>"ka"</emu-val> for alternate handling, <emu-val>"kb"</emu-val> for backward second level weight, <emu-val>"kc"</emu-val> for case level, <emu-val>"kf"</emu-val> for case first, <emu-val>"kh"</emu-val> for hiragana quaternary, <emu-val>"kk"</emu-val> for normalization, <emu-val>"kn"</emu-val> for numeric, <emu-val>"kr"</emu-val> for reordering, <emu-val>"ks"</emu-val> for collation strength, and <emu-val>"vt"</emu-val> for variable top. Collator, however, requires that the usage is specified through the <emu-val>"usage"</emu-val> property of the options object, alternate handling through the <emu-val>"ignorePunctuation"</emu-val> property of the options object, and case level and the strength through the <emu-val>"sensitivity"</emu-val> property of the options object. The <emu-val>"co"</emu-val> key in the language tag is supported only for collator specializations, and the keys <emu-val>"kb"</emu-val>, <emu-val>"kh"</emu-val>, <emu-val>"kk"</emu-val>, <emu-val>"kr"</emu-val>, and <emu-val>"vt"</emu-val> are not allowed in this version of the Internationalization API. Support for the remaining keys is implementation dependent.
      </div></emu-note>

      <p>
        The values of the [[SortLocaleData]] and [[SearchLocaleData]] internal slots are implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_40"><a href="#sec-internal-slots">9.1</a></emu-xref> and the following additional constraints, for all locale values <var>locale</var>:
      </p>

      <ul>
        <li>The first element of [[SortLocaleData]].[[&lt;<var>locale</var>&gt;]].[[co]] and [[SearchLocaleData]].[[&lt;<var>locale</var>&gt;]].[[co]] must be <emu-val>null</emu-val>.</li>
        <li>The values <emu-val>"standard"</emu-val> and <emu-val>"search"</emu-val> must not be used as elements in any [[SortLocaleData]].[[&lt;<var>locale</var>&gt;]].[[co]] and [[SearchLocaleData]].[[&lt;<var>locale</var>&gt;]].[[co]] list.</li>
        <li>[[SearchLocaleData]].[[&lt;<var>locale</var>&gt;]] must have a [[sensitivity]] field with a String value equal to <emu-val>"base"</emu-val>, <emu-val>"accent"</emu-val>, <emu-val>"case"</emu-val>, or <emu-val>"variant"</emu-val>.</li>
      </ul>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-the-intl-collator-prototype-object">
    <h1><span class="secnum">10.3</span> Properties of the Intl.Collator Prototype Object</h1>

    <p>
      The Intl.Collator prototype object is itself an ordinary object. <dfn>%Collator.prototype%</dfn> is not an Intl.Collator instance and does not have an [[InitializedCollator]] internal slot or any of the other internal slots of Intl.Collator instance objects.
    </p>

    <emu-clause id="sec-intl.collator.prototype.constructor">
      <h1><span class="secnum">10.3.1</span> Intl.Collator.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.Collator.prototype.constructor</code> is <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_293"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.collator.prototype-@@tostringtag">
      <h1><span class="secnum">10.3.2</span> Intl.Collator.prototype [ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.Collator"</emu-val>.
      </p>

      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.collator.prototype.compare">
      <h1><span class="secnum">10.3.3</span> get Intl.Collator.prototype.compare</h1>

      <p>
        This named <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> returns a function that compares two strings according to the sort order of this Collator object.
      </p>
      <p>
        Intl.Collator.prototype.compare is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>collator</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_294"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>collator</var>, [[InitializedCollator]]).</li><li>If <var>collator</var>.[[BoundCompare]] is <emu-val>undefined</emu-val>, then<ol><li>Let <var>F</var> be a new built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> as defined in <emu-xref href="#sec-collator-compare-functions" id="_ref_41"><a href="#sec-collator-compare-functions">10.3.3.1</a></emu-xref>.</li><li>Set <var>F</var>.[[Collator]] to <var>collator</var>.</li><li>Set <var>collator</var>.[[BoundCompare]] to <var>F</var>.</li></ol></li><li>Return <var>collator</var>.[[BoundCompare]].</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        The returned function is bound to <var>collator</var> so that it can be passed directly to <code>Array.prototype.sort</code> or other functions.
      </div></emu-note>

      <emu-clause id="sec-collator-compare-functions">
        <h1><span class="secnum">10.3.3.1</span> Collator Compare Functions</h1>

        <p>A Collator compare function is an anonymous built-in function that has a [[Collator]] internal slot.</p>
        <p>When a Collator compare function <var>F</var> is called with arguments <var>x</var> and <var>y</var>, the following steps are taken:</p>

        <emu-alg><ol><li>Let <var>collator</var> be <var>F</var>.[[Collator]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_295"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>collator</var>) is Object and <var>collator</var> has an [[InitializedCollator]] internal slot.</li><li>If <var>x</var> is not provided, let <var>x</var> be <emu-val>undefined</emu-val>.</li><li>If <var>y</var> is not provided, let <var>y</var> be <emu-val>undefined</emu-val>.</li><li>Let <var>X</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_296"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>x</var>).</li><li>Let <var>Y</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_297"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>y</var>).</li><li>Return <emu-xref aoid="CompareStrings" id="_ref_298"><a href="#sec-collator-comparestrings">CompareStrings</a></emu-xref>(<var>collator</var>, <var>X</var>, <var>Y</var>).</li></ol></emu-alg>

        <p>The <emu-val>"length"</emu-val> property of a Collator compare function is 2.</p>
      </emu-clause>

      <emu-clause id="sec-collator-comparestrings" aoid="CompareStrings">
        <h1><span class="secnum">10.3.3.2</span> CompareStrings ( <var>collator</var>, <var>x</var>, <var>y</var> )</h1>

        <p>
          When the CompareStrings abstract operation is called with arguments <var>collator</var> (which must be an object initialized as a Collator), <var>x</var> and <var>y</var> (which must be String values), it returns a Number other than <emu-val>NaN</emu-val> that represents the result of a locale-sensitive String comparison of <var>x</var> with <var>y</var>. The two Strings are compared in an implementation-defined fashion. The result is intended to order String values in the sort order specified by the effective locale and collation options computed during construction of <var>collator</var>, and will be negative, zero, or positive, depending on whether <var>x</var> comes before <var>y</var> in the sort order, the Strings are equal under the sort order, or <var>x</var> comes after <var>y</var> in the sort order, respectively. String values must be interpreted as UTF-16 code unit sequences, and a <emu-xref href="#surrogate-pair"><a href="https://tc39.es/ecma262/#surrogate-pair">surrogate pair</a></emu-xref> (a code unit in the range 0xD800 to 0xDBFF followed by a code unit in the range 0xDC00 to 0xDFFF) within a string must be interpreted as the corresponding code point.
        </p>

        <p>
          The sensitivity of <var>collator</var> is interpreted as follows:
        </p>

        <ul>
          <li>base: Only strings that differ in base letters compare as unequal. Examples: a ≠ b, a = á, a = A.</li>
          <li>accent: Only strings that differ in base letters or accents and other diacritic marks compare as unequal. Examples: a ≠ b, a ≠ á, a = A.</li>
          <li>case: Only strings that differ in base letters or case compare as unequal. Examples: a ≠ b, a = á, a ≠ A.</li>
          <li>variant: Strings that differ in base letters, accents and other diacritic marks, or case compare as unequal. Other differences may also be taken into consideration. Examples: a ≠ b, a ≠ á, a ≠ A.</li>
        </ul>

        <emu-note><span class="note">Note 1</span><div class="note-contents">
        In some languages, certain letters with diacritic marks are considered base letters. For example, in Swedish, "ö" is a base letter that's different from "o".
        </div></emu-note>

        <p>
          If the collator is set to ignore punctuation, then strings that differ only in punctuation compare as equal.
        </p>

        <p>
          For the interpretation of options settable through extension keys, see Unicode Technical Standard 35.
        </p>

        <p>
          The CompareStrings abstract operation with any given <var>collator</var> argument, if considered as a function of the remaining two arguments <var>x</var> and <var>y</var>, must be a consistent comparison function (as defined in es2022, <emu-xref href="#sec-array.prototype.sort"><a href="https://tc39.es/ecma262/#sec-array.prototype.sort">22.1.3.27</a></emu-xref>) on the set of all Strings.
        </p>

        <p>
          The actual return values are implementation-defined to permit implementers to encode additional information in the value. The method is required to return <emu-val>+0</emu-val><sub>𝔽</sub> when comparing Strings that are considered canonically equivalent by the Unicode standard.
        </p>

        <emu-note><span class="note">Note 2</span><div class="note-contents">
          It is recommended that the CompareStrings abstract operation be implemented following Unicode Technical Standard 10, Unicode Collation Algorithm (available at <a href="https://unicode.org/reports/tr10/">https://unicode.org/reports/tr10/</a>), using tailorings for the effective locale and collation options of <var>collator</var>. It is recommended that implementations use the tailorings provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).
        </div></emu-note>

        <emu-note><span class="note">Note 3</span><div class="note-contents">
          Applications should not assume that the behaviour of the CompareStrings abstract operation for Collator instances with the same resolved options will remain the same for different versions of the same implementation.
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-intl.collator.prototype.resolvedoptions">
      <h1><span class="secnum">10.3.4</span> Intl.Collator.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>collator</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_299"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>collator</var>, [[InitializedCollator]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-collator-resolvedoptions-properties" id="_ref_42"><a href="#table-collator-resolvedoptions-properties">Table 3</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>Let <var>v</var> be the value of <var>collator</var>'s internal slot whose name is the Internal Slot value of the current row.</li><li>If the current row has an Extension Key value, then<ol><li>Let <var>extensionKey</var> be the Extension Key value of the current row.</li><li>If <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_300"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[RelevantExtensionKeys]] does not contain <var>extensionKey</var>, then<ol><li>Let <var>v</var> be <emu-val>undefined</emu-val>.</li></ol></li></ol></li><li>If <var>v</var> is not <emu-val>undefined</emu-val>, then<ol><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_301"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-collator-resolvedoptions-properties"><figure><figcaption>Table 3: Resolved Options of Collator Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
              <th>Extension Key</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td>[[Usage]]</td>
            <td><emu-val>"usage"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td>[[Sensitivity]]</td>
            <td><emu-val>"sensitivity"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td>[[IgnorePunctuation]]</td>
            <td><emu-val>"ignorePunctuation"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td>[[Collation]]</td>
            <td><emu-val>"collation"</emu-val></td>
            <td></td>
          </tr>
          <tr>
            <td>[[Numeric]]</td>
            <td><emu-val>"numeric"</emu-val></td>
            <td><emu-val>"kn"</emu-val></td>
          </tr>
          <tr>
            <td>[[CaseFirst]]</td>
            <td><emu-val>"caseFirst"</emu-val></td>
            <td><emu-val>"kf"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-collator-instances">
    <h1><span class="secnum">10.4</span> Properties of Intl.Collator Instances</h1>

    <p>
      Intl.Collator instances are ordinary objects that inherit properties from <emu-xref href="#sec-properties-of-the-intl-collator-prototype-object" id="_ref_302"><a href="#sec-properties-of-the-intl-collator-prototype-object">%Collator.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.Collator instances have an [[InitializedCollator]] internal slot.
    </p>

    <p>
      Intl.Collator instances also have several internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used for collation.</li>
      <li>[[Usage]] is one of the String values <emu-val>"sort"</emu-val> or <emu-val>"search"</emu-val>, identifying the collator usage.</li>
      <li>[[Sensitivity]] is one of the String values <emu-val>"base"</emu-val>, <emu-val>"accent"</emu-val>, <emu-val>"case"</emu-val>, or <emu-val>"variant"</emu-val>, identifying the collator's sensitivity.</li>
      <li>[[IgnorePunctuation]] is a Boolean value, specifying whether punctuation should be ignored in comparisons.</li>
      <li>[[Collation]] is a String value with the <emu-val>"type"</emu-val> given in Unicode Technical Standard 35 for the collation, except that the values <emu-val>"standard"</emu-val> and <emu-val>"search"</emu-val> are not allowed, while the value <emu-val>"default"</emu-val> is allowed.</li>
    </ul>

    <p>
      Intl.Collator instances also have the following internal slots if the key corresponding to the name of the internal slot in <emu-xref href="#table-collator-resolvedoptions-properties" id="_ref_43"><a href="#table-collator-resolvedoptions-properties">Table 3</a></emu-xref> is included in the [[RelevantExtensionKeys]] internal slot of Intl.Collator:
    </p>

    <ul>
      <li>[[Numeric]] is a Boolean value, specifying whether numeric sorting is used.</li>
      <li>[[CaseFirst]] is one of the String values <emu-val>"upper"</emu-val>, <emu-val>"lower"</emu-val>, or <emu-val>"false"</emu-val>.</li>
    </ul>

    <p>
      Finally, Intl.Collator instances have a [[BoundCompare]] internal slot that caches the function returned by the compare accessor (<emu-xref href="#sec-intl.collator.prototype.compare" id="_ref_44"><a href="#sec-intl.collator.prototype.compare">10.3.3</a></emu-xref>).
    </p>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./datetimeformat.html"><emu-clause id="datetimeformat-objects">
  <h1><span class="secnum">11</span> DateTimeFormat Objects</h1>

  <emu-clause id="sec-intl-datetimeformat-constructor">
    <h1><span class="secnum">11.1</span> The Intl.DateTimeFormat Constructor</h1>

    <p>
      The Intl.DateTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%DateTimeFormat%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_303"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_45"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-intl.datetimeformat">
      <h1><span class="secnum">11.1.1</span> Intl.DateTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        When the <code>Intl.DateTimeFormat</code> function is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, let <var>newTarget</var> be the <emu-xref href="#active-function-object"><a href="https://tc39.es/ecma262/#active-function-object">active function object</a></emu-xref>, else let <var>newTarget</var> be NewTarget.</li><li>Let <var>dateTimeFormat</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_304"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <emu-val>"%DateTimeFormat.prototype%"</emu-val>, « [[InitializedDateTimeFormat]], [[Locale]], [[Calendar]], [[NumberingSystem]], [[TimeZone]], [[Weekday]], [[Era]], [[Year]], [[Month]], [[Day]], [[DayPeriod]], [[Hour]], [[Minute]], [[Second]], [[FractionalSecondDigits]], [[TimeZoneName]], [[HourCycle]], [[Pattern]], [[BoundFormat]] »).</li><li>Perform ?&nbsp;<emu-xref aoid="InitializeDateTimeFormat" id="_ref_305"><a href="#sec-initializedatetimeformat">InitializeDateTimeFormat</a></emu-xref>(<var>dateTimeFormat</var>, <var>locales</var>, <var>options</var>).</li><li>If the implementation supports the normative optional <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_46"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>, then<ol><li>Let <var>this</var> be the <emu-val>this</emu-val> value.</li><li>Return ?&nbsp;<emu-xref aoid="ChainDateTimeFormat" id="_ref_306"><a href="#sec-chaindatetimeformat">ChainDateTimeFormat</a></emu-xref>(<var>dateTimeFormat</var>, NewTarget, <var>this</var>).</li></ol></li><li>Return <var>dateTimeFormat</var>.</li></ol></emu-alg>

      <emu-normative-optional>
      <emu-clause id="sec-chaindatetimeformat" aoid="ChainDateTimeFormat">
        <h1><span class="secnum">11.1.1.1</span> ChainDateTimeFormat ( <var>dateTimeFormat</var>, <var>newTarget</var>, <var>this</var> )</h1>
        <emu-alg><ol><li>If <var>newTarget</var> is <emu-val>undefined</emu-val> and ?&nbsp;<emu-xref aoid="OrdinaryHasInstance" id="_ref_307"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_308"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>, <var>this</var>) is <emu-val>true</emu-val>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="DefinePropertyOrThrow" id="_ref_309"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>this</var>, <emu-xref href="#intl-object" id="_ref_310"><a href="#intl-object">%Intl%</a></emu-xref>.[[FallbackSymbol]], PropertyDescriptor{ [[Value]]: <var>dateTimeFormat</var>, [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }).</li><li>Return <var>this</var>.</li></ol></li><li>Return <var>dateTimeFormat</var>.</li></ol></emu-alg>
      </emu-clause>
      </emu-normative-optional>
    </emu-clause>

    <emu-clause id="sec-initializedatetimeformat" aoid="InitializeDateTimeFormat">
      <h1><span class="secnum">11.1.2</span> InitializeDateTimeFormat ( <var>dateTimeFormat</var>, <var>locales</var>, <var>options</var> )</h1>

      <p>
        The abstract operation InitializeDateTimeFormat accepts the arguments <var>dateTimeFormat</var> (which must be an object), <var>locales</var>, and <var>options</var>. It initializes <var>dateTimeFormat</var> as a DateTimeFormat object. This abstract operation functions as follows:
      </p>

      <p>
        The following algorithm refers to the <code>type</code> nonterminal from <a href="https://www.unicode.org/reports/tr35/#Unicode_locale_identifier">UTS 35's Unicode Locale Identifier grammar</a>.
      </p>

      <emu-alg><ol><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_311"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Let <var>options</var> be ?&nbsp;<emu-xref aoid="ToDateTimeOptions" id="_ref_312"><a href="#sec-todatetimeoptions">ToDateTimeOptions</a></emu-xref>(<var>options</var>, <emu-val>"any"</emu-val>, <emu-val>"date"</emu-val>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_313"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[localeMatcher]] to <var>matcher</var>.</li><li>Let <var>calendar</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_314"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"calendar"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>calendar</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>calendar</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[ca]] to <var>calendar</var>.</li><li>Let <var>numberingSystem</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_315"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numberingSystem"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>numberingSystem</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>numberingSystem</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[nu]] to <var>numberingSystem</var>.</li><li>Let <var>hour12</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_316"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"hour12"</emu-val>, <emu-val>"boolean"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>Let <var>hourCycle</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_317"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"hourCycle"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>, <emu-val>"h23"</emu-val>, <emu-val>"h24"</emu-val> », <emu-val>undefined</emu-val>).</li><li>If <var>hour12</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>hourCycle</var> be <emu-val>null</emu-val>.</li></ol></li><li>Set <var>opt</var>.[[hc]] to <var>hourCycle</var>.</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_318"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_319"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_320"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_321"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>.[[RelevantExtensionKeys]], <var>localeData</var>).</li><li>Set <var>dateTimeFormat</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Let <var>calendar</var> be <var>r</var>.[[ca]].</li><li>Set <var>dateTimeFormat</var>.[[Calendar]] to <var>calendar</var>.</li><li>Set <var>dateTimeFormat</var>.[[HourCycle]] to <var>r</var>.[[hc]].</li><li>Set <var>dateTimeFormat</var>.[[NumberingSystem]] to <var>r</var>.[[nu]].</li><li>Let <var>dataLocale</var> be <var>r</var>.[[dataLocale]].</li><li>Let <var>timeZone</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_322"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"timeZone"</emu-val>).</li><li>If <var>timeZone</var> is <emu-val>undefined</emu-val>, then<ol><li>Let <var>timeZone</var> be <emu-xref aoid="DefaultTimeZone" id="_ref_323"><a href="#sec-defaulttimezone">DefaultTimeZone</a></emu-xref>().</li></ol></li><li>Else,<ol><li>Let <var>timeZone</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_324"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>timeZone</var>).</li><li>If the result of <emu-xref aoid="IsValidTimeZoneName" id="_ref_325"><a href="#sec-isvalidtimezonename">IsValidTimeZoneName</a></emu-xref>(<var>timeZone</var>) is <emu-val>false</emu-val>, then<ol><li>Throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Let <var>timeZone</var> be <emu-xref aoid="CanonicalizeTimeZoneName" id="_ref_326"><a href="#sec-canonicalizetimezonename">CanonicalizeTimeZoneName</a></emu-xref>(<var>timeZone</var>).</li></ol></li><li>Set <var>dateTimeFormat</var>.[[TimeZone]] to <var>timeZone</var>.</li><li>Let <var>formatOptions</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>For each row of <emu-xref href="#table-datetimeformat-components" id="_ref_47"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>prop</var> be the name given in the Property column of the row.</li><li>If <var>prop</var> is <emu-val>"fractionalSecondDigits"</emu-val>, then<ol><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="GetNumberOption" id="_ref_327"><a href="#sec-getnumberoption">GetNumberOption</a></emu-xref>(options, <emu-val>"fractionalSecondDigits"</emu-val>, 1, 3, <emu-val>undefined</emu-val>).</li></ol></li><li>Else,<ol><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_328"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <var>prop</var>, <emu-val>"string"</emu-val>, « the strings given in the Values column of the row », <emu-val>undefined</emu-val>).</li></ol></li><li>Set <var>formatOptions</var>.[[&lt;<var>prop</var>&gt;]] to <var>value</var>.</li></ol></li><li>Let <var>dataLocaleData</var> be <var>localeData</var>.[[&lt;<var>dataLocale</var>&gt;]].</li><li>Let <var>hcDefault</var> be <var>dataLocaleData</var>.[[hourCycle]].</li><li>Let <var>hc</var> be <var>dateTimeFormat</var>.[[HourCycle]].</li><li>If <var>hc</var> is <emu-val>null</emu-val>, then<ol><li>Set <var>hc</var> to <var>hcDefault</var>.</li></ol></li><li>If <var>hour12</var> is <emu-val>true</emu-val>, then<ol><li>If <var>hcDefault</var> is <emu-val>"h11"</emu-val> or <emu-val>"h23"</emu-val>, then<ol><li>Set <var>hc</var> to <emu-val>"h11"</emu-val>.</li></ol></li><li>Else,<ol><li>Set <var>hc</var> to <emu-val>"h12"</emu-val>.</li></ol></li></ol></li><li>Else if <var>hour12</var> is <emu-val>false</emu-val>, then<ol><li>If <var>hcDefault</var> is <emu-val>"h11"</emu-val> or <emu-val>"h23"</emu-val>, then<ol><li>Set <var>hc</var> to <emu-val>"h23"</emu-val>.</li></ol></li><li>Else,<ol><li>Set <var>hc</var> to <emu-val>"h24"</emu-val>.</li></ol></li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>hour12</var> is <emu-val>undefined</emu-val>.</li></ol></li><li>Set <var>dateTimeFormat</var>.[[HourCycle]] to <var>hc</var>.</li><li>Set <var>formatOptions</var>.[[hourCycle]] to <var>hc</var>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_329"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"formatMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"basic"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Let <var>dateStyle</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_330"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"dateStyle"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, <emu-val>"short"</emu-val> », <emu-val>undefined</emu-val>).</li><li>Set <var>dateTimeFormat</var>.[[DateStyle]] to <var>dateStyle</var>.</li><li>Let <var>timeStyle</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_331"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"timeStyle"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, <emu-val>"short"</emu-val> », <emu-val>undefined</emu-val>).</li><li>Set <var>dateTimeFormat</var>.[[TimeStyle]] to <var>timeStyle</var>.</li><li>If <var>dateStyle</var> is not <emu-val>undefined</emu-val> or <var>timeStyle</var> is not <emu-val>undefined</emu-val>, then<ol><li>For each row in <emu-xref href="#table-datetimeformat-components" id="_ref_48"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, except the header row, do<ol><li>Let <var>prop</var> be the name given in the Property column of the row.</li><li>Let <var>p</var> be <var>formatOptions</var>.[[&lt;<var>prop</var>&gt;]].</li><li>If <var>p</var> is not <emu-val>undefined</emu-val>, then<ol><li>Throw a <emu-val>TypeError</emu-val> exception.</li></ol></li></ol></li><li>Let <var>styles</var> be <var>dataLocaleData</var>.[[styles]].[[&lt;<var>calendar</var>&gt;]].</li><li>Let <var>bestFormat</var> be <emu-xref aoid="DateTimeStyleFormat" id="_ref_332"><a href="#sec-date-time-style-format">DateTimeStyleFormat</a></emu-xref>(<var>dateStyle</var>, <var>timeStyle</var>, <var>styles</var>).</li></ol></li><li>Else,<ol><li>Let <var>formats</var> be <var>dataLocaleData</var>.[[formats]].[[&lt;<var>calendar</var>&gt;]].</li><li>If <var>matcher</var> is <emu-val>"basic"</emu-val>, then<ol><li>Let <var>bestFormat</var> be <emu-xref aoid="BasicFormatMatcher" id="_ref_333"><a href="#sec-basicformatmatcher">BasicFormatMatcher</a></emu-xref>(<var>formatOptions</var>, <var>formats</var>).</li></ol></li><li>Else,<ol><li>Let <var>bestFormat</var> be <emu-xref aoid="BestFitFormatMatcher" id="_ref_334"><a href="#sec-bestfitformatmatcher">BestFitFormatMatcher</a></emu-xref>(<var>formatOptions</var>, <var>formats</var>).</li></ol></li></ol></li><li>For each row in <emu-xref href="#table-datetimeformat-components" id="_ref_49"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>prop</var> be the name given in the Property column of the row.</li><li>If <var>bestFormat</var> has a field [[&lt;<var>prop</var>&gt;]], then<ol><li>Let <var>p</var> be <var>bestFormat</var>.[[&lt;<var>prop</var>&gt;]].</li><li>Set <var>dateTimeFormat</var>'s internal slot whose name is the Internal Slot column of the row to <var>p</var>.</li></ol></li></ol></li><li>If <var>dateTimeFormat</var>.[[Hour]] is <emu-val>undefined</emu-val>, then<ol><li>Set <var>dateTimeFormat</var>.[[HourCycle]] to <emu-val>undefined</emu-val>.</li></ol></li><li>If <var>dateTimeformat</var>.[[HourCycle]] is <emu-val>"h11"</emu-val> or <emu-val>"h12"</emu-val>, then<ol><li>Let <var>pattern</var> be <var>bestFormat</var>.[[pattern12]].</li><li>Let <var>rangePatterns</var> be <var>bestFormat</var>.[[rangePatterns12]].</li></ol></li><li>Else,<ol><li>Let <var>pattern</var> be <var>bestFormat</var>.[[pattern]].</li><li>Let <var>rangePatterns</var> be <var>bestFormat</var>.[[rangePatterns]].</li></ol></li><li>Set <var>dateTimeFormat</var>.[[Pattern]] to <var>pattern</var>.</li><li>Set <var>dateTimeFormat</var>.[[RangePatterns]] to <var>rangePatterns</var>.</li><li>Return <var>dateTimeFormat</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-datetimeformat-constructor">
    <h1><span class="secnum">11.2</span> Properties of the Intl.DateTimeFormat Constructor</h1>

    <p>
      The Intl.DateTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-intl.datetimeformat.prototype">
      <h1><span class="secnum">11.2.1</span> Intl.DateTimeFormat.prototype</h1>

      <p>
        The value of <code>Intl.DateTimeFormat.prototype</code> is <emu-xref href="#sec-properties-of-intl-datetimeformat-prototype-object" id="_ref_335"><a href="#sec-properties-of-intl-datetimeformat-prototype-object">%DateTimeFormat.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.supportedlocalesof">
      <h1><span class="secnum">11.2.2</span> Intl.DateTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_336"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_337"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_338"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat-internal-slots">
      <h1><span class="secnum">11.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_50"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « <emu-val>"ca"</emu-val>, <emu-val>"hc"</emu-val>, <emu-val>"nu"</emu-val> ».
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        Unicode Technical Standard 35 describes four locale extension keys that are relevant to date and time formatting: <emu-val>"ca"</emu-val> for calendar, <emu-val>"hc"</emu-val> for hour cycle, <emu-val>"nu"</emu-val> for numbering system (of formatted numbers), and <emu-val>"tz"</emu-val> for time zone. DateTimeFormat, however, requires that the time zone is specified through the <emu-val>"timeZone"</emu-val> property in the options objects.
      </div></emu-note>

      <p>
        The value of the [[LocaleData]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_51"><a href="#sec-internal-slots">9.1</a></emu-xref> and the following additional constraints, for all locale values <var>locale</var>:
      </p>

      <ul>
        <li>
          [[LocaleData]].[[&lt;<var>locale</var>&gt;]].[[nu]] must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> that does not include the values <emu-val>"native"</emu-val>, <emu-val>"traditio"</emu-val>, or <emu-val>"finance"</emu-val>.
        </li>
        <li>
          [[LocaleData]].[[&lt;<var>locale</var>&gt;]].[[hc]] must be « <emu-val>null</emu-val>, <emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>, <emu-val>"h23"</emu-val>, <emu-val>"h24"</emu-val> ».
        </li>
        <li>
          [[LocaleData]].[[&lt;<var>locale</var>&gt;]].[[hourCycle]] must be a String value equal to <emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>, <emu-val>"h23"</emu-val>, or <emu-val>"h24"</emu-val>.
        </li>
        <li>
          [[LocaleData]].[[&lt;<var>locale</var>&gt;]] must have a [[formats]] field. This [[formats]] field must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with [[&lt;<var>calendar</var>&gt;]] fields for all calendar values <var>calendar</var>. The value of this field must be a list of records, each of which has a subset of the fields shown in <emu-xref href="#table-datetimeformat-components" id="_ref_52"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, where each field must have one of the values specified for the field in <emu-xref href="#table-datetimeformat-components" id="_ref_53"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>. Multiple records in a list may use the same subset of the fields as long as they have different values for the fields. The following subsets must be available for each locale:
          <ul>
            <li>weekday, year, month, day, hour, minute, second, fractionalSecondDigits</li>
            <li>weekday, year, month, day, hour, minute, second</li>
            <li>weekday, year, month, day</li>
            <li>year, month, day</li>
            <li>year, month</li>
            <li>month, day</li>
            <li>hour, minute, second, fractionalSecondDigits</li>
            <li>hour, minute, second</li>
            <li>hour, minute</li>
            <li>dayPeriod, hour</li>
            <li>dayPeriod, hour, minute, second</li>
            <li>dayPeriod, hour, minute</li>
          </ul>
          Each of the records must also have the following fields:
          <ol>
            <li>A [[pattern]] field, whose value is a String value that contains for each of the date and time format component fields of the record a substring starting with <emu-val>"{"</emu-val>, followed by the name of the field, followed by <emu-val>"}"</emu-val>.</li>
            <li>If the record has an [[hour]] field, it must also have a [[pattern12]] field, whose value is a String value that, in addition to the substrings of the [[pattern]] field, contains at least one of the substrings <emu-val>"{ampm}"</emu-val> or <emu-val>"{dayPeriod}"</emu-val>.</li>
            <li>If the record has a [[year]] field, the [[pattern]] and [[pattern12]] values may contain the substrings <emu-val>"{yearName}"</emu-val> and <emu-val>"{relatedYear}"</emu-val>.</li>
            <li>
              A [[rangePatterns]] field with a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> value:
                <ul>
                  <li>The [[rangePatterns]] record may have any of the fields in <emu-xref href="#table-datetimeformat-rangepatternfields" id="_ref_54"><a href="#table-datetimeformat-rangepatternfields">Table 4</a></emu-xref>, where each field represents a range pattern and its value is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.
                    <ul>
                      <li>The name of the field indicates the largest calendar element that must be different between the start and end dates in order to use this range pattern. For example, if the field name is [[Month]], it contains the range pattern that should be used to format a date range where the era and year values are the same, but the month value is different.</li>
                      <li>The record will contain the following fields:</li>
                        <ul>
                          <li>A subset of the fields shown in the Property column of <emu-xref href="#table-datetimeformat-components" id="_ref_55"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, where each field must have one of the values specified for that field in the Values column of <emu-xref href="#table-datetimeformat-components" id="_ref_56"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>. All fields required to format a date for any of the [[PatternParts]] records must be present.</li>
                          <li>A [[PatternParts]] field whose value is a list of Records each representing a part of the range pattern. Each record contains a [[Pattern]] field and a [[Source]] field. The [[Pattern]] field's value is a String of the same format as the regular date pattern String. The [[Source]] field is one of the String values <emu-val>"shared"</emu-val>, <emu-val>"startRange"</emu-val>, or <emu-val>"endRange"</emu-val>. It indicates which of the range's dates should be formatted using the value of the [[Pattern]] field.</li>
                        </ul>
                    </ul>
                  </li>
                  <li>The [[rangePatterns]] record must have a [[Default]] field which contains the default range pattern used when the specific range pattern is not available. Its value is a list of records with the same structure as the other fields in the [[rangePatterns]] record.</li>
                </ul>
            </li>
            <li>If the record has an [[hour]] field, it must also have a [[rangePatterns12]] field. Its value is similar to the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> in [[rangePatterns]], but it uses a String similar to [[pattern12]] for each part of the range pattern.</li>
            <li>If the record has a [[year]] field, the [[rangePatterns]] and [[rangePatterns12]] fields may contain range patterns where the [[Pattern]] values may contain the substrings <emu-val>"{yearName}"</emu-val> and <emu-val>"{relatedYear}"</emu-val>.</li>
          </ol>
        </li>
        <li>
          [[LocaleData]].[[&lt;<var>locale</var>&gt;]] must have a [[styles]] field. The [[styles]] field must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with [[&lt;<var>calendar</var>&gt;]] fields for all calendar values <var>calendar</var>. The calendar records must contain [[DateFormat]], [[TimeFormat]], [[DateTimeFormat]] and [[DateTimeRangeFormat]] fields, the value of these fields are Records, where each of which has [[full]], [[long]], [[medium]] and [[short]] fields. For [[DateFormat]] and [[TimeFormat]], the value of these fields must be a record, which has a subset of the fields shown in <emu-xref href="#table-datetimeformat-components" id="_ref_57"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, where each field must have one of the values specified for the field in <emu-xref href="#table-datetimeformat-components" id="_ref_58"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>. Each of the records must also have the following fields:
          <ol>
            <li>A [[pattern]] field, whose value is a String value that contains for each of the date and time format component fields of the record a substring starting with <emu-val>"{"</emu-val>, followed by the name of the field, followed by <emu-val>"}"</emu-val>.</li>
            <li>If the record has an [[hour]] field, it must also have a [[pattern12]] field, whose value is a String value that, in addition to the substrings of the pattern field, contains at least one of the substrings <emu-val>"{ampm}"</emu-val> or <emu-val>"{dayPeriod}"</emu-val>.</li>
            <li>A [[rangePatterns]] field that contains a record similar to the one described in the [[formats]] field.</li>
            <li>If the record has an [[hour]] field, it must also have a [[rangePatterns12]] field. Its value is similar to the record in [[rangePatterns]] but it uses a string similar to [[pattern12]] for each range pattern.</li>
          </ol>
          For [[DateTimeFormat]], the field value must be a string pattern which contains the strings <emu-val>"{0}"</emu-val> and <emu-val>"{1}"</emu-val>. For [[DateTimeRangeFormat]] the value of these fields must be a nested record which also has [[full]], [[long]], [[medium]] and [[short]] fields. The [[full]], [[long]], [[medium]] and [[short]] fields in the enclosing record refer to the date style of the range pattern, while the fields in the nested record refers to the time style of the range pattern. The value of these fields in the nested record is a record with a [[rangePatterns]] field and a [[rangePatterns12]] field which are similar to the [[rangePatterns]] and [rangePatterns12]] fields in [[DateFormat]] and [[TimeFormat]].
         </li>
      </ul>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        For example, an implementation might include the following record as part of its English locale data:
        <ul>
          <li>[[hour]]: <emu-val>"numeric"</emu-val></li>
          <li>[[minute]]: <emu-val>"numeric"</emu-val></li>
          <li>[[pattern]]: <emu-val>"{hour}:{minute}"</emu-val></li>
          <li>[[pattern12]]: <emu-val>"{hour}:{minute} {ampm}"</emu-val></li>
          <li>[[rangePatterns]]:</li>
          <ul>
            <li>[[Hour]]:<ul>
              <li>[[hour]]: <emu-val>"numeric"</emu-val></li>
              <li>[[minute]]: <emu-val>"numeric"</emu-val></li>
              <li>[[PatternParts]]:</li>
              <ul>
                <li>{[[Source]]: <emu-val>"startRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" – "</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"endRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
              </ul>
            </ul></li>
            <li>[[Minute]]:<ul>
              <li>[[hour]]: <emu-val>"numeric"</emu-val></li>
              <li>[[minute]]: <emu-val>"numeric"</emu-val></li>
              <li>[[PatternParts]]:</li>
              <ul>
                <li>{[[Source]]: <emu-val>"startRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" – "</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"endRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
              </ul>
            </ul></li>
            <li>[[Default]]:<ul>
              <li>[[year]]: <emu-val>"2-digit"</emu-val></li>
              <li>[[month]]: <emu-val>"numeric"</emu-val></li>
              <li>[[day]]: <emu-val>"numeric"</emu-val></li>
              <li>[[hour]]: <emu-val>"numeric"</emu-val></li>
              <li>[[minute]]: <emu-val>"numeric"</emu-val></li>
              <li>[[PatternParts]]:</li>
              <ul>
                <li>{[[Source]]: <emu-val>"startRange"</emu-val>, [[Pattern]]: <emu-val>"{day}/{month}/{year}, {hour}:{minute}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" – "</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"endRange"</emu-val>, [[Pattern]]: <emu-val>"{day}/{month}/{year}, {hour}:{minute}"</emu-val>}</li>
              </ul>
            </ul></li>
          </ul>
          <li>[[rangePatterns12]]:
          <ul>
            <li>[[Hour]]:<ul>
              <li>[[hour]]: <emu-val>"numeric"</emu-val></li>
              <li>[[minute]]: <emu-val>"numeric"</emu-val></li>
              <li>[[PatternParts]]:</li>
              <ul>
                <li>{[[Source]]: <emu-val>"startRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" – "</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"endRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" {ampm}"</emu-val>}</li>
              </ul>
            </ul></li>
            <li>[[Minute]]:<ul>
              <li>[[hour]]: <emu-val>"numeric"</emu-val></li>
              <li>[[minute]]: <emu-val>"numeric"</emu-val></li>
              <li>[[PatternParts]]:</li>
              <ul>
                <li>{[[Source]]: <emu-val>"startRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" – "</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"endRange"</emu-val>, [[Pattern]]: <emu-val>"{hour}:{minute}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" {ampm}"</emu-val>}</li>
              </ul>
            </ul></li>
            <li>[[Default]]:<ul>
              <li>[[year]]: <emu-val>"2-digit"</emu-val></li>
              <li>[[month]]: <emu-val>"numeric"</emu-val></li>
              <li>[[day]]: <emu-val>"numeric"</emu-val></li>
              <li>[[hour]]: <emu-val>"numeric"</emu-val></li>
              <li>[[minute]]: <emu-val>"numeric"</emu-val></li>
              <li>[[PatternParts]]:</li>
              <ul>
                <li>{[[Source]]: <emu-val>"startRange"</emu-val>, [[Pattern]]: <emu-val>"{day}/{month}/{year}, {hour}:{minute} {ampm}"</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"shared"</emu-val>, [[Pattern]]: <emu-val>" – "</emu-val>}</li>
                <li>{[[Source]]: <emu-val>"endRange"</emu-val>, [[Pattern]]: <emu-val>"{day}/{month}/{year}, {hour}:{minute} {ampm}"</emu-val>}</li>
              </ul>
            </ul></li>
          </ul></li>
        </ul>
      </div></emu-note>

      <emu-note><span class="note">Note 3</span><div class="note-contents">
        It is recommended that implementations use the locale data provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).
      </div></emu-note>

      <emu-table id="table-datetimeformat-rangepatternfields"><figure><figcaption>Table 4: Range pattern fields</figcaption>
        

        <table class="real-table">
          <thead>
            <tr>
              <th>Range Pattern Field</th>
              <th>Pattern String Field</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Era]]</td>
            <td><emu-val>"era"</emu-val></td>
          </tr>
          <tr>
            <td>[[Year]]</td>
            <td><emu-val>"year"</emu-val></td>
          </tr>
          <tr>
            <td>[[Month]]</td>
            <td><emu-val>"month"</emu-val></td>
          </tr>
          <tr>
            <td>[[Day]]</td>
            <td><emu-val>"day"</emu-val></td>
          </tr>
          <tr>
            <td>[[AmPm]]</td>
            <td><emu-val>"ampm"</emu-val></td>
          </tr>
          <tr>
            <td>[[DayPeriod]]</td>
            <td><emu-val>"dayPeriod"</emu-val></td>
          </tr>
          <tr>
            <td>[[Hour]]</td>
            <td><emu-val>"hour"</emu-val></td>
          </tr>
          <tr>
            <td>[[Minute]]</td>
            <td><emu-val>"minute"</emu-val></td>
          </tr>
          <tr>
            <td>[[Second]]</td>
            <td><emu-val>"second"</emu-val></td>
          </tr>
          <tr>
            <td>[[FractionalSecondDigits]]</td>
            <td><emu-val>"fractionalSecondDigits"</emu-val></td>
          </tr>
        </tbody></table>

      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-datetimeformat-prototype-object">
    <h1><span class="secnum">11.3</span> Properties of the Intl.DateTimeFormat Prototype Object</h1>

    <p>
      The Intl.DateTimeFormat prototype object is itself an ordinary object. <dfn>%DateTimeFormat.prototype%</dfn> is not an Intl.DateTimeFormat instance and does not have an [[InitializedDateTimeFormat]] internal slot or any of the other internal slots of Intl.DateTimeFormat instance objects.
    </p>

    <emu-clause id="sec-intl.datetimeformat.prototype.constructor">
      <h1><span class="secnum">11.3.1</span> Intl.DateTimeFormat.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.DateTimeFormat.prototype.constructor</code> is <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_339"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype-@@tostringtag">
      <h1><span class="secnum">11.3.2</span> Intl.DateTimeFormat.prototype [ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.DateTimeFormat"</emu-val>.
      </p>

      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype.format">
      <h1><span class="secnum">11.3.3</span> get Intl.DateTimeFormat.prototype.format</h1>

      <p>
        Intl.DateTimeFormat.prototype.format is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>dtf</var> be the <emu-val>this</emu-val> value.</li><li>If the implementation supports the normative optional <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_59"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>, then<ol><li>Set <var>dtf</var> to ?&nbsp;<emu-xref aoid="UnwrapDateTimeFormat" id="_ref_340"><a href="#sec-unwrapdatetimeformat">UnwrapDateTimeFormat</a></emu-xref>(<var>dtf</var>).</li></ol></li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_341"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, [[InitializedDateTimeFormat]]).</li><li>If <var>dtf</var>.[[BoundFormat]] is <emu-val>undefined</emu-val>, then<ol><li>Let <var>F</var> be a new built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> as defined in DateTime Format Functions (<emu-xref href="#sec-datetime-format-functions" id="_ref_60"><a href="#sec-datetime-format-functions">11.5.5</a></emu-xref>).</li><li>Set <var>F</var>.[[DateTimeFormat]] to <var>dtf</var>.</li><li>Set <var>dtf</var>.[[BoundFormat]] to <var>F</var>.</li></ol></li><li>Return <var>dtf</var>.[[BoundFormat]].</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        The returned function is bound to <var>dtf</var> so that it can be passed directly to <code>Array.prototype.map</code> or other functions.
        This is considered a historical artefact, as part of a convention which is no longer followed for new features, but is preserved to maintain compatibility with existing programs.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-Intl.DateTimeFormat.prototype.formatToParts">
      <h1><span class="secnum">11.3.4</span> Intl.DateTimeFormat.prototype.formatToParts ( <var>date</var> )</h1>

      <p>
        When the <code>formatToParts</code> method is called with an argument <var>date</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>dtf</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_342"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, [[InitializedDateTimeFormat]]).</li><li>If <var>date</var> is <emu-val>undefined</emu-val>, then<ol><li>Let <var>x</var> be <emu-xref aoid="Call" id="_ref_343"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(%Date.now%, <emu-val>undefined</emu-val>).</li></ol></li><li>Else,<ol><li>Let <var>x</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_344"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>date</var>).</li></ol></li><li>Return ?&nbsp;<emu-xref aoid="FormatDateTimeToParts" id="_ref_345"><a href="#sec-formatdatetimetoparts">FormatDateTimeToParts</a></emu-xref>(<var>dtf</var>, <var>x</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype.formatRange">
      <h1><span class="secnum">11.3.5</span> Intl.DateTimeFormat.prototype.formatRange ( <var>startDate</var>, <var>endDate</var> )</h1>

      <p>
        When the <code>formatRange</code> method is called with arguments <var>startDate</var> and <var>endDate</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>dtf</var> be <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_346"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, [[InitializedDateTimeFormat]]).</li><li>If <var>startDate</var> is <emu-val>undefined</emu-val> or <var>endDate</var> is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>x</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_347"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>startDate</var>).</li><li>Let <var>y</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_348"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>endDate</var>).</li><li>Return ?&nbsp;<emu-xref aoid="FormatDateTimeRange" id="_ref_349"><a href="#sec-formatdatetimerange">FormatDateTimeRange</a></emu-xref>(<var>dtf</var>, <var>x</var>, <var>y</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DateTimeFormat.prototype.formatRangeToParts">
      <h1><span class="secnum">11.3.6</span> Intl.DateTimeFormat.prototype.formatRangeToParts ( <var>startDate</var>, <var>endDate</var> )</h1>

      <p>
        When the <code>formatRangeToParts</code> method is called with arguments <var>startDate</var> and <var>endDate</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>dtf</var> be <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_350"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, [[InitializedDateTimeFormat]]).</li><li>If <var>startDate</var> is <emu-val>undefined</emu-val> or <var>endDate</var> is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>x</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_351"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>startDate</var>).</li><li>Let <var>y</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_352"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>endDate</var>).</li><li>Return ?&nbsp;<emu-xref aoid="FormatDateTimeRangeToParts" id="_ref_353"><a href="#sec-formatdatetimerangetoparts">FormatDateTimeRangeToParts</a></emu-xref>(<var>dtf</var>, <var>x</var>, <var>y</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.datetimeformat.prototype.resolvedoptions">
      <h1><span class="secnum">11.3.7</span> Intl.DateTimeFormat.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>dtf</var> be the <emu-val>this</emu-val> value.</li><li>If the implementation supports the normative optional <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_61"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>, then<ol><li>Set <var>dtf</var> to ?&nbsp;<emu-xref aoid="UnwrapDateTimeFormat" id="_ref_354"><a href="#sec-unwrapdatetimeformat">UnwrapDateTimeFormat</a></emu-xref>(<var>dtf</var>).</li></ol></li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_355"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>dtf</var>, [[InitializedDateTimeFormat]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-datetimeformat-resolvedoptions-properties" id="_ref_62"><a href="#table-datetimeformat-resolvedoptions-properties">Table 5</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>If <var>p</var> is <emu-val>"hour12"</emu-val>, then<ol><li>Let <var>hc</var> be <var>dtf</var>.[[HourCycle]].</li><li>If <var>hc</var> is <emu-val>"h11"</emu-val> or <emu-val>"h12"</emu-val>, let <var>v</var> be <emu-val>true</emu-val>.</li><li>Else if, <var>hc</var> is <emu-val>"h23"</emu-val> or <emu-val>"h24"</emu-val>, let <var>v</var> be <emu-val>false</emu-val>.</li><li>Else, let <var>v</var> be <emu-val>undefined</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>v</var> be the value of <var>dtf</var>'s internal slot whose name is the Internal Slot value of the current row.</li></ol></li><li>If the Internal Slot value of the current row is an Internal Slot value in <emu-xref href="#table-datetimeformat-components" id="_ref_63"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, then<ol><li>If <var>dtf</var>.[[DateStyle]] is not <emu-val>undefined</emu-val> or <var>dtf</var>.[[TimeStyle]] is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>v</var> be <emu-val>undefined</emu-val>.</li></ol></li></ol></li><li>If <var>v</var> is not <emu-val>undefined</emu-val>, then<ol><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_356"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-datetimeformat-resolvedoptions-properties"><figure><figcaption>Table 5: Resolved Options of DateTimeFormat Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td>[[Calendar]]</td>
            <td><emu-val>"calendar"</emu-val></td>
          </tr>
          <tr>
            <td>[[NumberingSystem]]</td>
            <td><emu-val>"numberingSystem"</emu-val></td>
          </tr>
          <tr>
            <td>[[TimeZone]]</td>
            <td><emu-val>"timeZone"</emu-val></td>
          </tr>
          <tr>
            <td>[[HourCycle]]</td>
            <td><emu-val>"hourCycle"</emu-val></td>
          </tr>
          <tr>
            <td></td>
            <td><emu-val>"hour12"</emu-val></td>
          </tr>
          <tr>
            <td>[[Weekday]]</td>
            <td><emu-val>"weekday"</emu-val></td>
          </tr>
          <tr>
            <td>[[Era]]</td>
            <td><emu-val>"era"</emu-val></td>
          </tr>
          <tr>
            <td>[[Year]]</td>
            <td><emu-val>"year"</emu-val></td>
          </tr>
          <tr>
            <td>[[Month]]</td>
            <td><emu-val>"month"</emu-val></td>
          </tr>
          <tr>
            <td>[[Day]]</td>
            <td><emu-val>"day"</emu-val></td>
          </tr>
          <tr>
            <td>[[DayPeriod]]</td>
            <td><emu-val>"dayPeriod"</emu-val></td>
          </tr>
          <tr>
            <td>[[Hour]]</td>
            <td><emu-val>"hour"</emu-val></td>
          </tr>
          <tr>
            <td>[[Minute]]</td>
            <td><emu-val>"minute"</emu-val></td>
          </tr>
          <tr>
            <td>[[Second]]</td>
            <td><emu-val>"second"</emu-val></td>
          </tr>
          <tr>
            <td>[[FractionalSecondDigits]]</td>
            <td><emu-val>"fractionalSecondDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[TimeZoneName]]</td>
            <td><emu-val>"timeZoneName"</emu-val></td>
          </tr>
          <tr>
            <td>[[DateStyle]]</td>
            <td><emu-val>"dateStyle"</emu-val></td>
          </tr>
          <tr>
            <td>[[TimeStyle]]</td>
            <td><emu-val>"timeStyle"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>

      <p>
        For web compatibility reasons, if the property <emu-val>"hourCycle"</emu-val> is set, the <emu-val>"hour12"</emu-val> property should be set to <emu-val>true</emu-val> when <emu-val>"hourCycle"</emu-val> is <emu-val>"h11"</emu-val> or <emu-val>"h12"</emu-val>, or to <emu-val>false</emu-val> when <emu-val>"hourCycle"</emu-val> is <emu-val>"h23"</emu-val> or <emu-val>"h24"</emu-val>.
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        In this version of the ECMAScript 2022 Internationalization API, the <emu-val>"timeZone"</emu-val> property will be the name of the default time zone if no <emu-val>"timeZone"</emu-val> property was provided in the options object provided to the Intl.DateTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>. The first edition left the <emu-val>"timeZone"</emu-val> property <emu-val>undefined</emu-val> in this case.
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        For compatibility with versions prior to the fifth edition, the <emu-val>"hour12"</emu-val> property is set in addition to the <emu-val>"hourCycle"</emu-val> property.
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-datetimeformat-instances">
    <h1><span class="secnum">11.4</span> Properties of Intl.DateTimeFormat Instances</h1>

    <p>
      Intl.DateTimeFormat instances are ordinary objects that inherit properties from <emu-xref href="#sec-properties-of-intl-datetimeformat-prototype-object" id="_ref_357"><a href="#sec-properties-of-intl-datetimeformat-prototype-object">%DateTimeFormat.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.DateTimeFormat instances have an [[InitializedDateTimeFormat]] internal slot.
    </p>

    <p>
      Intl.DateTimeFormat instances also have several internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used for formatting.</li>
      <li>[[Calendar]] is a String value with the <emu-val>"type"</emu-val> given in Unicode Technical Standard 35 for the calendar used for formatting.</li>
      <li>[[NumberingSystem]] is a String value with the <emu-val>"type"</emu-val> given in Unicode Technical Standard 35 for the numbering system used for formatting.</li>
      <li>[[TimeZone]] is a String value with the IANA time zone name of the time zone used for formatting.</li>
      <li>[[Weekday]], [[Era]], [[Year]], [[Month]], [[Day]], [[DayPeriod]], [[Hour]], [[Minute]], [[Second]], [[TimeZoneName]] are each either <emu-val>undefined</emu-val>, indicating that the component is not used for formatting, or one of the String values given in <emu-xref href="#table-datetimeformat-components" id="_ref_64"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, indicating how the component should be presented in the formatted output.</li>
      <li>[[FractionalSecondDigits]] is either <emu-val>undefined</emu-val> or a positive, non-zero <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref> indicating the fraction digits to be used for fractional seconds. Numbers will be rounded or padded with trailing zeroes if necessary.</li>
      <li>[[HourCycle]] is a String value indicating whether the 12-hour format (<emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>) or the 24-hour format (<emu-val>"h23"</emu-val>, <emu-val>"h24"</emu-val>) should be used. <emu-val>"h11"</emu-val> and <emu-val>"h23"</emu-val> start with hour 0 and go up to 11 and 23 respectively. <emu-val>"h12"</emu-val> and <emu-val>"h24"</emu-val> start with hour 1 and go up to 12 and 24. [[HourCycle]] is only used when [[Hour]] is not <emu-val>undefined</emu-val>.</li>
      <li>[[DateStyle]], [[TimeStyle]] are each either <emu-val>undefined</emu-val>, or a String value with values <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, or <emu-val>"short"</emu-val>.</li>
      <li>[[Pattern]] is a String value as described in <emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_65"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>.</li>
      <li>[[RangePatterns]] is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> as described in <emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_66"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>.</li>
    </ul>

    <p>
      Finally, Intl.DateTimeFormat instances have a [[BoundFormat]] internal slot that caches the function returned by the format accessor (<emu-xref href="#sec-intl.datetimeformat.prototype.format" id="_ref_67"><a href="#sec-intl.datetimeformat.prototype.format">11.3.3</a></emu-xref>).
    </p>
  </emu-clause>

  <emu-clause id="sec-datetimeformat-abstracts">
    <h1><span class="secnum">11.5</span> Abstract Operations for DateTimeFormat Objects</h1>

    <p>
      Several DateTimeFormat algorithms use values from the following table, which provides internal slots, property names and allowable values for the components of date and time formats:
    </p>

    <emu-table id="table-datetimeformat-components"><figure><figcaption>Table 6: Components of date and time formats</figcaption>
      
      <table class="real-table">
        <thead>
          <tr>
            <th>Internal Slot</th>
            <th>Property</th>
            <th>Values</th>
          </tr>
        </thead>
        <tbody><tr>
          <td>[[Weekday]]</td>
          <td><emu-val>"weekday"</emu-val></td>
          <td><emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val></td>
        </tr>
        <tr>
          <td>[[Era]]</td>
          <td><emu-val>"era"</emu-val></td>
          <td><emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val></td>
        </tr>
        <tr>
          <td>[[Year]]</td>
          <td><emu-val>"year"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>, <emu-val>"numeric"</emu-val></td>
        </tr>
        <tr>
          <td>[[Month]]</td>
          <td><emu-val>"month"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>, <emu-val>"numeric"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val></td>
        </tr>
        <tr>
          <td>[[Day]]</td>
          <td><emu-val>"day"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>, <emu-val>"numeric"</emu-val></td>
        </tr>
        <tr>
          <td>[[DayPeriod]]</td>
          <td><emu-val>"dayPeriod"</emu-val></td>
          <td><emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val></td>
        </tr>
        <tr>
          <td>[[Hour]]</td>
          <td><emu-val>"hour"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>, <emu-val>"numeric"</emu-val></td>
        </tr>
        <tr>
          <td>[[Minute]]</td>
          <td><emu-val>"minute"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>, <emu-val>"numeric"</emu-val></td>
        </tr>
        <tr>
          <td>[[Second]]</td>
          <td><emu-val>"second"</emu-val></td>
          <td><emu-val>"2-digit"</emu-val>, <emu-val>"numeric"</emu-val></td>
        </tr>
        <tr>
          <td>[[FractionalSecondDigits]]</td>
          <td><emu-val>"fractionalSecondDigits"</emu-val></td>
          <td><emu-val>1</emu-val><sub>𝔽</sub>, <emu-val>2</emu-val><sub>𝔽</sub>, <emu-val>3</emu-val><sub>𝔽</sub></td>
        </tr>
        <tr>
          <td>[[TimeZoneName]]</td>
          <td><emu-val>"timeZoneName"</emu-val></td>
          <td><emu-val>"short"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"shortOffset"</emu-val>, <emu-val>"longOffset"</emu-val>, <emu-val>"shortGeneric"</emu-val>, <emu-val>"longGeneric"</emu-val></td>
        </tr>
      </tbody></table>
    </figure></emu-table>

    <emu-clause id="sec-todatetimeoptions" aoid="ToDateTimeOptions">
      <h1><span class="secnum">11.5.1</span> ToDateTimeOptions ( <var>options</var>, <var>required</var>, <var>defaults</var> )</h1>

      <p>
        When the ToDateTimeOptions abstract operation is called with arguments <var>options</var>, <var>required</var>, and <var>defaults</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If <var>options</var> is <emu-val>undefined</emu-val>, let <var>options</var> be <emu-val>null</emu-val>; otherwise let <var>options</var> be ?&nbsp;<emu-xref aoid="ToObject" id="_ref_358"><a href="https://tc39.es/ecma262/#sec-toobject">ToObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>options</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<var>options</var>).</li><li>Let <var>needDefaults</var> be <emu-val>true</emu-val>.</li><li>If <var>required</var> is <emu-val>"date"</emu-val> or <emu-val>"any"</emu-val>, then<ol><li>For each <emu-xref href="#property-name"><a href="https://tc39.es/ecma262/#property-name">property name</a></emu-xref> <var>prop</var> of « <emu-val>"weekday"</emu-val>, <emu-val>"year"</emu-val>, <emu-val>"month"</emu-val>, <emu-val>"day"</emu-val> », do<ol><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_359"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <var>prop</var>).</li><li>If <var>value</var> is not <emu-val>undefined</emu-val>, let <var>needDefaults</var> be <emu-val>false</emu-val>.</li></ol></li></ol></li><li>If <var>required</var> is <emu-val>"time"</emu-val> or <emu-val>"any"</emu-val>, then<ol><li>For each <emu-xref href="#property-name"><a href="https://tc39.es/ecma262/#property-name">property name</a></emu-xref> <var>prop</var> of « <emu-val>"dayPeriod"</emu-val>, <emu-val>"hour"</emu-val>, <emu-val>"minute"</emu-val>, <emu-val>"second"</emu-val>, <emu-val>"fractionalSecondDigits"</emu-val> », do<ol><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_360"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <var>prop</var>).</li><li>If <var>value</var> is not <emu-val>undefined</emu-val>, let <var>needDefaults</var> be <emu-val>false</emu-val>.</li></ol></li></ol></li><li>Let <var>dateStyle</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_361"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"dateStyle"</emu-val>).</li><li>Let <var>timeStyle</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_362"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"timeStyle"</emu-val>).</li><li>If <var>dateStyle</var> is not <emu-val>undefined</emu-val> or <var>timeStyle</var> is not <emu-val>undefined</emu-val>, let <var>needDefaults</var> be <emu-val>false</emu-val>.</li><li>If <var>required</var> is <emu-val>"date"</emu-val> and <var>timeStyle</var> is not <emu-val>undefined</emu-val>, then<ol><li>Throw a <emu-val>TypeError</emu-val> exception.</li></ol></li><li>If <var>required</var> is <emu-val>"time"</emu-val> and <var>dateStyle</var> is not <emu-val>undefined</emu-val>, then<ol><li>Throw a <emu-val>TypeError</emu-val> exception.</li></ol></li><li>If <var>needDefaults</var> is <emu-val>true</emu-val> and <var>defaults</var> is either <emu-val>"date"</emu-val> or <emu-val>"all"</emu-val>, then<ol><li>For each <emu-xref href="#property-name"><a href="https://tc39.es/ecma262/#property-name">property name</a></emu-xref> <var>prop</var> of « <emu-val>"year"</emu-val>, <emu-val>"month"</emu-val>, <emu-val>"day"</emu-val> », do<ol><li>Perform ?&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_363"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>prop</var>, <emu-val>"numeric"</emu-val>).</li></ol></li></ol></li><li>If <var>needDefaults</var> is <emu-val>true</emu-val> and <var>defaults</var> is either <emu-val>"time"</emu-val> or <emu-val>"all"</emu-val>, then<ol><li>For each <emu-xref href="#property-name"><a href="https://tc39.es/ecma262/#property-name">property name</a></emu-xref> <var>prop</var> of « <emu-val>"hour"</emu-val>, <emu-val>"minute"</emu-val>, <emu-val>"second"</emu-val> », do<ol><li>Perform ?&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_364"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>prop</var>, <emu-val>"numeric"</emu-val>).</li></ol></li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-date-time-style-format" aoid="DateTimeStyleFormat">
      <h1><span class="secnum">11.5.2</span> DateTimeStyleFormat ( <var>dateStyle</var>, <var>timeStyle</var>, <var>styles</var> )</h1>
      <p>The DateTimeStyleFormat abstract operation accepts arguments <var>dateStyle</var> and <var>timeStyle</var>, which are each either <emu-val>undefined</emu-val>, <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, or <emu-val>"short"</emu-val>, at least one of which is not <emu-val>undefined</emu-val>, and <var>styles</var>, which is a record from <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_365"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>.[[LocaleData]].[[&lt;<var>locale</var>&gt;]].[[styles]].[[&lt;<var>calendar</var>&gt;]] for some locale <var>locale</var> and calendar <var>calendar</var>. It returns the appropriate format record for date time formatting based on the parameters.</p>
      <emu-alg><ol><li>If <var>timeStyle</var> is not <emu-val>undefined</emu-val>, then<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>timeStyle</var> is one of <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, or <emu-val>"short"</emu-val>.</li><li>Let <var>timeFormat</var> be <var>styles</var>.[[TimeFormat]].[[&lt;<var>timeStyle</var>&gt;]].</li></ol></li><li>If <var>dateStyle</var> is not <emu-val>undefined</emu-val>, then<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>dateStyle</var> is one of <emu-val>"full"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"medium"</emu-val>, or <emu-val>"short"</emu-val>.</li><li>Let <var>dateFormat</var> be <var>styles</var>.[[DateFormat]].[[&lt;<var>dateStyle</var>&gt;]].</li></ol></li><li>If <var>dateStyle</var> is not <emu-val>undefined</emu-val> and <var>timeStyle</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>format</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Add to <var>format</var> all fields from <var>dateFormat</var> except [[pattern]] and [[rangePatterns]].</li><li>Add to <var>format</var> all fields from <var>timeFormat</var> except [[pattern]], [[rangePatterns]], [[pattern12]], and [[rangePatterns12]], if present.</li><li>Let <var>connector</var> be <var>styles</var>.[[DateTimeFormat]].[[&lt;<var>dateStyle</var>&gt;]].</li><li>Let <var>pattern</var> be the string <var>connector</var> with the substring <emu-val>"{0}"</emu-val> replaced with <var>timeFormat</var>.[[pattern]] and the substring <emu-val>"{1}"</emu-val> replaced with <var>dateFormat</var>.[[pattern]].</li><li>Set <var>format</var>.[[pattern]] to <var>pattern</var>.</li><li>If <var>timeFormat</var> has a [[pattern12]] field, then<ol><li>Let <var>pattern12</var> be the string <var>connector</var> with the substring <emu-val>"{0}"</emu-val> replaced with <var>timeFormat</var>.[[pattern12]] and the substring <emu-val>"{1}"</emu-val> replaced with <var>dateFormat</var>.[[pattern]].</li><li>Set <var>format</var>.[[pattern12]] to <var>pattern12</var>.</li></ol></li><li>Let <var>dateTimeRangeFormat</var> be <var>styles</var>.[[DateTimeRangeFormat]].[[&lt;<var>dateStyle</var>&gt;]].[[&lt;<var>timeStyle</var>&gt;]].</li><li>Set <var>format</var>.[[rangePatterns]] to <var>dateTimeRangeFormat</var>.[[rangePatterns]].</li><li>If <var>dateTimeRangeFormat</var> has a [[rangePatterns12]] field, then<ol><li>Set <var>format</var>.[[rangePatterns12]] to <var>dateTimeRangeFormat</var>.[[rangePatterns12]].</li></ol></li><li>Return <var>format</var>.</li></ol></li><li>If <var>timeStyle</var> is not <emu-val>undefined</emu-val>, then<ol><li>Return <var>timeFormat</var>.</li></ol></li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>dateStyle</var> is not <emu-val>undefined</emu-val>.</li><li>Return <var>dateFormat</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-basicformatmatcher" aoid="BasicFormatMatcher">
      <h1><span class="secnum">11.5.3</span> BasicFormatMatcher ( <var>options</var>, <var>formats</var> )</h1>

      <p>
        When the BasicFormatMatcher abstract operation is called with two arguments <var>options</var> and <var>formats</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>removalPenalty</var> be 120.</li><li>Let <var>additionPenalty</var> be 20.</li><li>Let <var>longLessPenalty</var> be 8.</li><li>Let <var>longMorePenalty</var> be 6.</li><li>Let <var>shortLessPenalty</var> be 6.</li><li>Let <var>shortMorePenalty</var> be 3.</li><li>Let <var>offsetPenalty</var> be 1.</li><li>Let <var>bestScore</var> be -<emu-val>Infinity</emu-val>.</li><li>Let <var>bestFormat</var> be <emu-val>undefined</emu-val>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_366"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>formats</var>) is <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>For each element <var>format</var> of <var>formats</var>, do<ol><li>Let <var>score</var> be 0.</li><li>For each <emu-xref href="#property-name"><a href="https://tc39.es/ecma262/#property-name">property name</a></emu-xref> <var>property</var> shown in <emu-xref href="#table-datetimeformat-components" id="_ref_68"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, do<ol><li>If <var>options</var> has a field [[&lt;<var>property</var>&gt;]], let <var>optionsProp</var> be <var>options</var>.[[&lt;<var>property</var>&gt;]]; else let <var>optionsProp</var> be <emu-val>undefined</emu-val>.</li><li>If <var>format</var> has a field [[&lt;<var>property</var>&gt;]], let <var>formatProp</var> be <var>format</var>.[[&lt;<var>property</var>&gt;]]; else let <var>formatProp</var> be <emu-val>undefined</emu-val>.</li><li>If <var>optionsProp</var> is <emu-val>undefined</emu-val> and <var>formatProp</var> is not <emu-val>undefined</emu-val>, decrease <var>score</var> by <var>additionPenalty</var>.</li><li>Else if <var>optionsProp</var> is not <emu-val>undefined</emu-val> and <var>formatProp</var> is <emu-val>undefined</emu-val>, decrease <var>score</var> by <var>removalPenalty</var>.</li><li>Else if <var>property</var> is <emu-val>"timeZoneName"</emu-val>, then<ol><li>If <var>optionsProp</var> is <emu-val>"short"</emu-val> or <emu-val>"shortGeneric"</emu-val>, then<ol><li>If <var>formatProp</var> is <emu-val>"shortOffset"</emu-val>, decrease <var>score</var> by <var>offsetPenalty</var>.</li><li>Else if <var>formatProp</var> is <emu-val>"longOffset"</emu-val>, decrease <var>score</var> by (<var>offsetPenalty</var> + <var>shortMorePenalty</var>).</li><li>Else if <var>optionsProp</var> is <emu-val>"short"</emu-val> and <var>formatProp</var> is <emu-val>"long"</emu-val>, decrease <var>score</var> by <var>shortMorePenalty</var>.</li><li>Else if <var>optionsProp</var> is <emu-val>"shortGeneric"</emu-val> and <var>formatProp</var> is <emu-val>"longGeneric"</emu-val>, decrease <var>score</var> by <var>shortMorePenalty</var>.</li><li>Else if <var>optionsProp</var> ≠ <var>formatProp</var>, decrease <var>score</var> by <var>removalPenalty</var>.</li></ol></li><li>Else if <var>optionsProp</var> is <emu-val>"shortOffset"</emu-val> and <var>formatProp</var> is <emu-val>"longOffset"</emu-val>, decrease <var>score</var> by <var>shortMorePenalty</var>.</li><li>Else if <var>optionsProp</var> is <emu-val>"long"</emu-val> or <emu-val>"longGeneric"</emu-val>, then<ol><li>If <var>formatProp</var> is <emu-val>"longOffset"</emu-val>, decrease <var>score</var> by <var>offsetPenalty</var>.</li><li>Else if <var>formatProp</var> is <emu-val>"shortOffset"</emu-val>, decrease <var>score</var> by (<var>offsetPenalty</var> + <var>longLessPenalty</var>).</li><li>Else if <var>optionsProp</var> is <emu-val>"long"</emu-val> and <var>formatProp</var> is <emu-val>"short"</emu-val>, decrease <var>score</var> by <var>longLessPenalty</var>.</li><li>Else if <var>optionsProp</var> is <emu-val>"longGeneric"</emu-val> and <var>formatProp</var> is <emu-val>"shortGeneric"</emu-val>, decrease <var>score</var> by <var>longLessPenalty</var>.</li><li>Else if <var>optionsProp</var> ≠ <var>formatProp</var>, decrease <var>score</var> by <var>removalPenalty</var>.</li></ol></li><li>Else if <var>optionsProp</var> is <emu-val>"longOffset"</emu-val> and <var>formatProp</var> is <emu-val>"shortOffset"</emu-val>, decrease <var>score</var> by <var>longLessPenalty</var>.</li><li>Else if <var>optionsProp</var> ≠ <var>formatProp</var>, decrease <var>score</var> by <var>removalPenalty</var>.</li></ol></li><li>Else if <var>optionsProp</var> ≠ <var>formatProp</var>, then<ol><li>If <var>property</var> is <emu-val>"fractionalSecondDigits"</emu-val>, then<ol><li>Let <var>values</var> be « <emu-val>1</emu-val><sub>𝔽</sub>, <emu-val>2</emu-val><sub>𝔽</sub>, <emu-val>3</emu-val><sub>𝔽</sub> ».</li></ol></li><li>Else,<ol><li>Let <var>values</var> be « <emu-val>"2-digit"</emu-val>, <emu-val>"numeric"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val> ».</li></ol></li><li>Let <var>optionsPropIndex</var> be the index of <var>optionsProp</var> within <var>values</var>.</li><li>Let <var>formatPropIndex</var> be the index of <var>formatProp</var> within <var>values</var>.</li><li>Let <var>delta</var> be <emu-xref aoid="max"><a href="https://tc39.es/ecma262/#eqn-max">max</a></emu-xref>(<emu-xref aoid="min"><a href="https://tc39.es/ecma262/#eqn-min">min</a></emu-xref>(<var>formatPropIndex</var> - <var>optionsPropIndex</var>, 2), -2).</li><li>If <var>delta</var> = 2, decrease <var>score</var> by <var>longMorePenalty</var>.</li><li>Else if <var>delta</var> = 1, decrease <var>score</var> by <var>shortMorePenalty</var>.</li><li>Else if <var>delta</var> = -1, decrease <var>score</var> by <var>shortLessPenalty</var>.</li><li>Else if <var>delta</var> = -2, decrease <var>score</var> by <var>longLessPenalty</var>.</li></ol></li></ol></li><li>If <var>score</var> &gt; <var>bestScore</var>, then<ol><li>Let <var>bestScore</var> be <var>score</var>.</li><li>Let <var>bestFormat</var> be <var>format</var>.</li></ol></li></ol></li><li>Return <var>bestFormat</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-bestfitformatmatcher" aoid="BestFitFormatMatcher">
      <h1><span class="secnum">11.5.4</span> BestFitFormatMatcher ( <var>options</var>, <var>formats</var> )</h1>

      <p>
        When the BestFitFormatMatcher abstract operation is called with two arguments <var>options</var> and <var>formats</var>, it performs implementation dependent steps, which should return a set of component representations that a typical user of the selected locale would perceive as at least as good as the one returned by <emu-xref aoid="BasicFormatMatcher" id="_ref_367"><a href="#sec-basicformatmatcher">BasicFormatMatcher</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-datetime-format-functions">
      <h1><span class="secnum">11.5.5</span> DateTime Format Functions</h1>

      <p>A DateTime format function is an anonymous built-in function that has a [[DateTimeFormat]] internal slot.</p>
      <p>When a DateTime format function <var>F</var> is called with optional argument <var>date</var>, the following steps are taken:</p>

      <emu-alg><ol><li>Let <var>dtf</var> be <var>F</var>.[[DateTimeFormat]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_368"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>dtf</var>) is Object and <var>dtf</var> has an [[InitializedDateTimeFormat]] internal slot.</li><li>If <var>date</var> is not provided or is <emu-val>undefined</emu-val>, then<ol><li>Let <var>x</var> be <emu-xref aoid="Call" id="_ref_369"><a href="https://tc39.es/ecma262/#sec-call">Call</a></emu-xref>(%Date.now%, <emu-val>undefined</emu-val>).</li></ol></li><li>Else,<ol><li>Let <var>x</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_370"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>date</var>).</li></ol></li><li>Return ?&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_371"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>dtf</var>, <var>x</var>).</li></ol></emu-alg>

      <p>
        The <emu-val>"length"</emu-val> property of a DateTime format function is 1.
      </p>
    </emu-clause>

    <emu-clause id="sec-formatdatetimepattern" aoid="FormatDateTimePattern">
      <h1><span class="secnum">11.5.6</span> FormatDateTimePattern ( <var>dateTimeFormat</var>, <var>patternParts</var>, <var>x</var>, <var>rangeFormatOptions</var> )</h1>

      <p>
        The FormatDateTimePattern abstract operation is called with arguments <var>dateTimeFormat</var> (which must be an object initialized as a DateTimeFormat), <var>patternParts</var> (which is a list of Records as returned by <emu-xref aoid="PartitionPattern" id="_ref_372"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>), <var>x</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), and <var>rangeFormatOptions</var> (which is a range pattern <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> as used in [[rangePattern]] or <emu-val>undefined</emu-val>), interprets <var>x</var> as a <emu-xref href="#sec-time-values-and-time-range"><a href="https://tc39.es/ecma262/#sec-time-values-and-time-range">time value</a></emu-xref> as specified in es2022, <emu-xref href="#sec-time-values-and-time-range"><a href="https://tc39.es/ecma262/#sec-time-values-and-time-range">20.4.1.1</a></emu-xref>, and creates the corresponding parts according <var>pattern</var> and to the effective locale and the formatting options of <var>dateTimeFormat</var> and <var>rangeFormatOptions</var>. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>x</var> be <emu-xref aoid="TimeClip" id="_ref_373"><a href="https://tc39.es/ecma262/#sec-timeclip">TimeClip</a></emu-xref>(<var>x</var>).</li><li>If <var>x</var> is <emu-val>NaN</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>locale</var> be <var>dateTimeFormat</var>.[[Locale]].</li><li>Let <var>nfOptions</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_374"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nfOptions</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>).</li><li>Let <var>nf</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_375"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_376"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, « <var>locale</var>, <var>nfOptions</var> »).</li><li>Let <var>nf2Options</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_377"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf2Options</var>, <emu-val>"minimumIntegerDigits"</emu-val>, 2).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_378"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf2Options</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>).</li><li>Let <var>nf2</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_379"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_380"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, « <var>locale</var>, <var>nf2Options</var> »).</li><li>Let <var>fractionalSecondDigits</var> be <var>dateTimeFormat</var>.[[FractionalSecondDigits]].</li><li>If <var>fractionalSecondDigits</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>nf3Options</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-val>null</emu-val>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_381"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf3Options</var>, <emu-val>"minimumIntegerDigits"</emu-val>, <var>fractionalSecondDigits</var>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_382"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>nf3Options</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>false</emu-val>).</li><li>Let <var>nf3</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_383"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_384"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, « <var>locale</var>, <var>nf3Options</var> »).</li></ol></li><li>Let <var>tm</var> be <emu-xref aoid="ToLocalTime" id="_ref_385"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref>(<var>x</var>, <var>dateTimeFormat</var>.[[Calendar]], <var>dateTimeFormat</var>.[[TimeZone]]).</li><li>Let <var>result</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>patternPart</var> in <var>patternParts</var>, do<ol><li>Let <var>p</var> be <var>patternPart</var>.[[Type]].</li><li>If <var>p</var> is <emu-val>"literal"</emu-val>, then<ol><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>patternPart</var>.[[Value]] } as the last element of the list <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"fractionalSecondDigits"</emu-val>, then<ol><li>Let <var>v</var> be <var>tm</var>.[[Millisecond]].</li><li>Let <var>v</var> be <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>v</var> × 10<sup>( <var>fractionalSecondDigits</var> - 3 )</sup>).</li><li>Let <var>fv</var> be <emu-xref aoid="FormatNumeric" id="_ref_386"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf3</var>, <var>v</var>).</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"fractionalSecond"</emu-val>, [[Value]]: <var>fv</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"dayPeriod"</emu-val>, then<ol><li>Let <var>f</var> be the value of <var>dateTimeFormat</var>'s internal slot whose name is the Internal Slot column of the matching row.</li><li>Let <var>fv</var> be a String value representing the day period of <var>tm</var> in the form given by <var>f</var>; the String value depends upon the implementation and the effective locale of <var>dateTimeFormat</var>.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <var>p</var>, [[Value]]: <var>fv</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"timeZoneName"</emu-val>, then<ol><li>Let <var>f</var> be <var>dateTimeFormat</var>.[[TimeZoneName]].</li><li>Let <var>v</var> be <var>dateTimeFormat</var>.[[TimeZone]].</li><li>Let <var>fv</var> be a String value representing <var>v</var> in the form given by <var>f</var>; the String value depends upon the implementation and the effective locale of <var>dateTimeFormat</var>. The String value may also depend on the value of the [[InDST]] field of <var>tm</var> if <var>f</var> is <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val>, <emu-val>"shortOffset"</emu-val>, or <emu-val>"longOffset"</emu-val>. If the implementation does not have a localized representation of <var>f</var>, then use the String value of <var>v</var> itself.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <var>p</var>, [[Value]]: <var>fv</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Else if <var>p</var> matches a Property column of the row in <emu-xref href="#table-datetimeformat-components" id="_ref_69"><a href="#table-datetimeformat-components">Table 6</a></emu-xref>, then<ol><li>If <var>rangeFormatOptions</var> is not <emu-val>undefined</emu-val>, let <var>f</var> be the value of <var>rangeFormatOptions</var>'s field whose name matches <var>p</var>.</li><li>Else, let <var>f</var> be the value of <var>dateTimeFormat</var>'s internal slot whose name is the Internal Slot column of the matching row.</li><li>Let <var>v</var> be the value of <var>tm</var>'s field whose name is the Internal Slot column of the matching row.</li><li>If <var>p</var> is <emu-val>"year"</emu-val> and <var>v</var> ≤ 0, let <var>v</var> be 1 - <var>v</var>.</li><li>If <var>p</var> is <emu-val>"month"</emu-val>, increase <var>v</var> by 1.</li><li>If <var>p</var> is <emu-val>"hour"</emu-val> and <var>dateTimeFormat</var>.[[HourCycle]] is <emu-val>"h11"</emu-val> or <emu-val>"h12"</emu-val>, then<ol><li>Let <var>v</var> be <var>v</var> <emu-xref aoid="modulo"><a href="https://tc39.es/ecma262/#eqn-modulo">modulo</a></emu-xref> 12.</li><li>If <var>v</var> is 0 and <var>dateTimeFormat</var>.[[HourCycle]] is <emu-val>"h12"</emu-val>, let <var>v</var> be 12.</li></ol></li><li>If <var>p</var> is <emu-val>"hour"</emu-val> and <var>dateTimeFormat</var>.[[HourCycle]] is <emu-val>"h24"</emu-val>, then<ol><li>If <var>v</var> is 0, let <var>v</var> be 24.</li></ol></li><li>If <var>f</var> is <emu-val>"numeric"</emu-val>, then<ol><li>Let <var>fv</var> be <emu-xref aoid="FormatNumeric" id="_ref_387"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf</var>, <var>v</var>).</li></ol></li><li>Else if <var>f</var> is <emu-val>"2-digit"</emu-val>, then<ol><li>Let <var>fv</var> be <emu-xref aoid="FormatNumeric" id="_ref_388"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf2</var>, <var>v</var>).</li><li>If the <emu-val>"length"</emu-val> property of <var>fv</var> is greater than 2, let <var>fv</var> be the substring of <var>fv</var> containing the last two characters.</li></ol></li><li>Else if <var>f</var> is <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, or <emu-val>"long"</emu-val>, then let <var>fv</var> be a String value representing <var>v</var> in the form given by <var>f</var>; the String value depends upon the implementation and the effective locale and calendar of <var>dateTimeFormat</var>. If <var>p</var> is <emu-val>"month"</emu-val> and <var>rangeFormatOptions</var> is <emu-val>undefined</emu-val>, then the String value may also depend on whether <var>dateTimeFormat</var>.[[Day]] is <emu-val>undefined</emu-val>. If <var>p</var> is <emu-val>"month"</emu-val> and <var>rangeFormatOptions</var> is not <emu-val>undefined</emu-val>, then the String value may also depend on whether <var>rangeFormatOptions</var>.[[day]] is <emu-val>undefined</emu-val>. If <var>p</var> is <emu-val>"era"</emu-val> and <var>rangeFormatOptions</var> is <emu-val>undefined</emu-val>, then the String value may also depend on whether <var>dateTimeFormat</var>.[[Era]] is <emu-val>undefined</emu-val>. If <var>p</var> is <emu-val>"era"</emu-val> and <var>rangeFormatOptions</var> is not <emu-val>undefined</emu-val>, then the String value may also depend on whether <var>rangeFormatOptions</var>.[[era]] is <emu-val>undefined</emu-val>. If the implementation does not have a localized representation of <var>f</var>, then use the String value of <var>v</var> itself.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <var>p</var>, [[Value]]: <var>fv</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"ampm"</emu-val>, then<ol><li>Let <var>v</var> be <var>tm</var>.[[Hour]].</li><li>If <var>v</var> is greater than 11, then<ol><li>Let <var>fv</var> be an implementation and locale dependent String value representing <emu-val>"post meridiem"</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>fv</var> be an implementation and locale dependent String value representing <emu-val>"ante meridiem"</emu-val>.</li></ol></li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"dayPeriod"</emu-val>, [[Value]]: <var>fv</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"relatedYear"</emu-val>, then<ol><li>Let <var>v</var> be <var>tm</var>.[[RelatedYear]].</li><li>Let <var>fv</var> be <emu-xref aoid="FormatNumeric" id="_ref_389"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf</var>, <var>v</var>).</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"relatedYear"</emu-val>, [[Value]]: <var>fv</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"yearName"</emu-val>, then<ol><li>Let <var>v</var> be <var>tm</var>.[[YearName]].</li><li>Let <var>fv</var> be an implementation and locale dependent String value representing <var>v</var>.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"yearName"</emu-val>, [[Value]]: <var>fv</var> } as the last element of the list <var>result</var>.</li></ol></li><li>Else,<ol><li>Let <var>unknown</var> be an implementation-, locale-, and numbering system-dependent String based on <var>x</var> and <var>p</var>.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"unknown"</emu-val>, [[Value]]: <var>unknown</var> } as the last element of <var>result</var>.</li></ol></li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        It is recommended that implementations use the locale and calendar dependent strings provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>), and use CLDR <emu-val>"abbreviated"</emu-val> strings for DateTimeFormat <emu-val>"short"</emu-val> strings, and CLDR <emu-val>"wide"</emu-val> strings for DateTimeFormat <emu-val>"long"</emu-val> strings.
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        It is recommended that implementations use the time zone information of the IANA Time Zone Database.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-partitiondatetimepattern" aoid="PartitionDateTimePattern">
      <h1><span class="secnum">11.5.7</span> PartitionDateTimePattern ( <var>dateTimeFormat</var>, <var>x</var> )</h1>

      <p>
        The PartitionDateTimePattern abstract operation is called with arguments <var>dateTimeFormat</var> (which must be an object initialized as a DateTimeFormat) and <var>x</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), interprets <var>x</var> as a <emu-xref href="#sec-time-values-and-time-range"><a href="https://tc39.es/ecma262/#sec-time-values-and-time-range">time value</a></emu-xref> as specified in es2022, <emu-xref href="#sec-time-values-and-time-range"><a href="https://tc39.es/ecma262/#sec-time-values-and-time-range">20.4.1.1</a></emu-xref>, and creates the corresponding parts according to the effective locale and the formatting options of <var>dateTimeFormat</var>. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>patternParts</var> be <emu-xref aoid="PartitionPattern" id="_ref_390"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>dateTimeFormat</var>.[[Pattern]]).</li><li>Let <var>result</var> be ?&nbsp;<emu-xref aoid="FormatDateTimePattern" id="_ref_391"><a href="#sec-formatdatetimepattern">FormatDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>patternParts</var>, <var>x</var>, <emu-val>undefined</emu-val>).</li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetime" aoid="FormatDateTime">
      <h1><span class="secnum">11.5.8</span> FormatDateTime ( <var>dateTimeFormat</var>, <var>x</var> )</h1>

      <p>
        The FormatDateTime abstract operation is called with arguments <var>dateTimeFormat</var> (which must be an object initialized as a DateTimeFormat) and <var>x</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionDateTimePattern" id="_ref_392"><a href="#sec-partitiondatetimepattern">PartitionDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>).</li><li>Let <var>result</var> be the empty String.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>part</var> in <var>parts</var>, do<ol><li>Set <var>result</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>result</var> and <var>part</var>.[[Value]].</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetimetoparts" aoid="FormatDateTimeToParts">
      <h1><span class="secnum">11.5.9</span> FormatDateTimeToParts ( <var>dateTimeFormat</var>, <var>x</var> )</h1>

      <p>
        The FormatDateTimeToParts abstract operation is called with arguments <var>dateTimeFormat</var> (which must be an object initialized as a DateTimeFormat) and <var>x</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionDateTimePattern" id="_ref_393"><a href="#sec-partitiondatetimepattern">PartitionDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>).</li><li>Let <var>result</var> be <emu-xref aoid="ArrayCreate" id="_ref_394"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0).</li><li>Let <var>n</var> be 0.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>part</var> in <var>parts</var>, do<ol><li>Let <var>O</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_395"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.[[Type]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_396"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.[[Value]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_397"><a href="https://tc39.es/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString" id="_ref_398"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>n</var>), <var>O</var>).</li><li>Increment <var>n</var> by 1.</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitiondatetimerangepattern" aoid="PartitionDateTimeRangePattern">
      <h1><span class="secnum">11.5.10</span> PartitionDateTimeRangePattern ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</h1>

      <p>
        The PartitionDateTimeRangePattern abstract operation is called with arguments <var>dateTimeFormat</var> (which must be an object initialized as a DateTimeFormat), <var>x</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>) and <var>y</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), interprets <var>x</var> and <var>y</var> as time values as specified in es2022, <emu-xref href="#sec-time-values-and-time-range"><a href="https://tc39.es/ecma262/#sec-time-values-and-time-range">20.4.1.1</a></emu-xref>, and creates the corresponding parts according to the effective locale and the formatting options of <var>dateTimeFormat</var>. The following steps are taken:
      </p>
      <emu-alg><ol><li>Let <var>x</var> be <emu-xref aoid="TimeClip" id="_ref_399"><a href="https://tc39.es/ecma262/#sec-timeclip">TimeClip</a></emu-xref>(<var>x</var>).</li><li>If <var>x</var> is <emu-val>NaN</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>y</var> be <emu-xref aoid="TimeClip" id="_ref_400"><a href="https://tc39.es/ecma262/#sec-timeclip">TimeClip</a></emu-xref>(<var>y</var>).</li><li>If <var>y</var> is <emu-val>NaN</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>If <var>x</var> is greater than <var>y</var>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>tm1</var> be <emu-xref aoid="ToLocalTime" id="_ref_401"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref>(<var>x</var>, <var>dateTimeFormat</var>.[[Calendar]], <var>dateTimeFormat</var>.[[TimeZone]]).</li><li>Let <var>tm2</var> be <emu-xref aoid="ToLocalTime" id="_ref_402"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref>(<var>y</var>, <var>dateTimeFormat</var>.[[Calendar]], <var>dateTimeFormat</var>.[[TimeZone]]).</li><li>Let <var>rangePatterns</var> be <var>dateTimeFormat</var>.[[RangePatterns]].</li><li>Let <var>rangePattern</var> be <emu-val>undefined</emu-val>.</li><li>Let <var>dateFieldsPracticallyEqual</var> be <emu-val>true</emu-val>.</li><li>Let <var>patternContainsLargerDateField</var> be <emu-val>false</emu-val>.</li><li>While <var>dateFieldsPracticallyEqual</var> is <emu-val>true</emu-val> and <var>patternContainsLargerDateField</var> is <emu-val>false</emu-val>, repeat for each row of <emu-xref href="#table-datetimeformat-rangepatternfields" id="_ref_70"><a href="#table-datetimeformat-rangepatternfields">Table 4</a></emu-xref> in order, except the header row:<ol><li>Let <var>fieldName</var> be the name given in the Range Pattern Field column of the row.</li><li>If <var>rangePatterns</var> has a field [[&lt;<var>fieldName</var>&gt;]], let <var>rp</var> be <var>rangePatterns</var>.[[&lt;<var>fieldName</var>&gt;]]; else let <var>rp</var> be <emu-val>undefined</emu-val>.</li><li>If <var>rangePattern</var> is not <emu-val>undefined</emu-val> and <var>rp</var> is <emu-val>undefined</emu-val>, then<ol><li>Set <var>patternContainsLargerDateField</var> to <emu-val>true</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>rangePattern</var> be <var>rp</var>.</li><li>If <var>fieldName</var> is equal to [[AmPm]], then<ol><li>Let <var>v1</var> be <var>tm1</var>.[[Hour]].</li><li>Let <var>v2</var> be <var>tm2</var>.[[Hour]].</li><li>If <var>v1</var> is greater than 11 and <var>v2</var> less or equal than 11, or <var>v1</var> is less or equal than 11 and <var>v2</var> is greater than 11, then<ol><li>Set <var>dateFieldsPracticallyEqual</var> to <emu-val>false</emu-val>.</li></ol></li></ol></li><li>Else if <var>fieldName</var> is equal to [[DayPeriod]], then<ol><li>Let <var>v1</var> be a String value representing the day period of <var>tm1</var>; the String value depends upon the implementation and the effective locale of <var>dateTimeFormat</var>.</li><li>Let <var>v2</var> be a String value representing the day period of <var>tm2</var>; the String value depends upon the implementation and the effective locale of <var>dateTimeFormat</var>.</li><li>If <var>v1</var> is not equal to <var>v2</var>, then<ol><li>Set <var>dateFieldsPracticallyEqual</var> to <emu-val>false</emu-val>.</li></ol></li></ol></li><li>Else if <var>fieldName</var> is equal to [[FractionalSecondDigits]], then<ol><li>Let <var>fractionalSecondDigits</var> be <var>dateTimeFormat</var>.[[FractionalSecondDigits]].</li><li>If <var>fractionalSecondDigits</var> is <emu-val>undefined</emu-val>, then<ol><li>Set <var>fractionalSecondDigits</var> to 3.</li></ol></li><li>Let <var>v1</var> be <var>tm1</var>.[[Millisecond]].</li><li>Let <var>v2</var> be <var>tm2</var>.[[Millisecond]].</li><li>Let <var>v1</var> be <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>v1</var> × 10<sup>( <var>fractionalSecondDigits</var> - 3 )</sup>).</li><li>Let <var>v2</var> be <emu-xref aoid="floor"><a href="https://tc39.es/ecma262/#eqn-floor">floor</a></emu-xref>(<var>v2</var> × 10<sup>( <var>fractionalSecondDigits</var> - 3 )</sup>).</li><li>If <var>v1</var> is not equal to <var>v2</var>, then<ol><li>Set <var>dateFieldsPracticallyEqual</var> to <emu-val>false</emu-val>.</li></ol></li></ol></li><li>Else,<ol><li>Let <var>v1</var> be <var>tm1</var>.[[&lt;<var>fieldName</var>&gt;]].</li><li>Let <var>v2</var> be <var>tm2</var>.[[&lt;<var>fieldName</var>&gt;]].</li><li>If <var>v1</var> is not equal to <var>v2</var>, then<ol><li>Set <var>dateFieldsPracticallyEqual</var> to <emu-val>false</emu-val>.</li></ol></li></ol></li></ol></li></ol></li><li>If <var>dateFieldsPracticallyEqual</var> is <emu-val>true</emu-val>, then<ol><li>Let <var>pattern</var> be <var>dateTimeFormat</var>.[[Pattern]].</li><li>Let <var>patternParts</var> be <emu-xref aoid="PartitionPattern" id="_ref_403"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>).</li><li>Let <var>result</var> be ?&nbsp;<emu-xref aoid="FormatDateTimePattern" id="_ref_404"><a href="#sec-formatdatetimepattern">FormatDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>patternParts</var>, <var>x</var>, <emu-val>undefined</emu-val>).</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>r</var> in <var>result</var>, do<ol><li>Set <var>r</var>.[[Source]] to <emu-val>"shared"</emu-val>.</li></ol></li><li>Return <var>result</var>.</li></ol></li><li>Let <var>result</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <var>rangePattern</var> is <emu-val>undefined</emu-val>, then<ol><li>Let <var>rangePattern</var> be <var>rangePatterns</var>.[[Default]].</li></ol></li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Pattern]], [[Source]] } <var>rangePatternPart</var> in <var>rangePattern</var>.[[PatternParts]], do<ol><li>Let <var>pattern</var> be <var>rangePatternPart</var>.[[Pattern]].</li><li>Let <var>source</var> be <var>rangePatternPart</var>.[[Source]].</li><li>If <var>source</var> is <emu-val>"startRange"</emu-val> or <emu-val>"shared"</emu-val>, then<ol><li>Let <var>z</var> be <var>x</var>.</li></ol></li><li>Else,<ol><li>Let <var>z</var> be <var>y</var>.</li></ol></li><li>Let <var>patternParts</var> be <emu-xref aoid="PartitionPattern" id="_ref_405"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>).</li><li>Let <var>partResult</var> be ?&nbsp;<emu-xref aoid="FormatDateTimePattern" id="_ref_406"><a href="#sec-formatdatetimepattern">FormatDateTimePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>patternParts</var>, <var>z</var>, <var>rangePattern</var>).</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>r</var> in <var>partResult</var>, do<ol><li>Set <var>r</var>.[[Source]] to <var>source</var>.</li></ol></li><li>Add all elements in <var>partResult</var> to <var>result</var> in order.</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetimerange" aoid="FormatDateTimeRange">
      <h1><span class="secnum">11.5.11</span> FormatDateTimeRange ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</h1>

      <p>
        The FormatDateTimeRange abstract operation is called with arguments <var>dateTimeFormat</var> (which must be an object initialized as a DateTimeFormat), <var>x</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>) and <var>y</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionDateTimeRangePattern" id="_ref_407"><a href="#sec-partitiondatetimerangepattern">PartitionDateTimeRangePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>, <var>y</var>).</li><li>Let <var>result</var> be the empty String.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]], [[Source]] } <var>part</var> in <var>parts</var>, do<ol><li>Set <var>result</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>result</var> and <var>part</var>.[[Value]].</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatdatetimerangetoparts" aoid="FormatDateTimeRangeToParts">
      <h1><span class="secnum">11.5.12</span> FormatDateTimeRangeToParts ( <var>dateTimeFormat</var>, <var>x</var>, <var>y</var> )</h1>

      <p>
        The FormatDateTimeRangeToParts abstract operation is called with arguments <var>dateTimeFormat</var> (which must be an object initialized as a DateTimeFormat), <var>x</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>) and <var>y</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionDateTimeRangePattern" id="_ref_408"><a href="#sec-partitiondatetimerangepattern">PartitionDateTimeRangePattern</a></emu-xref>(<var>dateTimeFormat</var>, <var>x</var>, <var>y</var>).</li><li>Let <var>result</var> be <emu-xref aoid="ArrayCreate" id="_ref_409"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0).</li><li>Let <var>n</var> be 0.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]], [[Source]] } <var>part</var> in <var>parts</var>, do<ol><li>Let <var>O</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%ObjectPrototype%</a></emu-xref>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_410"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.[[Type]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_411"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.[[Value]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_412"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"source"</emu-val>, <var>part</var>.[[Source]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_413"><a href="https://tc39.es/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString" id="_ref_414"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>n</var>), <var>O</var>).</li><li>Increment <var>n</var> by 1.</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-tolocaltime" aoid="ToLocalTime">
      <h1><span class="secnum">11.5.13</span> ToLocalTime ( <var>t</var>, <var>calendar</var>, <var>timeZone</var> )</h1>

      <p>
        When the ToLocalTime abstract operation is called with arguments <var>t</var>, <var>calendar</var>, and <var>timeZone</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_415"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>t</var>) is Number.</li><li>If <var>calendar</var> is <emu-val>"gregory"</emu-val>, then<ol><li>Let <var>timeZoneOffset</var> be the value calculated according to <emu-xref href="#sec-local-time-zone-adjustment"><a href="https://tc39.es/ecma262/#sec-local-time-zone-adjustment">LocalTZA(<var>t</var>, <emu-val>true</emu-val>)</a></emu-xref> where the local time zone is replaced with timezone <var>timeZone</var>.</li><li>Let <var>tz</var> be the <emu-xref href="#sec-time-values-and-time-range"><a href="https://tc39.es/ecma262/#sec-time-values-and-time-range">time value</a></emu-xref> <var>t</var> + <var>timeZoneOffset</var>.</li><li>Return a record with fields calculated from <var>tz</var> according to <emu-xref href="#table-datetimeformat-tolocaltime-record" id="_ref_71"><a href="#table-datetimeformat-tolocaltime-record">Table 7</a></emu-xref>.</li></ol></li><li>Else,<ol><li>Return a record with the fields of Column 1 of <emu-xref href="#table-datetimeformat-tolocaltime-record" id="_ref_72"><a href="#table-datetimeformat-tolocaltime-record">Table 7</a></emu-xref> calculated from <var>t</var> for the given <var>calendar</var> and <var>timeZone</var>. The calculations should use best available information about the specified <var>calendar</var> and <var>timeZone</var>, including current and historical information about time zone offsets from UTC and daylight saving time rules.</li></ol></li></ol></emu-alg>

      <emu-table id="table-datetimeformat-tolocaltime-record"><figure><figcaption>Table 7: <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> returned by <emu-xref aoid="ToLocalTime" id="_ref_416"><a href="#sec-tolocaltime">ToLocalTime</a></emu-xref></figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Field</th>
              <th>Value Calculation for Gregorian Calendar</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Weekday]]</td>
            <td><code>WeekDay(tz)</code> specified in es2022's <emu-xref href="#sec-week-day"><a href="https://tc39.es/ecma262/#sec-week-day">Week Day</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[Era]]</td>
            <td>Let <code>year</code> be <code>YearFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-year-number"><a href="https://tc39.es/ecma262/#sec-year-number">Year Number</a></emu-xref>. If <code>year</code> is less than 0, return 'BC', else, return 'AD'.</td>
          </tr>
          <tr>
            <td>[[Year]]</td>
            <td><code>YearFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-year-number"><a href="https://tc39.es/ecma262/#sec-year-number">Year Number</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[RelatedYear]]</td>
            <td><emu-val>undefined</emu-val></td>
          </tr>
          <tr>
            <td>[[YearName]]</td>
            <td><emu-val>undefined</emu-val></td>
          </tr>
          <tr>
            <td>[[Month]]</td>
            <td><code>MonthFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-month-number"><a href="https://tc39.es/ecma262/#sec-month-number">Month Number</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[Day]]</td>
            <td><code>DateFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-date-number"><a href="https://tc39.es/ecma262/#sec-date-number">Date Number</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[Hour]]</td>
            <td><code>HourFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-hours-minutes-second-and-milliseconds"><a href="https://tc39.es/ecma262/#sec-hours-minutes-second-and-milliseconds">Hours, Minutes, Second, and Milliseconds</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[Minute]]</td>
            <td><code>MinFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-hours-minutes-second-and-milliseconds"><a href="https://tc39.es/ecma262/#sec-hours-minutes-second-and-milliseconds">Hours, Minutes, Second, and Milliseconds</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[Second]]</td>
            <td><code>SecFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-hours-minutes-second-and-milliseconds"><a href="https://tc39.es/ecma262/#sec-hours-minutes-second-and-milliseconds">Hours, Minutes, Second, and Milliseconds</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[Millisecond]]</td>
            <td><code>msFromTime(tz)</code> specified in es2022's <emu-xref href="#sec-hours-minutes-second-and-milliseconds"><a href="https://tc39.es/ecma262/#sec-hours-minutes-second-and-milliseconds">Hours, Minutes, Second, and Milliseconds</a></emu-xref></td>
          </tr>
          <tr>
            <td>[[InDST]]</td>
            <td>Calculate <emu-val>true</emu-val> or <emu-val>false</emu-val> using the best available information about the specified <var>calendar</var> and <var>timeZone</var>, including current and historical information about time zone offsets from UTC and daylight saving time rules.</td>
          </tr>
        </tbody></table>
      </figure></emu-table>

      <emu-note><span class="note">Note</span><div class="note-contents">
        It is recommended that implementations use the time zone information of the IANA Time Zone Database.
      </div></emu-note>
    </emu-clause>

    <emu-normative-optional>
    <emu-clause id="sec-unwrapdatetimeformat" aoid="UnwrapDateTimeFormat">
      <h1><span class="secnum">11.5.14</span> UnwrapDateTimeFormat ( <var>dtf</var> )</h1>
      <p>
        The UnwrapDateTimeFormat abstract operation returns the DateTimeFormat instance
        of its input object, which is either the value itself or a value associated
        with it by <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_417"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref> according to the normative optional
        <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_73"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>.
      </p>
      <emu-alg><ol><li>If <emu-xref aoid="Type" id="_ref_418"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>dtf</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>dtf</var> does not have an [[InitializedDateTimeFormat]] internal slot and ?&nbsp;<emu-xref aoid="OrdinaryHasInstance" id="_ref_419"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_420"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>, <var>dtf</var>) is <emu-val>true</emu-val>, then<ol><li>Return ?&nbsp;<emu-xref aoid="Get" id="_ref_421"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>dtf</var>, <emu-xref href="#intl-object" id="_ref_422"><a href="#intl-object">%Intl%</a></emu-xref>.[[FallbackSymbol]]).</li></ol></li><li>Return <var>dtf</var>.</li></ol></emu-alg>
    </emu-clause>
    </emu-normative-optional>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./displaynames.html"><emu-clause id="intl-displaynames-objects">
  <h1><span class="secnum">12</span> DisplayNames Objects</h1>

  <emu-clause id="sec-intl-displaynames-constructor">
    <h1><span class="secnum">12.1</span> The Intl.DisplayNames Constructor</h1>

    <p>
      The DisplayNames <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%DisplayNames%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_423"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_74"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-Intl.DisplayNames">
      <h1><span class="secnum">12.1.1</span> Intl.DisplayNames ( <var>locales</var>, <var>options</var> )</h1>

      <p>
        When the <code>Intl.DisplayNames</code> function is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>displayNames</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_424"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%DisplayNames.prototype%"</emu-val>, « [[InitializedDisplayNames]], [[Locale]], [[Style]], [[Type]], [[Fallback]], [[LanguageDisplay]], [[Fields]] »).</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_425"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>If <var>options</var> is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="GetOptionsObject" id="_ref_426"><a href="#sec-getoptionsobject">GetOptionsObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-displaynames-constructor" id="_ref_427"><a href="#sec-intl-displaynames-constructor">%DisplayNames%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_428"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[localeMatcher]] to <var>matcher</var>.</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_429"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-intl-displaynames-constructor" id="_ref_430"><a href="#sec-intl-displaynames-constructor">%DisplayNames%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <emu-xref href="#sec-intl-displaynames-constructor" id="_ref_431"><a href="#sec-intl-displaynames-constructor">%DisplayNames%</a></emu-xref>.[[RelevantExtensionKeys]]).</li><li>Let <var>style</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_432"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val> », <emu-val>"long"</emu-val>).</li><li>Set <var>displayNames</var>.[[Style]] to <var>style</var>.</li><li>Let <var>type</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_433"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"type"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"language"</emu-val>, <emu-val>"region"</emu-val>, <emu-val>"script"</emu-val>, <emu-val>"currency"</emu-val>, <emu-val>"calendar"</emu-val>, <emu-val>"dateTimeField"</emu-val> », <emu-val>undefined</emu-val>).</li><li>If <var>type</var> is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Set <var>displayNames</var>.[[Type]] to <var>type</var>.</li><li>Let <var>fallback</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_434"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"fallback"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"code"</emu-val>, <emu-val>"none"</emu-val> », <emu-val>"code"</emu-val>).</li><li>Set <var>displayNames</var>.[[Fallback]] to <var>fallback</var>.</li><li>Set <var>displayNames</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Let <var>dataLocale</var> be <var>r</var>.[[dataLocale]].</li><li>Let <var>dataLocaleData</var> be <var>localeData</var>.[[&lt;<var>dataLocale</var>&gt;]].</li><li>Let <var>types</var> be <var>dataLocaleData</var>.[[types]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>types</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> (see <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_75"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>).</li><li>Let <var>languageDisplay</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_435"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"languageDisplay"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"dialect"</emu-val>, <emu-val>"standard"</emu-val> », <emu-val>"dialect"</emu-val>).</li><li>Let <var>typeFields</var> be <var>types</var>.[[&lt;<var>type</var>&gt;]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>typeFields</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> (see <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_76"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>).</li><li>If <var>type</var> is <emu-val>"language"</emu-val>, then<ol><li>Set <var>displayNames</var>.[[LanguageDisplay]] to <var>languageDisplay</var>.</li><li>Let <var>typeFields</var> be <var>typeFields</var>.[[&lt;<var>languageDisplay</var>&gt;]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>typeFields</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> (see <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_77"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>).</li></ol></li><li>Let <var>styleFields</var> be <var>typeFields</var>.[[&lt;<var>style</var>&gt;]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>styleFields</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> (see <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_78"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>).</li><li>Set <var>displayNames</var>.[[Fields]] to <var>styleFields</var>.</li><li>Return <var>displayNames</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-displaynames-constructor">
    <h1><span class="secnum">12.2</span> Properties of the Intl.DisplayNames Constructor</h1>

    <p>
      The Intl.DisplayNames <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-Intl.DisplayNames.prototype">
      <h1><span class="secnum">12.2.1</span> Intl.DisplayNames.prototype</h1>

      <p>
        The value of <code>Intl.DisplayNames.prototype</code> is <emu-xref href="#sec-properties-of-intl-displaynames-prototype-object" id="_ref_436"><a href="#sec-properties-of-intl-displaynames-prototype-object">%DisplayNames.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames.supportedLocalesOf">
      <h1><span class="secnum">12.2.2</span> Intl.DisplayNames.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-intl-displaynames-constructor" id="_ref_437"><a href="#sec-intl-displaynames-constructor">%DisplayNames%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_438"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_439"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames-internal-slots">
      <h1><span class="secnum">12.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_79"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « ».
      </p>

      <p>
        The value of the [[LocaleData]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_80"><a href="#sec-internal-slots">9.1</a></emu-xref> and the following additional constraints:
      </p>

      <ul>
        <li>[[LocaleData]].[[&lt;<var>locale</var>&gt;]] must have a [[types]] field for all locale values <var>locale</var>. The value of this field must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>, which must have fields with the names of all display name types: <emu-val>"language"</emu-val>, <emu-val>"region"</emu-val>, <emu-val>"script"</emu-val>, <emu-val>"currency"</emu-val>, <emu-val>"calendar"</emu-val>, and <emu-val>"dateTimeField"</emu-val>.</li>
        <li>The value of the field <emu-val>"language"</emu-val> must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> which must have fields with the names of one of the valid language displays: <emu-val>"dialect"</emu-val> and <emu-val>"standard"</emu-val>.</li>
        <li>The language display fields under display name type <emu-val>"language"</emu-val> should contain Records which must have fields with the names of one of the valid display name styles: <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, and <emu-val>"long"</emu-val>.</li>
        <li>The value of the fields <emu-val>"region"</emu-val>, <emu-val>"script"</emu-val>, <emu-val>"currency"</emu-val>, <emu-val>"calendar"</emu-val>, and <emu-val>"dateTimeField"</emu-val> must be Records, which must have fields with the names of all display name styles: <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, and <emu-val>"long"</emu-val>.</li>
        <li>The display name style fields under display name type <emu-val>"language"</emu-val> should contain Records with keys corresponding to language codes matching the <code>unicode_language_id</code> production. The value of these fields must be string values.</li>
        <li>The display name style fields under display name type <emu-val>"region"</emu-val> should contain Records with keys corresponding to region codes. The value of these fields must be string values.</li>
        <li>The display name style fields under display name type <emu-val>"script"</emu-val> should contain Records with keys corresponding to script codes. The value of these fields must be string values.</li>
        <li>The display name style fields under display name type <emu-val>"currency"</emu-val> should contain Records with keys corresponding to currency codes. The value of these fields must be string values.</li>
        <li>The display name style fields under display name type <emu-val>"calendar"</emu-val> should contain Records with keys corresponding to a String value with the <code>type</code> given in Unicode Technical Standard 35 for the calendar used for formatting. The value of these fields must be string values.</li>
        <li>The display name style fields under display name type <emu-val>"dateTimeField"</emu-val> should contain Records with keys corresponding to codes listed in <emu-xref href="#table-validcodefordatetimefield" id="_ref_81"><a href="#table-validcodefordatetimefield">Table 9</a></emu-xref>. The value of these fields must be string values.</li>
      </ul>

      <emu-note><span class="note">Note</span><div class="note-contents">
        It is recommended that implementations use the locale data provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-displaynames-prototype-object">
    <h1><span class="secnum">12.3</span> Properties of the Intl.DisplayNames Prototype Object</h1>

    <p>
      The Intl.DisplayNames prototype object is itself an ordinary object. <dfn>%DisplayNames.prototype%</dfn> is not an Intl.DisplayNames instance and does not have an [[InitializedDisplayNames]] internal slot or any of the other internal slots of Intl.DisplayNames instance objects.
    </p>

    <emu-clause id="sec-Intl.DisplayNames.prototype.constructor">
      <h1><span class="secnum">12.3.1</span> Intl.DisplayNames.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.DisplayNames.prototype.constructor</code> is <emu-xref href="#sec-intl-displaynames-constructor" id="_ref_440"><a href="#sec-intl-displaynames-constructor">%DisplayNames%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames.prototype-@@tostringtag">
      <h1><span class="secnum">12.3.2</span> Intl.DisplayNames.prototype[ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.DisplayNames"</emu-val>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames.prototype.of" aoid="Intl.DisplayNames.prototype.of">
      <h1><span class="secnum">12.3.3</span> Intl.DisplayNames.prototype.of ( <var>code</var> )</h1>

      <p>
        When the <code>Intl.DisplayNames.prototype.of</code> is called with an argument <var>code</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>displayNames</var> be <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_441"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>displayNames</var>, [[InitializedDisplayNames]]).</li><li>Let <var>code</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_442"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>code</var>).</li><li>Let <var>code</var> be ?&nbsp;<emu-xref aoid="CanonicalCodeForDisplayNames" id="_ref_443"><a href="#sec-canonicalcodefordisplaynames">CanonicalCodeForDisplayNames</a></emu-xref>(<var>displayNames</var>.[[Type]], <var>code</var>).</li><li>Let <var>fields</var> be <var>displayNames</var>.[[Fields]].</li><li>If <var>fields</var> has a field [[&lt;<var>code</var>&gt;]], return <var>fields</var>.[[&lt;<var>code</var>&gt;]].</li><li>If <var>displayNames</var>.[[Fallback]] is <emu-val>"code"</emu-val>, return <var>code</var>.</li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.DisplayNames.prototype.resolvedOptions">
      <h1><span class="secnum">12.3.4</span> Intl.DisplayNames.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>displayNames</var> be <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_444"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>displayNames</var>, [[InitializedDisplayNames]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-displaynames-resolvedoptions-properties" id="_ref_82"><a href="#table-displaynames-resolvedoptions-properties">Table 8</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>Let <var>v</var> be the value of <var>displayNames</var>'s internal slot whose name is the Internal Slot value of the current row.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>v</var> is not <emu-val>undefined</emu-val>.</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_445"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-displaynames-resolvedoptions-properties"><figure><figcaption>Table 8: Resolved Options of DisplayNames Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td>[[Style]]</td>
            <td><emu-val>"style"</emu-val></td>
          </tr>
          <tr>
            <td>[[Type]]</td>
            <td><emu-val>"type"</emu-val></td>
          </tr>
          <tr>
            <td>[[Fallback]]</td>
            <td><emu-val>"fallback"</emu-val></td>
          </tr>
          <tr>
            <td>[[LanguageDisplay]]</td>
            <td><emu-val>"languageDisplay"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-displaynames-instances">
    <h1><span class="secnum">12.4</span> Properties of Intl.DisplayNames Instances</h1>

    <p>
      Intl.DisplayNames instances are ordinary objects that inherit properties from <emu-xref href="#sec-properties-of-intl-displaynames-prototype-object" id="_ref_446"><a href="#sec-properties-of-intl-displaynames-prototype-object">%DisplayNames.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.DisplayNames instances have an [[InitializedDisplayNames]] internal slot.
    </p>

    <p>
      Intl.DisplayNames instances also have several internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used for formatting.</li>
      <li>[[Style]] is one of the String values <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, or <emu-val>"long"</emu-val>, identifying the display name style used.</li>
      <li>[[Type]] is one of the String values <emu-val>"language"</emu-val>, <emu-val>"region"</emu-val>, <emu-val>"script"</emu-val>, <emu-val>"currency"</emu-val>, <emu-val>"calendar"</emu-val>, or <emu-val>"dateTimeField"</emu-val>, identifying the type of the display names requested.</li>
      <li>[[Fallback]] is one of the String values <emu-val>"code"</emu-val> or <emu-val>"none"</emu-val>, identifying the fallback return when the system does not have the requested display name.</li>
      <li>[[LanguageDisplay]] is one of the String values <emu-val>"dialect"</emu-val> or <emu-val>"standard"</emu-val>, identifying the language display kind. It is only used when [[Type]] has the value <emu-val>"language"</emu-val>.</li>
      <li>[[Fields]] is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> (see <emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_83"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>) which must have fields with keys corresponding to codes according to [[Style]], [[Type]], and [[LanguageDisplay]].</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-displaynames-abstracts">
    <h1><span class="secnum">12.5</span> Abstract Operations for DisplayNames Objects</h1>

    <emu-clause id="sec-canonicalcodefordisplaynames" aoid="CanonicalCodeForDisplayNames">
      <h1><span class="secnum">12.5.1</span> CanonicalCodeForDisplayNames ( <var>type</var>, <var>code</var> )</h1>
      <p>
        The CanonicalCodeForDisplayNames abstract operation is called with arguments <var>type</var> and <var>code</var>. It verifies that the <var>code</var> argument represents a well-formed code according to the <var>type</var> argument and returns the case-regularized form of the <var>code</var>. The algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>. The following steps are taken:
      </p>
      <emu-alg><ol><li>If <var>type</var> is <emu-val>"language"</emu-val>, then<ol><li>If <var>code</var> does not match the <code>unicode_language_id</code> production, throw a <emu-val>RangeError</emu-val> exception.</li><li>If <emu-xref aoid="IsStructurallyValidLanguageTag" id="_ref_447"><a href="#sec-isstructurallyvalidlanguagetag">IsStructurallyValidLanguageTag</a></emu-xref>(<var>code</var>) is <emu-val>false</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Set <var>code</var> to <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_448"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>code</var>).</li><li>Return <var>code</var>.</li></ol></li><li>If <var>type</var> is <emu-val>"region"</emu-val>, then<ol><li>If <var>code</var> does not match the <code>unicode_region_subtag</code> production, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>code</var> be the result of mapping <var>code</var> to upper case as described in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_84"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>.</li><li>Return <var>code</var>.</li></ol></li><li>If <var>type</var> is <emu-val>"script"</emu-val>, then<ol><li>If <var>code</var> does not match the <code>unicode_script_subtag</code> production, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>code</var> be the result of mapping the first character in <var>code</var> to upper case, and mapping the second, third, and fourth character in <var>code</var> to lower case, as described in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_85"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>.</li><li>Return <var>code</var>.</li></ol></li><li>If <var>type</var> is <emu-val>"calendar"</emu-val>, then<ol><li>If <var>code</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>code</var> be the result of mapping <var>code</var> to lower case as described in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_86"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>.</li><li>Return <var>code</var>.</li></ol></li><li>If <var>type</var> is <emu-val>"dateTimeField"</emu-val>, then<ol><li>If the result of <emu-xref aoid="IsValidDateTimeFieldCode" id="_ref_449"><a href="#sec-isvaliddatetimefieldcode">IsValidDateTimeFieldCode</a></emu-xref>(<var>code</var>) is <emu-val>false</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Return <var>code</var>.</li></ol></li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>type</var> is <emu-val>"currency"</emu-val>.</li><li>If !&nbsp;<emu-xref aoid="IsWellFormedCurrencyCode" id="_ref_450"><a href="#sec-iswellformedcurrencycode">IsWellFormedCurrencyCode</a></emu-xref>(<var>code</var>) is <emu-val>false</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>code</var> be the result of mapping <var>code</var> to upper case as described in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_87"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>.</li><li>Return <var>code</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-isvaliddatetimefieldcode" aoid="IsValidDateTimeFieldCode">
      <h1><span class="secnum">12.5.2</span> IsValidDateTimeFieldCode ( <var>field</var> )</h1>
      <p>The abstract operation IsValidDateTimeFieldCode takes argument <var>field</var> (a String). It verifies that the <var>field</var> argument represents a valid date time field code. It performs the following steps when called:</p>
      <emu-alg><ol><li>If <var>field</var> is listed in the Code column of <emu-xref href="#table-validcodefordatetimefield" id="_ref_88"><a href="#table-validcodefordatetimefield">Table 9</a></emu-xref>, return <emu-val>true</emu-val>.</li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>

      <emu-table id="table-validcodefordatetimefield"><figure><figcaption>Table 9: Codes For Date Time Field of DisplayNames</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Code</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody><tr>
            <td><emu-val>"era"</emu-val></td>
            <td>The field indicating the era, e.g. AD or BC in the Gregorian or Julian calendar.</td>
          </tr>
          <tr>
            <td><emu-val>"year"</emu-val></td>
            <td>The field indicating the year (within an era).</td>
          </tr>
          <tr>
            <td><emu-val>"quarter"</emu-val></td>
            <td>The field indicating the quarter, e.g. Q2, 2nd quarter, etc.</td>
          </tr>
          <tr>
            <td><emu-val>"month"</emu-val></td>
            <td>The field indicating the month, e.g. Sep, September, etc.</td>
          </tr>
          <tr>
            <td><emu-val>"weekOfYear"</emu-val></td>
            <td>The field indicating the week number within a year.</td>
          </tr>
          <tr>
            <td><emu-val>"weekday"</emu-val></td>
            <td>The field indicating the day of week, e.g. Tue, Tuesday, etc.</td>
          </tr>
          <tr>
            <td><emu-val>"day"</emu-val></td>
            <td>The field indicating the day in month.</td>
          </tr>
          <tr>
            <td><emu-val>"dayPeriod"</emu-val></td>
            <td>The field indicating the day period, either am, pm, etc. or noon, evening, etc..</td>
          </tr>
          <tr>
            <td><emu-val>"hour"</emu-val></td>
            <td>The field indicating the hour.</td>
          </tr>
          <tr>
            <td><emu-val>"minute"</emu-val></td>
            <td>The field indicating the minute.</td>
          </tr>
          <tr>
            <td><emu-val>"second"</emu-val></td>
            <td>The field indicating the second.</td>
          </tr>
          <tr>
            <td><emu-val>"timeZoneName"</emu-val></td>
            <td>The field indicating the time zone name, e.g. PDT, Pacific Daylight Time, etc.</td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./listformat.html"><emu-clause id="listformat-objects">
  <h1><span class="secnum">13</span> ListFormat Objects</h1>

  <emu-clause id="sec-intl-listformat-constructor">
    <h1><span class="secnum">13.1</span> The Intl.ListFormat Constructor</h1>

    <p>
      The ListFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%ListFormat%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_451"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_89"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-Intl.ListFormat">
      <h1><span class="secnum">13.1.1</span> Intl.ListFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        When the <code>Intl.ListFormat</code> function is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>listFormat</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_452"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%ListFormat.prototype%"</emu-val>, « [[InitializedListFormat]], [[Locale]], [[Type]], [[Style]], [[Templates]] »).</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_453"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="GetOptionsObject" id="_ref_454"><a href="#sec-getoptionsobject">GetOptionsObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_455"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[localeMatcher]] to <var>matcher</var>.</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-listformat-constructor" id="_ref_456"><a href="#sec-intl-listformat-constructor">%ListFormat%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_457"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-intl-listformat-constructor" id="_ref_458"><a href="#sec-intl-listformat-constructor">%ListFormat%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <emu-xref href="#sec-intl-listformat-constructor" id="_ref_459"><a href="#sec-intl-listformat-constructor">%ListFormat%</a></emu-xref>.[[RelevantExtensionKeys]], <var>localeData</var>).</li><li>Set <var>listFormat</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Let <var>type</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_460"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"type"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"conjunction"</emu-val>, <emu-val>"disjunction"</emu-val>, <emu-val>"unit"</emu-val> », <emu-val>"conjunction"</emu-val>).</li><li>Set <var>listFormat</var>.[[Type]] to <var>type</var>.</li><li>Let <var>style</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_461"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val> », <emu-val>"long"</emu-val>).</li><li>Set <var>listFormat</var>.[[Style]] to <var>style</var>.</li><li>Let <var>dataLocale</var> be <var>r</var>.[[dataLocale]].</li><li>Let <var>dataLocaleData</var> be <var>localeData</var>.[[&lt;<var>dataLocale</var>&gt;]].</li><li>Let <var>dataLocaleTypes</var> be <var>dataLocaleData</var>.[[&lt;<var>type</var>&gt;]].</li><li>Set <var>listFormat</var>.[[Templates]] to <var>dataLocaleTypes</var>.[[&lt;<var>style</var>&gt;]].</li><li>Return <var>listFormat</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-listformat-constructor">
    <h1><span class="secnum">13.2</span> Properties of the Intl.ListFormat Constructor</h1>

    <p>
      The Intl.ListFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-Intl.ListFormat.prototype">
      <h1><span class="secnum">13.2.1</span> Intl.ListFormat.prototype</h1>

      <p>
        The value of <code>Intl.ListFormat.prototype</code> is <emu-xref href="#sec-properties-of-intl-listformat-prototype-object" id="_ref_462"><a href="#sec-properties-of-intl-listformat-prototype-object">%ListFormat.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.supportedLocalesOf">
      <h1><span class="secnum">13.2.2</span> Intl.ListFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-intl-listformat-constructor" id="_ref_463"><a href="#sec-intl-listformat-constructor">%ListFormat%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_464"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_465"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat-internal-slots">
      <h1><span class="secnum">13.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_90"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « ».
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        Intl.ListFormat does not have any relevant extension keys.
      </div></emu-note>

      <p>
        The value of the [[LocaleData]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_91"><a href="#sec-internal-slots">9.1</a></emu-xref> and the following additional constraints, for each locale value <var>locale</var> in <emu-xref href="#sec-intl-listformat-constructor" id="_ref_466"><a href="#sec-intl-listformat-constructor">%ListFormat%</a></emu-xref>.[[AvailableLocales]]:
      </p>

      <ul>
        <li>[[LocaleData]].[[&lt;<var>locale</var>&gt;]] is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> which has three fields [[conjunction]], [[disjunction]], and [[unit]]. Each of these is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> which must have fields with the names of three formatting styles: [[long]], [[short]], and [[narrow]].</li>
        <li>Each of those fields is considered a <dfn>ListFormat template set</dfn>, which must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of Records with fields named: [[Pair]], [[Start]], [[Middle]], and [[End]]. Each of those fields must be a template string as specified in LDML <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> Format Rules. Each template string must contain the substrings <emu-val>"{0}"</emu-val> and <emu-val>"{1}"</emu-val> exactly once. The substring <emu-val>"{0}"</emu-val> should occur before the substring <emu-val>"{1}"</emu-val>.</li>
      </ul>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        It is recommended that implementations use the locale data provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>). In <a href="https://unicode.org/reports/tr35/tr35-general.html#ListPatterns">LDML's listPattern</a>, <code>conjunction</code> corresponds to "standard", <code>disjunction</code> corresponds to "or", and <code>unit</code> corresponds to "unit".
      </div></emu-note>

      <emu-note><span class="note">Note 3</span><div class="note-contents">
        Among the list types, <code>conjunction</code> stands for "and"-based lists (e.g., "A, B, and C"), <code>disjunction</code> stands for "or"-based lists (e.g., "A, B, or C"), and <code>unit</code> stands for lists of values with units (e.g., "5 pounds, 12 ounces").
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-listformat-prototype-object">
    <h1><span class="secnum">13.3</span> Properties of the Intl.ListFormat Prototype Object</h1>

    <p>
      The Intl.ListFormat prototype object is itself an ordinary object. <dfn>%ListFormat.prototype%</dfn> is not an Intl.ListFormat instance and does not have an [[InitializedListFormat]] internal slot or any of the other internal slots of Intl.ListFormat instance objects.
    </p>

    <emu-clause id="sec-Intl.ListFormat.prototype.constructor">
      <h1><span class="secnum">13.3.1</span> Intl.ListFormat.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.ListFormat.prototype.constructor</code> is <emu-xref href="#sec-intl-listformat-constructor" id="_ref_467"><a href="#sec-intl-listformat-constructor">%ListFormat%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype-toStringTag">
      <h1><span class="secnum">13.3.2</span> Intl.ListFormat.prototype [ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.ListFormat"</emu-val>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype.format">
      <h1><span class="secnum">13.3.3</span> Intl.ListFormat.prototype.format ( <var>list</var> )</h1>

      <p>
        When the <code>format</code> method is called with an argument <var>list</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>lf</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_468"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>lf</var>, [[InitializedListFormat]]).</li><li>Let <var>stringList</var> be ?&nbsp;<emu-xref aoid="StringListFromIterable" id="_ref_469"><a href="#sec-createstringlistfromiterable">StringListFromIterable</a></emu-xref>(<var>list</var>).</li><li>Return <emu-xref aoid="FormatList" id="_ref_470"><a href="#sec-formatlist">FormatList</a></emu-xref>(<var>lf</var>, <var>stringList</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype.formatToParts">
      <h1><span class="secnum">13.3.4</span> Intl.ListFormat.prototype.formatToParts ( <var>list</var> )</h1>

      <p>
        When the <code>formatToParts</code> method is called with an argument <var>list</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>lf</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_471"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>lf</var>, [[InitializedListFormat]]).</li><li>Let <var>stringList</var> be ?&nbsp;<emu-xref aoid="StringListFromIterable" id="_ref_472"><a href="#sec-createstringlistfromiterable">StringListFromIterable</a></emu-xref>(<var>list</var>).</li><li>Return <emu-xref aoid="FormatListToParts" id="_ref_473"><a href="#sec-formatlisttoparts">FormatListToParts</a></emu-xref>(<var>lf</var>, <var>stringList</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.ListFormat.prototype.resolvedoptions">
      <h1><span class="secnum">13.3.5</span> Intl.ListFormat.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>lf</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_474"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>lf</var>, [[InitializedListFormat]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-listformat-resolvedoptions-properties" id="_ref_92"><a href="#table-listformat-resolvedoptions-properties">Table 10</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>Let <var>v</var> be the value of <var>lf</var>'s internal slot whose name is the Internal Slot value of the current row.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>v</var> is not <emu-val>undefined</emu-val>.</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_475"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-listformat-resolvedoptions-properties"><figure><figcaption>Table 10: Resolved Options of ListFormat Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td>[[Type]]</td>
            <td><emu-val>"type"</emu-val></td>
          </tr>
          <tr>
            <td>[[Style]]</td>
            <td><emu-val>"style"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-listformat-instances">
    <h1><span class="secnum">13.4</span> Properties of Intl.ListFormat Instances</h1>

    <p>
      Intl.ListFormat instances inherit properties from <emu-xref href="#sec-properties-of-intl-listformat-prototype-object" id="_ref_476"><a href="#sec-properties-of-intl-listformat-prototype-object">%ListFormat.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.ListFormat instances have an [[InitializedListFormat]] internal slot.
    </p>

    <p>
      Intl.ListFormat instances also have several internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used by the list format styles.</li>
      <li>[[Type]] is one of the String values <emu-val>"conjunction"</emu-val>, <emu-val>"disjunction"</emu-val>, or <emu-val>"unit"</emu-val>, identifying the list of types used.</li>
      <li>[[Style]] is one of the String values <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, or <emu-val>"narrow"</emu-val>, identifying the list formatting style used.</li>
      <li>[[Templates]] is a <emu-xref href="#sec-Intl.ListFormat-internal-slots" id="_ref_477"><a href="#sec-Intl.ListFormat-internal-slots">ListFormat template set</a></emu-xref>.</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-listformat-abstracts">
    <h1><span class="secnum">13.5</span> Abstract Operations for ListFormat Objects</h1>

    <emu-clause id="sec-deconstructpattern" aoid="DeconstructPattern">
      <h1><span class="secnum">13.5.1</span> DeconstructPattern ( <var>pattern</var>, <var>placeables</var> )</h1>

      <p>
        The DeconstructPattern abstract operation is called with arguments <var>pattern</var> (which must be a String) and <var>placeables</var> (which must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>), and deconstructs the pattern string into a list of parts.
      </p>
      <p>
        The placeables record is a record whose keys are placeables tokens used in the pattern string, and values are parts records which will be used in the result <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> to represent the token part.
        Example:
      </p>
      <pre>      Input:
        DeconstructPattern("AA{xx}BB{yy}CC", {
          [[xx]]: {[[Type]]: "hour", [[Value]]: "15"},
          [[yy]]: {[[Type]]: "minute", [[Value]]: "06"}
        })

      Output (List of parts records):
        «
          {[[Type]]: "literal", [[Value]]: "AA"},
          {[[Type]]: "hour", [[Value]]: "15"},
          {[[Type]]: "literal", [[Value]]: "BB"},
          {[[Type]]: "minute", [[Value]]: "06"},
          {[[Type]]: "literal", [[Value]]: "CC"}
        »
      </pre>
      <emu-alg><ol><li>Let <var>patternParts</var> be <emu-xref aoid="PartitionPattern" id="_ref_478"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>).</li><li>Let <var>result</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>patternPart</var> of <var>patternParts</var>, do<ol><li>Let <var>part</var> be <var>patternPart</var>.[[Type]].</li><li>If <var>part</var> is <emu-val>"literal"</emu-val>, then<ol><li>Append <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>patternPart</var>.[[Value]] } to <var>result</var>.</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>placeables</var> has a field [[&lt;<var>part</var>&gt;]].</li><li>Let <var>subst</var> be <var>placeables</var>.[[&lt;<var>part</var>&gt;]].</li><li>If <emu-xref aoid="Type" id="_ref_479"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>subst</var>) is <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>, then<ol><li>For each element <var>s</var> of <var>subst</var>, do<ol><li>Append <var>s</var> to <var>result</var>.</li></ol></li></ol></li><li>Else,<ol><li>Append <var>subst</var> to <var>result</var>.</li></ol></li></ol></li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-createpartsfromlist" aoid="CreatePartsFromList">
      <h1><span class="secnum">13.5.2</span> CreatePartsFromList ( <var>listFormat</var>, <var>list</var> )</h1>

      <p>
        The CreatePartsFromList abstract operation is called with arguments <var>listFormat</var> (which must be an object initialized as a ListFormat) and <var>list</var> (which must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of String values), and creates the corresponding list of parts according to the effective locale and the formatting options of <var>listFormat</var>.
        Each part is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with two fields: [[Type]], which must be a string with values "element" or "literal", and [[Value]] which must be a string or a number.
        The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>size</var> be the number of elements of <var>list</var>.</li><li>If <var>size</var> is 0, then<ol><li>Return a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li></ol></li><li>If <var>size</var> is 2, then<ol><li>Let <var>n</var> be an index into <var>listFormat</var>.[[Templates]] based on <var>listFormat</var>.[[Locale]], <var>list</var>[0], and <var>list</var>[1].</li><li>Let <var>pattern</var> be <var>listFormat</var>.[[Templates]][<var>n</var>].[[Pair]].</li><li>Let <var>first</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"element"</emu-val>, [[Value]]: <var>list</var>[0] }.</li><li>Let <var>second</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"element"</emu-val>, [[Value]]: <var>list</var>[1] }.</li><li>Let <var>placeables</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[0]]: <var>first</var>, [[1]]: <var>second</var> }.</li><li>Return <emu-xref aoid="DeconstructPattern" id="_ref_480"><a href="#sec-deconstructpattern">DeconstructPattern</a></emu-xref>(<var>pattern</var>, <var>placeables</var>).</li></ol></li><li>Let <var>last</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"element"</emu-val>, [[Value]]: <var>list</var>[<var>size</var> - 1] }.</li><li>Let <var>parts</var> be « <var>last</var> ».</li><li>Let <var>i</var> be <var>size</var> - 2.</li><li>Repeat, while <var>i</var> ≥ 0,<ol><li>Let <var>head</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"element"</emu-val>, [[Value]]: <var>list</var>[<var>i</var>] }.</li><li>Let <var>n</var> be an implementation-defined index into <var>listFormat</var>.[[Templates]] based on <var>listFormat</var>.[[Locale]], <var>head</var>, and <var>parts</var>.</li><li>If <var>i</var> is 0, then<ol><li>Let <var>pattern</var> be <var>listFormat</var>.[[Templates]][<var>n</var>].[[Start]].</li></ol></li><li>Else if <var>i</var> is less than <var>size</var> - 2, then<ol><li>Let <var>pattern</var> be <var>listFormat</var>.[[Templates]][<var>n</var>].[[Middle]].</li></ol></li><li>Else,<ol><li>Let <var>pattern</var> be <var>listFormat</var>.[[Templates]][<var>n</var>].[[End]].</li></ol></li><li>Let <var>placeables</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[0]]: <var>head</var>, [[1]]: <var>parts</var> }.</li><li>Set <var>parts</var> to <emu-xref aoid="DeconstructPattern" id="_ref_481"><a href="#sec-deconstructpattern">DeconstructPattern</a></emu-xref>(<var>pattern</var>, <var>placeables</var>).</li><li>Decrement <var>i</var> by 1.</li></ol></li><li>Return <var>parts</var>.</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        The index <var>n</var> to select across multiple templates permits the conjunction to be dependent on the context, as in Spanish, where either "y" or "e" may be selected, depending on the following word.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-formatlist" aoid="FormatList">
      <h1><span class="secnum">13.5.3</span> FormatList ( <var>listFormat</var>, <var>list</var> )</h1>

      <p>
        The FormatList abstract operation is called with arguments <var>listFormat</var> (which must be an object initialized as a ListFormat) and <var>list</var> (which must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of String values), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be <emu-xref aoid="CreatePartsFromList" id="_ref_482"><a href="#sec-createpartsfromlist">CreatePartsFromList</a></emu-xref>(<var>listFormat</var>, <var>list</var>).</li><li>Let <var>result</var> be an empty String.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>part</var> in <var>parts</var>, do<ol><li>Set <var>result</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>result</var> and <var>part</var>.[[Value]].</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatlisttoparts" aoid="FormatListToParts">
      <h1><span class="secnum">13.5.4</span> FormatListToParts ( <var>listFormat</var>, <var>list</var> )</h1>

      <p>
        The FormatListToParts abstract operation is called with arguments <var>listFormat</var> (which must be an object initialized as a ListFormat) and <var>list</var> (which must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of String values), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be <emu-xref aoid="CreatePartsFromList" id="_ref_483"><a href="#sec-createpartsfromlist">CreatePartsFromList</a></emu-xref>(<var>listFormat</var>, <var>list</var>).</li><li>Let <var>result</var> be <emu-xref aoid="ArrayCreate" id="_ref_484"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0).</li><li>Let <var>n</var> be 0.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>part</var> in <var>parts</var>, do<ol><li>Let <var>O</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_485"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.[[Type]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_486"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.[[Value]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_487"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString" id="_ref_488"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>n</var>), <var>O</var>).</li><li>Increment <var>n</var> by 1.</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-createstringlistfromiterable" aoid="StringListFromIterable">
      <h1><span class="secnum">13.5.5</span> StringListFromIterable ( <var>iterable</var> )</h1>

      <p>The abstract operation StringListFromIterable performs the following steps:</p>
      <emu-alg><ol><li>If <var>iterable</var> is <emu-val>undefined</emu-val>, then<ol><li>Return a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li></ol></li><li>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator" id="_ref_489"><a href="https://tc39.es/ecma262/#sec-getiterator">GetIterator</a></emu-xref>(<var>iterable</var>).</li><li>Let <var>list</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>next</var> be <emu-val>true</emu-val>.</li><li>Repeat, while <var>next</var> is not <emu-val>false</emu-val>,<ol><li>Set <var>next</var> to ?&nbsp;<emu-xref aoid="IteratorStep" id="_ref_490"><a href="https://tc39.es/ecma262/#sec-iteratorstep">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is not <emu-val>false</emu-val>, then<ol><li>Let <var>nextValue</var> be ?&nbsp;<emu-xref aoid="IteratorValue" id="_ref_491"><a href="https://tc39.es/ecma262/#sec-iteratorvalue">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>If <emu-xref aoid="Type" id="_ref_492"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>nextValue</var>) is not String, then<ol><li>Let <var>error</var> be <emu-xref aoid="ThrowCompletion" id="_ref_493"><a href="https://tc39.es/ecma262/#sec-throwcompletion">ThrowCompletion</a></emu-xref>(a newly created <emu-val>TypeError</emu-val> object).</li><li>Return ?&nbsp;<emu-xref aoid="IteratorClose" id="_ref_494"><a href="https://tc39.es/ecma262/#sec-iteratorclose">IteratorClose</a></emu-xref>(<var>iteratorRecord</var>, <var>error</var>).</li></ol></li><li>Append <var>nextValue</var> to the end of the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> <var>list</var>.</li></ol></li></ol></li><li>Return <var>list</var>.</li></ol></emu-alg>
      <emu-note><span class="note">Note</span><div class="note-contents">
        <p>This algorithm raises exceptions when it encounters values that are not Strings, because there is no obvious locale-aware coercion for arbitrary values.</p>
      </div></emu-note>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./locale.html"><emu-clause id="locale-objects">
  <h1><span class="secnum">14</span> Locale Objects</h1>

  <emu-clause id="sec-intl-locale-constructor">
    <h1><span class="secnum">14.1</span> The Intl.Locale Constructor</h1>

    <p>
      The Locale <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%Locale%</dfn> intrinsic object and a standard built-in property of the Intl object.
    </p>

    <emu-clause id="sec-Intl.Locale">
      <h1><span class="secnum">14.1.1</span> Intl.Locale ( <var>tag</var> [ , <var>options</var> ] )</h1>

      <p>
        The following algorithm refers to the <code>type</code> nonterminal from <a href="https://www.unicode.org/reports/tr35/#Unicode_locale_identifier">UTS 35's Unicode Locale Identifier grammar</a>.
        When the <code>Intl.Locale</code> function is called with an argument <var>tag</var> and an optional argument <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>relevantExtensionKeys</var> be <emu-xref href="#sec-intl-locale-constructor" id="_ref_495"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>.[[RelevantExtensionKeys]].</li><li>Let <var>internalSlotsList</var> be « [[InitializedLocale]], [[Locale]], [[Calendar]], [[Collation]], [[HourCycle]], [[NumberingSystem]] ».</li><li>If <var>relevantExtensionKeys</var> contains <emu-val>"kf"</emu-val>, then<ol><li>Append [[CaseFirst]] as the last element of <var>internalSlotsList</var>.</li></ol></li><li>If <var>relevantExtensionKeys</var> contains <emu-val>"kn"</emu-val>, then<ol><li>Append [[Numeric]] as the last element of <var>internalSlotsList</var>.</li></ol></li><li>Let <var>locale</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_496"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Locale.prototype%"</emu-val>, <var>internalSlotsList</var>).</li><li>If <emu-xref aoid="Type" id="_ref_497"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>tag</var>) is not String or Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <emu-xref aoid="Type" id="_ref_498"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>tag</var>) is Object and <var>tag</var> has an [[InitializedLocale]] internal slot, then<ol><li>Let <var>tag</var> be <var>tag</var>.[[Locale]].</li></ol></li><li>Else,<ol><li>Let <var>tag</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_499"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>tag</var>).</li></ol></li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_500"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>).</li><li>Set <var>tag</var> to ?&nbsp;<emu-xref aoid="ApplyOptionsToTag" id="_ref_501"><a href="#sec-apply-options-to-tag">ApplyOptionsToTag</a></emu-xref>(<var>tag</var>, <var>options</var>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>calendar</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_502"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"calendar"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>calendar</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>calendar</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[ca]] to <var>calendar</var>.</li><li>Let <var>collation</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_503"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"collation"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>collation</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>collation</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[co]] to <var>collation</var>.</li><li>Let <var>hc</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_504"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"hourCycle"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"h11"</emu-val>, <emu-val>"h12"</emu-val>, <emu-val>"h23"</emu-val>, <emu-val>"h24"</emu-val> », <emu-val>undefined</emu-val>).</li><li>Set <var>opt</var>.[[hc]] to <var>hc</var>.</li><li>Let <var>kf</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_505"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"caseFirst"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"upper"</emu-val>, <emu-val>"lower"</emu-val>, <emu-val>"false"</emu-val> », <emu-val>undefined</emu-val>).</li><li>Set <var>opt</var>.[[kf]] to <var>kf</var>.</li><li>Let <var>kn</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_506"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numeric"</emu-val>, <emu-val>"boolean"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>kn</var> is not <emu-val>undefined</emu-val>, set <var>kn</var> to !&nbsp;<emu-xref aoid="ToString" id="_ref_507"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>kn</var>).</li><li>Set <var>opt</var>.[[kn]] to <var>kn</var>.</li><li>Let <var>numberingSystem</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_508"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numberingSystem"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>numberingSystem</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>numberingSystem</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[nu]] to <var>numberingSystem</var>.</li><li>Let <var>r</var> be !&nbsp;<emu-xref aoid="ApplyUnicodeExtensionToTag" id="_ref_509"><a href="#sec-apply-unicode-extension-to-tag">ApplyUnicodeExtensionToTag</a></emu-xref>(<var>tag</var>, <var>opt</var>, <var>relevantExtensionKeys</var>).</li><li>Set <var>locale</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Set <var>locale</var>.[[Calendar]] to <var>r</var>.[[ca]].</li><li>Set <var>locale</var>.[[Collation]] to <var>r</var>.[[co]].</li><li>Set <var>locale</var>.[[HourCycle]] to <var>r</var>.[[hc]].</li><li>If <var>relevantExtensionKeys</var> contains <emu-val>"kf"</emu-val>, then<ol><li>Set <var>locale</var>.[[CaseFirst]] to <var>r</var>.[[kf]].</li></ol></li><li>If <var>relevantExtensionKeys</var> contains <emu-val>"kn"</emu-val>, then<ol><li>If !&nbsp;<emu-xref aoid="SameValue" id="_ref_510"><a href="https://tc39.es/ecma262/#sec-samevalue">SameValue</a></emu-xref>(<var>r</var>.[[kn]], <emu-val>"true"</emu-val>) is <emu-val>true</emu-val> or <var>r</var>.[[kn]] is the empty String, then<ol><li>Set <var>locale</var>.[[Numeric]] to <emu-val>true</emu-val>.</li></ol></li><li>Else,<ol><li>Set <var>locale</var>.[[Numeric]] to <emu-val>false</emu-val>.</li></ol></li></ol></li><li>Set <var>locale</var>.[[NumberingSystem]] to <var>r</var>.[[nu]].</li><li>Return <var>locale</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-apply-options-to-tag" aoid="ApplyOptionsToTag">
      <h1><span class="secnum">14.1.2</span> ApplyOptionsToTag ( <var>tag</var>, <var>options</var> )</h1>
      <p>
        The following algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>.
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_511"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>tag</var>) is String.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_512"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>options</var>) is Object.</li><li>If <emu-xref aoid="IsStructurallyValidLanguageTag" id="_ref_513"><a href="#sec-isstructurallyvalidlanguagetag">IsStructurallyValidLanguageTag</a></emu-xref>(<var>tag</var>) is <emu-val>false</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>language</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_514"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"language"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>language</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>language</var> does not match the <code>unicode_language_subtag</code> production, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Let <var>script</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_515"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"script"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>script</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>script</var> does not match the <code>unicode_script_subtag</code> production, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Let <var>region</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_516"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"region"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>region</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>region</var> does not match the <code>unicode_region_subtag</code> production, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>tag</var> to <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_517"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>tag</var>).</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>tag</var> matches the <code>unicode_locale_id</code> production.</li><li>Let <var>languageId</var> be the substring of <var>tag</var> corresponding to the <code>unicode_language_id</code> production.</li><li>If <var>language</var> is not <emu-val>undefined</emu-val>, then<ol><li>Set <var>languageId</var> to <var>languageId</var> with the substring corresponding to the <code>unicode_language_subtag</code> production replaced by the string <var>language</var>.</li></ol></li><li>If <var>script</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>languageId</var> does not contain a <code>unicode_script_subtag</code> production, then<ol><li>Set <var>languageId</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of the <code>unicode_language_subtag</code> production of <var>languageId</var>, <emu-val>"-"</emu-val>, <var>script</var>, and the rest of <var>languageId</var>.</li></ol></li><li>Else,<ol><li>Set <var>languageId</var> to <var>languageId</var> with the substring corresponding to the <code>unicode_script_subtag</code> production replaced by the string <var>script</var>.</li></ol></li></ol></li><li>If <var>region</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>languageId</var> does not contain a <code>unicode_region_subtag</code> production, then<ol><li>Set <var>languageId</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of the <code>unicode_language_subtag</code> production of <var>languageId</var>, the substring corresponding to <emu-val>"-"` and the `unicode_script_subtag` production if present, `"-"</emu-val>, <var>region</var>, and the rest of <var>languageId</var>.</li></ol></li><li>Else,<ol><li>Set <var>languageId</var> to <var>languageId</var> with the substring corresponding to the <code>unicode_region_subtag</code> production replaced by the string <var>region</var>.</li></ol></li></ol></li><li>Set <var>tag</var> to <var>tag</var> with the substring corresponding to the <code>unicode_language_id</code> production replaced by the string <var>languageId</var>.</li><li>Return <emu-xref aoid="CanonicalizeUnicodeLocaleId" id="_ref_518"><a href="#sec-canonicalizeunicodelocaleid">CanonicalizeUnicodeLocaleId</a></emu-xref>(<var>tag</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-apply-unicode-extension-to-tag" aoid="ApplyUnicodeExtensionToTag">
      <h1><span class="secnum">14.1.3</span> ApplyUnicodeExtensionToTag ( <var>tag</var>, <var>options</var>, <var>relevantExtensionKeys</var> )</h1>
      <p>
        The following algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>.
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_519"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>tag</var>) is String.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>tag</var> matches the <code>unicode_locale_id</code> production.</li><li>If <var>tag</var> contains a substring that is a <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_520"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref>, then<ol><li>Let <var>extension</var> be the String value consisting of the substring of the <emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_521"><a href="#sec-unicode-locale-extension-sequences">Unicode locale extension sequence</a></emu-xref> within <var>tag</var>.</li><li>Let <var>components</var> be !&nbsp;<emu-xref aoid="UnicodeExtensionComponents" id="_ref_522"><a href="#sec-unicode-extension-components">UnicodeExtensionComponents</a></emu-xref>(<var>extension</var>).</li><li>Let <var>attributes</var> be <var>components</var>.[[Attributes]].</li><li>Let <var>keywords</var> be <var>components</var>.[[Keywords]].</li></ol></li><li>Else,<ol><li>Let <var>attributes</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>keywords</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li></ol></li><li>Let <var>result</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>For each element <var>key</var> of <var>relevantExtensionKeys</var>, do<ol><li>Let <var>value</var> be <emu-val>undefined</emu-val>.</li><li>If <var>keywords</var> contains an element whose [[Key]] is the same as <var>key</var>, then<ol><li>Let <var>entry</var> be the element of <var>keywords</var> whose [[Key]] is the same as <var>key</var>.</li><li>Let <var>value</var> be <var>entry</var>.[[Value]].</li></ol></li><li>Else,<ol><li>Let <var>entry</var> be <emu-const>empty</emu-const>.</li></ol></li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>options</var> has a field [[&lt;<var>key</var>&gt;]].</li><li>Let <var>optionsValue</var> be <var>options</var>.[[&lt;<var>key</var>&gt;]].</li><li>If <var>optionsValue</var> is not <emu-val>undefined</emu-val>, then<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_523"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>optionsValue</var>) is String.</li><li>Let <var>value</var> be <var>optionsValue</var>.</li><li>If <var>entry</var> is not <emu-const>empty</emu-const>, then<ol><li>Set <var>entry</var>.[[Value]] to <var>value</var>.</li></ol></li><li>Else,<ol><li>Append the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]]: <var>key</var>, [[Value]]: <var>value</var> } to <var>keywords</var>.</li></ol></li></ol></li><li>Set <var>result</var>.[[&lt;<var>key</var>&gt;]] to <var>value</var>.</li></ol></li><li>Let <var>locale</var> be the String value that is <var>tag</var> with any Unicode locale extension sequences removed.</li><li>Let <var>newExtension</var> be a Unicode BCP 47 U Extension based on <var>attributes</var> and <var>keywords</var>.</li><li>If <var>newExtension</var> is not the empty String, then<ol><li>Let <var>locale</var> be !&nbsp;<emu-xref aoid="InsertUnicodeExtensionAndCanonicalize" id="_ref_524"><a href="#sec-insert-unicode-extension-and-canonicalize">InsertUnicodeExtensionAndCanonicalize</a></emu-xref>(<var>locale</var>, <var>newExtension</var>).</li></ol></li><li>Set <var>result</var>.[[locale]] to <var>locale</var>.</li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-locale-constructor">
    <h1><span class="secnum">14.2</span> Properties of the Intl.Locale Constructor</h1>

    <p>
      The Intl.Locale <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-Intl.Locale.prototype">
      <h1><span class="secnum">14.2.1</span> Intl.Locale.prototype</h1>

      <p>
        The value of <code>Intl.Locale.prototype</code> is <emu-xref href="#sec-properties-of-intl-locale-prototype-object" id="_ref_525"><a href="#sec-properties-of-intl-locale-prototype-object">%Locale.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.locale-internal-slots">
      <h1><span class="secnum">14.2.2</span> Internal slots</h1>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « <emu-val>"ca"</emu-val>, <emu-val>"co"</emu-val>, <emu-val>"hc"</emu-val>, <emu-val>"kf"</emu-val>, <emu-val>"kn"</emu-val>, <emu-val>"nu"</emu-val> ». If <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_526"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[RelevantExtensionKeys]] does not contain <emu-val>"kf"</emu-val>, then remove <emu-val>"kf"</emu-val> from <emu-xref href="#sec-intl-locale-constructor" id="_ref_527"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>.[[RelevantExtensionKeys]]. If <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_528"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>.[[RelevantExtensionKeys]] does not contain <emu-val>"kn"</emu-val>, then remove <emu-val>"kn"</emu-val> from <emu-xref href="#sec-intl-locale-constructor" id="_ref_529"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>.[[RelevantExtensionKeys]].
      </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-locale-prototype-object">
    <h1><span class="secnum">14.3</span> Properties of the Intl.Locale Prototype Object</h1>

    <p>
      The Intl.Locale prototype object is itself an ordinary object. <dfn>%Locale.prototype%</dfn> is not an Intl.Locale instance and does not have an [[InitializedLocale]] internal slot or any of the other internal slots of Intl.Locale instance objects.
    </p>

    <emu-clause id="sec-Intl.Locale.prototype.constructor">
      <h1><span class="secnum">14.3.1</span> Intl.Locale.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.Locale.prototype.constructor</code> is <emu-xref href="#sec-intl-locale-constructor" id="_ref_530"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype-@@tostringtag">
      <h1><span class="secnum">14.3.2</span> Intl.Locale.prototype[ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.Locale"</emu-val>.
      </p>

      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.maximize">
      <h1><span class="secnum">14.3.3</span> Intl.Locale.prototype.maximize ( )</h1>

      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_531"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Let <var>maximal</var> be the result of the <a href="https://www.unicode.org/reports/tr35/#Likely_Subtags">Add Likely Subtags</a> algorithm applied to <var>loc</var>.[[Locale]]. If an error is signaled, set <var>maximal</var> to <var>loc</var>.[[Locale]].</li><li>Return !&nbsp;<emu-xref aoid="Construct" id="_ref_532"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-locale-constructor" id="_ref_533"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>, <var>maximal</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.minimize">
      <h1><span class="secnum">14.3.4</span> Intl.Locale.prototype.minimize ( )</h1>

      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_534"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Let <var>minimal</var> be the result of the <a href="https://www.unicode.org/reports/tr35/#Likely_Subtags">Remove Likely Subtags</a> algorithm applied to <var>loc</var>.[[Locale]]. If an error is signaled, set <var>minimal</var> to <var>loc</var>.[[Locale]].</li><li>Return !&nbsp;<emu-xref aoid="Construct" id="_ref_535"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-locale-constructor" id="_ref_536"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>, <var>minimal</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.toString">
      <h1><span class="secnum">14.3.5</span> Intl.Locale.prototype.toString ( )</h1>

      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_537"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Return <var>loc</var>.[[Locale]].</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.baseName">
      <h1><span class="secnum">14.3.6</span> get Intl.Locale.prototype.baseName</h1>
      <p><code>Intl.Locale.prototype.baseName</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. The following algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_538"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Let <var>locale</var> be <var>loc</var>.[[Locale]].</li><li>Return the substring of <var>locale</var> corresponding to the <code>unicode_language_id</code> production.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.calendar">
      <h1><span class="secnum">14.3.7</span> get Intl.Locale.prototype.calendar</h1>
      <p><code>Intl.Locale.prototype.calendar</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_539"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Return <var>loc</var>.[[Calendar]].</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.caseFirst">
      <h1><span class="secnum">14.3.8</span> get Intl.Locale.prototype.caseFirst</h1>
      <p>This property only exists if <emu-xref href="#sec-intl-locale-constructor" id="_ref_540"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>.[[RelevantExtensionKeys]] contains <emu-val>"kf"</emu-val>.</p>
      <p><code>Intl.Locale.prototype.caseFirst</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_541"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Return <var>loc</var>.[[CaseFirst]].</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.collation">
      <h1><span class="secnum">14.3.9</span> get Intl.Locale.prototype.collation</h1>
      <p><code>Intl.Locale.prototype.collation</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_542"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Return <var>loc</var>.[[Collation]].</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.hourCycle">
      <h1><span class="secnum">14.3.10</span> get Intl.Locale.prototype.hourCycle</h1>
      <p><code>Intl.Locale.prototype.hourCycle</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_543"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Return <var>loc</var>.[[HourCycle]].</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.numeric">
      <h1><span class="secnum">14.3.11</span> get Intl.Locale.prototype.numeric</h1>
      <p>This property only exists if <emu-xref href="#sec-intl-locale-constructor" id="_ref_544"><a href="#sec-intl-locale-constructor">%Locale%</a></emu-xref>.[[RelevantExtensionKeys]] contains <emu-val>"kn"</emu-val>.</p>
      <p><code>Intl.Locale.prototype.numeric</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_545"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Return <var>loc</var>.[[Numeric]].</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.numberingSystem">
      <h1><span class="secnum">14.3.12</span> get Intl.Locale.prototype.numberingSystem</h1>
      <p><code>Intl.Locale.prototype.numberingSystem</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_546"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Return <var>loc</var>.[[NumberingSystem]].</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.language">
      <h1><span class="secnum">14.3.13</span> get Intl.Locale.prototype.language</h1>
      <p><code>Intl.Locale.prototype.language</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. The following algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_547"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Let <var>locale</var> be <var>loc</var>.[[Locale]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>locale</var> matches the <code>unicode_locale_id</code> production.</li><li>Return the substring of <var>locale</var> corresponding to the <code>unicode_language_subtag</code> production of the <code>unicode_language_id</code>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.script">
      <h1><span class="secnum">14.3.14</span> get Intl.Locale.prototype.script</h1>
      <p><code>Intl.Locale.prototype.script</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. The following algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_548"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Let <var>locale</var> be <var>loc</var>.[[Locale]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>locale</var> matches the <code>unicode_locale_id</code> production.</li><li>If the <code>unicode_language_id</code> production of <var>locale</var> does not contain the <code>["-" unicode_script_subtag]</code> sequence, return <emu-val>undefined</emu-val>.</li><li>Return the substring of <var>locale</var> corresponding to the <code>unicode_script_subtag</code> production of the <code>unicode_language_id</code>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.Locale.prototype.region">
      <h1><span class="secnum">14.3.15</span> get Intl.Locale.prototype.region</h1>
      <p><code>Intl.Locale.prototype.region</code> is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. The following algorithm refers to <a href="https://www.unicode.org/reports/tr35/#Identifiers">UTS 35's Unicode Language and Locale Identifiers grammar</a>. Its get accessor function performs the following steps:</p>
      <emu-alg><ol><li>Let <var>loc</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_549"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>loc</var>, [[InitializedLocale]]).</li><li>Let <var>locale</var> be <var>loc</var>.[[Locale]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>locale</var> matches the <code>unicode_locale_id</code> production.</li><li>If the <code>unicode_language_id</code> production of <var>locale</var> does not contain the <code>["-" unicode_region_subtag]</code> sequence, return <emu-val>undefined</emu-val>.</li><li>Return the substring of <var>locale</var> corresponding to the <code>unicode_region_subtag</code> production of the <code>unicode_language_id</code>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./numberformat.html"><emu-clause id="numberformat-objects">
  <h1><span class="secnum">15</span> NumberFormat Objects</h1>

  <emu-clause id="sec-intl-numberformat-constructor">
    <h1><span class="secnum">15.1</span> The Intl.NumberFormat Constructor</h1>

    <p>
      The NumberFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%NumberFormat%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_550"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_93"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-intl.numberformat">
      <h1><span class="secnum">15.1.1</span> Intl.NumberFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        When the <code>Intl.NumberFormat</code> function is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, let <var>newTarget</var> be the <emu-xref href="#active-function-object"><a href="https://tc39.es/ecma262/#active-function-object">active function object</a></emu-xref>, else let <var>newTarget</var> be NewTarget.</li><li>Let <var>numberFormat</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_551"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <emu-val>"%NumberFormat.prototype%"</emu-val>, « [[InitializedNumberFormat]], [[Locale]], [[DataLocale]], [[NumberingSystem]], [[Style]], [[Unit]], [[UnitDisplay]], [[Currency]], [[CurrencyDisplay]], [[CurrencySign]], [[MinimumIntegerDigits]], [[MinimumFractionDigits]], [[MaximumFractionDigits]], [[MinimumSignificantDigits]], [[MaximumSignificantDigits]], [[RoundingType]], [[Notation]], [[CompactDisplay]], [[UseGrouping]], [[SignDisplay]], [[BoundFormat]] »).</li><li>Perform ?&nbsp;<emu-xref aoid="InitializeNumberFormat" id="_ref_552"><a href="#sec-initializenumberformat">InitializeNumberFormat</a></emu-xref>(<var>numberFormat</var>, <var>locales</var>, <var>options</var>).</li><li>If the implementation supports the normative optional <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_94"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>, then<ol><li>Let <var>this</var> be the <emu-val>this</emu-val> value.</li><li>Return ?&nbsp;<emu-xref aoid="ChainNumberFormat" id="_ref_553"><a href="#sec-chainnumberformat">ChainNumberFormat</a></emu-xref>(<var>numberFormat</var>, NewTarget, <var>this</var>).</li></ol></li><li>Return <var>numberFormat</var>.</li></ol></emu-alg>

      <emu-normative-optional>
      <emu-clause id="sec-chainnumberformat" aoid="ChainNumberFormat">
        <h1><span class="secnum">15.1.1.1</span> ChainNumberFormat ( <var>numberFormat</var>, <var>newTarget</var>, <var>this</var> )</h1>
        <emu-alg><ol><li>If <var>newTarget</var> is <emu-val>undefined</emu-val> and ?&nbsp;<emu-xref aoid="OrdinaryHasInstance" id="_ref_554"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_555"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, <var>this</var>) is <emu-val>true</emu-val>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="DefinePropertyOrThrow" id="_ref_556"><a href="https://tc39.es/ecma262/#sec-definepropertyorthrow">DefinePropertyOrThrow</a></emu-xref>(<var>this</var>, <emu-xref href="#intl-object" id="_ref_557"><a href="#intl-object">%Intl%</a></emu-xref>.[[FallbackSymbol]], PropertyDescriptor{ [[Value]]: <var>numberFormat</var>, [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }).</li><li>Return <var>this</var>.</li></ol></li><li>Return <var>numberFormat</var>.</li></ol></emu-alg>
      </emu-clause>
      </emu-normative-optional>
    </emu-clause>

    <emu-clause id="sec-initializenumberformat" aoid="InitializeNumberFormat">
      <h1><span class="secnum">15.1.2</span> InitializeNumberFormat ( <var>numberFormat</var>, <var>locales</var>, <var>options</var> )</h1>

      <p>
        The abstract operation InitializeNumberFormat accepts the arguments <var>numberFormat</var> (which must be an object), <var>locales</var>, and <var>options</var>. It initializes <var>numberFormat</var> as a NumberFormat object. The following steps are taken:
      </p>

      <p>
        The following algorithm refers to the <code>type</code> nonterminal from <a href="https://www.unicode.org/reports/tr35/#Unicode_locale_identifier">UTS 35's Unicode Locale Identifier grammar</a>.
      </p>

      <emu-alg><ol><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_558"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_559"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_560"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[localeMatcher]] to <var>matcher</var>.</li><li>Let <var>numberingSystem</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_561"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numberingSystem"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>numberingSystem</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>numberingSystem</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[nu]] to <var>numberingSystem</var>.</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_562"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_563"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_564"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_565"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>.[[RelevantExtensionKeys]], <var>localeData</var>).</li><li>Set <var>numberFormat</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Set <var>numberFormat</var>.[[DataLocale]] to <var>r</var>.[[dataLocale]].</li><li>Set <var>numberFormat</var>.[[NumberingSystem]] to <var>r</var>.[[nu]].</li><li>Perform ?&nbsp;<emu-xref aoid="SetNumberFormatUnitOptions" id="_ref_566"><a href="#sec-setnumberformatunitoptions">SetNumberFormatUnitOptions</a></emu-xref>(<var>numberFormat</var>, <var>options</var>).</li><li>Let <var>style</var> be <var>numberFormat</var>.[[Style]].</li><li>If <var>style</var> is <emu-val>"currency"</emu-val>, then<ol><li>Let <var>currency</var> be <var>numberFormat</var>.[[Currency]].</li><li>Let <var>cDigits</var> be <emu-xref aoid="CurrencyDigits" id="_ref_567"><a href="#sec-currencydigits">CurrencyDigits</a></emu-xref>(<var>currency</var>).</li><li>Let <var>mnfdDefault</var> be <var>cDigits</var>.</li><li>Let <var>mxfdDefault</var> be <var>cDigits</var>.</li></ol></li><li>Else,<ol><li>Let <var>mnfdDefault</var> be 0.</li><li>If <var>style</var> is <emu-val>"percent"</emu-val>, then<ol><li>Let <var>mxfdDefault</var> be 0.</li></ol></li><li>Else,<ol><li>Let <var>mxfdDefault</var> be 3.</li></ol></li></ol></li><li>Let <var>notation</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_568"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"notation"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"standard"</emu-val>, <emu-val>"scientific"</emu-val>, <emu-val>"engineering"</emu-val>, <emu-val>"compact"</emu-val> », <emu-val>"standard"</emu-val>).</li><li>Set <var>numberFormat</var>.[[Notation]] to <var>notation</var>.</li><li>Perform ?&nbsp;<emu-xref aoid="SetNumberFormatDigitOptions" id="_ref_569"><a href="#sec-setnfdigitoptions">SetNumberFormatDigitOptions</a></emu-xref>(<var>numberFormat</var>, <var>options</var>, <var>mnfdDefault</var>, <var>mxfdDefault</var>, <var>notation</var>).</li><li>Let <var>compactDisplay</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_570"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"compactDisplay"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"short"</emu-val>, <emu-val>"long"</emu-val> », <emu-val>"short"</emu-val>).</li><li>If <var>notation</var> is <emu-val>"compact"</emu-val>, then<ol><li>Set <var>numberFormat</var>.[[CompactDisplay]] to <var>compactDisplay</var>.</li></ol></li><li>Let <var>useGrouping</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_571"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"useGrouping"</emu-val>, <emu-val>"boolean"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>true</emu-val>).</li><li>Set <var>numberFormat</var>.[[UseGrouping]] to <var>useGrouping</var>.</li><li>Let <var>signDisplay</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_572"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"signDisplay"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"auto"</emu-val>, <emu-val>"never"</emu-val>, <emu-val>"always"</emu-val>, <emu-val>"exceptZero"</emu-val> », <emu-val>"auto"</emu-val>).</li><li>Set <var>numberFormat</var>.[[SignDisplay]] to <var>signDisplay</var>.</li><li>Return <var>numberFormat</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-setnfdigitoptions" aoid="SetNumberFormatDigitOptions">
      <h1><span class="secnum">15.1.3</span> SetNumberFormatDigitOptions ( <var>intlObj</var>, <var>options</var>, <var>mnfdDefault</var>, <var>mxfdDefault</var>, <var>notation</var> )</h1>
      <p>The abstract operation SetNumberFormatDigitOptions takes arguments <var>intlObj</var> (an Object), <var>options</var> (an Object), <var>mnfdDefault</var> (a Number), <var>mxfdDefault</var> (a Number), and <var>notation</var> (a String). It populates the internal slots of <var>intlObj</var> that affect locale-independent number rounding (see <emu-xref href="#sec-formatnumberstring" id="_ref_95"><a href="#sec-formatnumberstring">15.5.3</a></emu-xref>). It performs the following steps when called:</p>
      <emu-alg><ol><li>Let <var>mnid</var> be ?&nbsp;<emu-xref aoid="GetNumberOption" id="_ref_573"><a href="#sec-getnumberoption">GetNumberOption</a></emu-xref>(<var>options</var>, <emu-val>"minimumIntegerDigits,"</emu-val>, 1, 21, 1).</li><li>Let <var>mnfd</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_574"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"minimumFractionDigits"</emu-val>).</li><li>Let <var>mxfd</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_575"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"maximumFractionDigits"</emu-val>).</li><li>Let <var>mnsd</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_576"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"minimumSignificantDigits"</emu-val>).</li><li>Let <var>mxsd</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_577"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>options</var>, <emu-val>"maximumSignificantDigits"</emu-val>).</li><li>Set <var>intlObj</var>.[[MinimumIntegerDigits]] to <var>mnid</var>.</li><li>If <var>mnsd</var> is not <emu-val>undefined</emu-val> or <var>mxsd</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>hasSd</var> be <emu-val>true</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>hasSd</var> be <emu-val>false</emu-val>.</li></ol></li><li>If <var>mnfd</var> is not <emu-val>undefined</emu-val> or <var>mxfd</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>hasFd</var> be <emu-val>true</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>hasFd</var> be <emu-val>false</emu-val>.</li></ol></li><li>Let <var>needSd</var> be <var>hasSd</var>.</li><li>If <var>hasSd</var> is <emu-val>true</emu-val>, or <var>hasFd</var> is <emu-val>false</emu-val> and <var>notation</var> is <emu-val>"compact"</emu-val>, then<ol><li>Let <var>needFd</var> be <emu-val>false</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>needFd</var> be <emu-val>true</emu-val>.</li></ol></li><li>If <var>needSd</var> is <emu-val>true</emu-val>, then<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>hasSd</var> is <emu-val>true</emu-val>.</li><li>Set <var>mnsd</var> to ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_578"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mnsd</var>, 1, 21, 1).</li><li>Set <var>mxsd</var> to ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_579"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mxsd</var>, <var>mnsd</var>, 21, 21).</li><li>Set <var>intlObj</var>.[[MinimumSignificantDigits]] to <var>mnsd</var>.</li><li>Set <var>intlObj</var>.[[MaximumSignificantDigits]] to <var>mxsd</var>.</li></ol></li><li>If <var>needFd</var> is <emu-val>true</emu-val>, then<ol><li>If <var>hasFd</var> is <emu-val>true</emu-val>, then<ol><li>Set <var>mnfd</var> to ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_580"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mnfd</var>, 0, 20, <emu-val>undefined</emu-val>).</li><li>Set <var>mxfd</var> to ?&nbsp;<emu-xref aoid="DefaultNumberOption" id="_ref_581"><a href="#sec-defaultnumberoption">DefaultNumberOption</a></emu-xref>(<var>mxfd</var>, 0, 20, <emu-val>undefined</emu-val>).</li><li>If <var>mnfd</var> is <emu-val>undefined</emu-val>, set <var>mnfd</var> to <emu-xref aoid="min"><a href="https://tc39.es/ecma262/#eqn-min">min</a></emu-xref>(<var>mnfdDefault</var>, <var>mxfd</var>).</li><li>Else if <var>mxfd</var> is <emu-val>undefined</emu-val>, set <var>mxfd</var> to <emu-xref aoid="max"><a href="https://tc39.es/ecma262/#eqn-max">max</a></emu-xref>(<var>mxfdDefault</var>, <var>mnfd</var>).</li><li>Else if <var>mnfd</var> is greater than <var>mxfd</var>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Set <var>intlObj</var>.[[MinimumFractionDigits]] to <var>mnfd</var>.</li><li>Set <var>intlObj</var>.[[MaximumFractionDigits]] to <var>mxfd</var>.</li></ol></li><li>Else,<ol><li>Set <var>intlObj</var>.[[MinimumFractionDigits]] to <var>mnfdDefault</var>.</li><li>Set <var>intlObj</var>.[[MaximumFractionDigits]] to <var>mxfdDefault</var>.</li></ol></li></ol></li><li>If <var>needSd</var> is <emu-val>false</emu-val> and <var>needFd</var> is <emu-val>false</emu-val>, then<ol><li>Set <var>intlObj</var>.[[RoundingType]] to <emu-const>compactRounding</emu-const>.</li></ol></li><li>Else if <var>hasSd</var> is <emu-val>true</emu-val>, then<ol><li>Set <var>intlObj</var>.[[RoundingType]] to <emu-const>significantDigits</emu-const>.</li></ol></li><li>Else,<ol><li>Set <var>intlObj</var>.[[RoundingType]] to <emu-const>fractionDigits</emu-const>.</li></ol></li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-setnumberformatunitoptions" aoid="SetNumberFormatUnitOptions">
      <h1><span class="secnum">15.1.4</span> SetNumberFormatUnitOptions ( <var>intlObj</var>, <var>options</var> )</h1>
      <p>
        The abstract operation SetNumberFormatUnitOptions resolves the user-specified options relating to units onto the intl object.
      </p>
      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_582"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>intlObj</var>) is Object.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_583"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>options</var>) is Object.</li><li>Let <var>style</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_584"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"decimal"</emu-val>, <emu-val>"percent"</emu-val>, <emu-val>"currency"</emu-val>, <emu-val>"unit"</emu-val> », <emu-val>"decimal"</emu-val>).</li><li>Set <var>intlObj</var>.[[Style]] to <var>style</var>.</li><li>Let <var>currency</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_585"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"currency"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>currency</var> is <emu-val>undefined</emu-val>, then<ol><li>If <var>style</var> is <emu-val>"currency"</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li></ol></li><li>Else,<ol><li>If the result of <emu-xref aoid="IsWellFormedCurrencyCode" id="_ref_586"><a href="#sec-iswellformedcurrencycode">IsWellFormedCurrencyCode</a></emu-xref>(<var>currency</var>) is <emu-val>false</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Let <var>currencyDisplay</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_587"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"currencyDisplay"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"code"</emu-val>, <emu-val>"symbol"</emu-val>, <emu-val>"narrowSymbol"</emu-val>, <emu-val>"name"</emu-val> », <emu-val>"symbol"</emu-val>).</li><li>Let <var>currencySign</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_588"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"currencySign"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"standard"</emu-val>, <emu-val>"accounting"</emu-val> », <emu-val>"standard"</emu-val>).</li><li>Let <var>unit</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_589"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"unit"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>unit</var> is <emu-val>undefined</emu-val>, then<ol><li>If <var>style</var> is <emu-val>"unit"</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li></ol></li><li>Else,<ol><li>If the result of <emu-xref aoid="IsWellFormedUnitIdentifier" id="_ref_590"><a href="#sec-iswellformedunitidentifier">IsWellFormedUnitIdentifier</a></emu-xref>(<var>unit</var>) is <emu-val>false</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Let <var>unitDisplay</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_591"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"unitDisplay"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, <emu-val>"long"</emu-val> », <emu-val>"short"</emu-val>).</li><li>If <var>style</var> is <emu-val>"currency"</emu-val>, then<ol><li>Let <var>currency</var> be the result of converting <var>currency</var> to upper case as specified in <emu-xref href="#sec-case-sensitivity-and-case-mapping" id="_ref_96"><a href="#sec-case-sensitivity-and-case-mapping">6.1</a></emu-xref>.</li><li>Set <var>intlObj</var>.[[Currency]] to <var>currency</var>.</li><li>Set <var>intlObj</var>.[[CurrencyDisplay]] to <var>currencyDisplay</var>.</li><li>Set <var>intlObj</var>.[[CurrencySign]] to <var>currencySign</var>.</li></ol></li><li>If <var>style</var> is <emu-val>"unit"</emu-val>, then<ol><li>Set <var>intlObj</var>.[[Unit]] to <var>unit</var>.</li><li>Set <var>intlObj</var>.[[UnitDisplay]] to <var>unitDisplay</var>.</li></ol></li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-numberformat-constructor">
    <h1><span class="secnum">15.2</span> Properties of the Intl.NumberFormat Constructor</h1>

    <p>
      The Intl.NumberFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-intl.numberformat.prototype">
      <h1><span class="secnum">15.2.1</span> Intl.NumberFormat.prototype</h1>

      <p>
        The value of <code>Intl.NumberFormat.prototype</code> is <emu-xref href="#sec-properties-of-intl-numberformat-prototype-object" id="_ref_592"><a href="#sec-properties-of-intl-numberformat-prototype-object">%NumberFormat.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.supportedlocalesof">
      <h1><span class="secnum">15.2.2</span> Intl.NumberFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_593"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_594"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_595"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat-internal-slots">
      <h1><span class="secnum">15.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_97"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « <emu-val>"nu"</emu-val> ».
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        Unicode Technical Standard 35 describes three locale extension keys that are relevant to number formatting: <emu-val>"cu"</emu-val> for currency, <emu-val>"cf"</emu-val> for currency format style, and <emu-val>"nu"</emu-val> for numbering system. Intl.NumberFormat, however, requires that the currency of a currency format is specified through the currency property in the options objects, and the currency format style of a currency format is specified through the currencySign property in the options objects.
      </div></emu-note>

      <p>
        The value of the [[LocaleData]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_98"><a href="#sec-internal-slots">9.1</a></emu-xref> and the following additional constraints:
      </p>

      <ul>
        <li>The list that is the value of the <emu-val>"nu"</emu-val> field of any locale field of [[LocaleData]] must not include the values <emu-val>"native"</emu-val>, <emu-val>"traditio"</emu-val>, or <emu-val>"finance"</emu-val>.</li>
        <li>[[LocaleData]].[[&lt;<var>locale</var>&gt;]] must have a [[patterns]] field for all locale values <var>locale</var>. The value of this field must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>, which must have fields with the names of the four number format styles: <emu-val>"decimal"</emu-val>, <emu-val>"percent"</emu-val>, <emu-val>"currency"</emu-val>, and <emu-val>"unit"</emu-val>.</li>
        <li>
          The two fields <emu-val>"currency"</emu-val> and <emu-val>"unit"</emu-val> noted above must be Records with at least one field, <emu-val>"fallback"</emu-val>.
          The <emu-val>"currency"</emu-val> may have additional fields with keys corresponding to currency codes according to <emu-xref href="#sec-currency-codes" id="_ref_99"><a href="#sec-currency-codes">6.3</a></emu-xref>.
          Each field of <emu-val>"currency"</emu-val> must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with fields corresponding to the possible currencyDisplay values: <emu-val>"code"</emu-val>, <emu-val>"symbol"</emu-val>, <emu-val>"narrowSymbol"</emu-val>, and <emu-val>"name"</emu-val>.
          Each of those fields must contain a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with fields corresponding to the possible currencySign values: <emu-val>"standard"</emu-val> or <emu-val>"accounting"</emu-val>. The <emu-val>"unit"</emu-val> field (of [[LocaleData]].[[&lt;<var>locale</var>&gt;]]) may have additional fields beyond the required field <emu-val>"fallback"</emu-val> with keys corresponding to core measurement unit identifiers corresponding to <emu-xref href="#sec-measurement-unit-identifiers" id="_ref_100"><a href="#sec-measurement-unit-identifiers">6.5</a></emu-xref>.
          Each field of <emu-val>"unit"</emu-val> must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with fields corresponding to the possible unitDisplay values: <emu-val>"narrow"</emu-val>, <emu-val>"short"</emu-val>, and <emu-val>"long"</emu-val>.
        </li>
        <li>All of the leaf fields so far described for the patterns tree (<emu-val>"decimal"</emu-val>, <emu-val>"percent"</emu-val>, great-grandchildren of <emu-val>"currency"</emu-val>, and grandchildren of <emu-val>"unit"</emu-val>) must be Records with the keys <emu-val>"positivePattern"</emu-val>, <emu-val>"zeroPattern"</emu-val>, and <emu-val>"negativePattern"</emu-val>.</li>
        <li>
          The value of the aforementioned fields (the sign-dependent pattern fields) must be string values that must contain the substring <emu-val>"{number}"</emu-val>.
          <emu-val>"positivePattern"</emu-val> must contain the substring <emu-val>"{plusSign}"</emu-val> but not <emu-val>"{minusSign}"</emu-val>; <emu-val>"negativePattern"</emu-val> must contain the substring <emu-val>"{minusSign}"</emu-val> but not <emu-val>"{plusSign}"</emu-val>; and <emu-val>"zeroPattern"</emu-val> must not contain either <emu-val>"{plusSign}"</emu-val> or <emu-val>"{minusSign}"</emu-val>.
          Additionally, the values within the <emu-val>"percent"</emu-val> field must also contain the substring <emu-val>"{percentSign}"</emu-val>; the values within the <emu-val>"currency"</emu-val> field must also contain one or more of the following substrings: <emu-val>"{currencyCode}"</emu-val>, <emu-val>"{currencyPrefix}"</emu-val>, or <emu-val>"{currencySuffix}"</emu-val>; and the values within the <emu-val>"unit"</emu-val> field must also contain one or more of the following substrings: <emu-val>"{unitPrefix}"</emu-val> or <emu-val>"{unitSuffix}"</emu-val>.
          The pattern strings must not contain any characters in the General Category "Number, decimal digit" as specified by the Unicode Standard.
        </li>
        <li>[[LocaleData]].[[&lt;<var>locale</var>&gt;]] must also have a [[notationSubPatterns]] field for all locale values <var>locale</var>. The value of this field must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>, which must have two fields: [[scientific]] and [[compact]]. The [[scientific]] field must be a string value containing the substrings <emu-val>"{number}"</emu-val>, <emu-val>"{scientificSeparator}"</emu-val>, and <emu-val>"{scientificExponent}"</emu-val>. The [[compact]] field must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with two fields: <emu-val>"short"</emu-val> and <emu-val>"long"</emu-val>. Each of these fields must be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> with <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> keys corresponding to all discrete magnitudes the implementation supports for compact notation. Each of these fields must be a string value which may contain the substring <emu-val>"{number}"</emu-val>. Strings descended from <emu-val>"short"</emu-val> must contain the substring <emu-val>"{compactSymbol}"</emu-val>, and strings descended from <emu-val>"long"</emu-val> must contain the substring <emu-val>"{compactName}"</emu-val>.</li>
      </ul>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        It is recommended that implementations use the locale data provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-numberformat-prototype-object">
    <h1><span class="secnum">15.3</span> Properties of the Intl.NumberFormat Prototype Object</h1>

    <p>
      The Intl.NumberFormat prototype object is itself an ordinary object. <dfn>%NumberFormat.prototype%</dfn> is not an Intl.NumberFormat instance and does not have an [[InitializedNumberFormat]] internal slot or any of the other internal slots of Intl.NumberFormat instance objects.
    </p>

    <emu-clause id="sec-intl.numberformat.prototype.constructor">
      <h1><span class="secnum">15.3.1</span> Intl.NumberFormat.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.NumberFormat.prototype.constructor</code> is <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_596"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype-@@tostringtag">
      <h1><span class="secnum">15.3.2</span> Intl.NumberFormat.prototype [ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.NumberFormat"</emu-val>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.format">
      <h1><span class="secnum">15.3.3</span> get Intl.NumberFormat.prototype.format</h1>

      <p>
        Intl.NumberFormat.prototype.format is an <emu-xref href="#sec-object-type"><a href="https://tc39.es/ecma262/#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>nf</var> be the <emu-val>this</emu-val> value.</li><li>If the implementation supports the normative optional <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_101"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>, then<ol><li>Set <var>nf</var> to ?&nbsp;<emu-xref aoid="UnwrapNumberFormat" id="_ref_597"><a href="#sec-unwrapnumberformat">UnwrapNumberFormat</a></emu-xref>(<var>nf</var>).</li></ol></li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_598"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, [[InitializedNumberFormat]]).</li><li>If <var>nf</var>.[[BoundFormat]] is <emu-val>undefined</emu-val>, then<ol><li>Let <var>F</var> be a new built-in <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> as defined in Number Format Functions (<emu-xref href="#sec-number-format-functions" id="_ref_102"><a href="#sec-number-format-functions">15.5.2</a></emu-xref>).</li><li>Set <var>F</var>.[[NumberFormat]] to <var>nf</var>.</li><li>Set <var>nf</var>.[[BoundFormat]] to <var>F</var>.</li></ol></li><li>Return <var>nf</var>.[[BoundFormat]].</li></ol></emu-alg>

      <emu-note><span class="note">Note</span><div class="note-contents">
        The returned function is bound to <var>nf</var> so that it can be passed directly to <code>Array.prototype.map</code> or other functions.
        This is considered a historical artefact, as part of a convention which is no longer followed for new features, but is preserved to maintain compatibility with existing programs.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.formattoparts">
      <h1><span class="secnum">15.3.4</span> Intl.NumberFormat.prototype.formatToParts ( <var>value</var> )</h1>

      <p>
        When the <code>formatToParts</code> method is called with an optional argument <var>value</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>nf</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_599"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, [[InitializedNumberFormat]]).</li><li>Let <var>x</var> be ?&nbsp;<emu-xref aoid="ToNumeric" id="_ref_600"><a href="https://tc39.es/ecma262/#sec-tonumeric">ToNumeric</a></emu-xref>(<var>value</var>).</li><li>Return ?&nbsp;<emu-xref aoid="FormatNumericToParts" id="_ref_601"><a href="#sec-formatnumbertoparts">FormatNumericToParts</a></emu-xref>(<var>nf</var>, <var>x</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.numberformat.prototype.resolvedoptions">
      <h1><span class="secnum">15.3.5</span> Intl.NumberFormat.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>nf</var> be the <emu-val>this</emu-val> value.</li><li>If the implementation supports the normative optional <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_103"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>, then<ol><li>Set <var>nf</var> to ?&nbsp;<emu-xref aoid="UnwrapNumberFormat" id="_ref_602"><a href="#sec-unwrapnumberformat">UnwrapNumberFormat</a></emu-xref>(<var>nf</var>).</li></ol></li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_603"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>nf</var>, [[InitializedNumberFormat]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-numberformat-resolvedoptions-properties" id="_ref_104"><a href="#table-numberformat-resolvedoptions-properties">Table 11</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>Let <var>v</var> be the value of <var>nf</var>'s internal slot whose name is the Internal Slot value of the current row.</li><li>If <var>v</var> is not <emu-val>undefined</emu-val>, then<ol><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_604"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-numberformat-resolvedoptions-properties"><figure><figcaption>Table 11: Resolved Options of NumberFormat Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td>[[NumberingSystem]]</td>
            <td><emu-val>"numberingSystem"</emu-val></td>
          </tr>
          <tr>
            <td>[[Style]]</td>
            <td><emu-val>"style"</emu-val></td>
          </tr>
          <tr>
            <td>[[Currency]]</td>
            <td><emu-val>"currency"</emu-val></td>
          </tr>
          <tr>
            <td>[[CurrencyDisplay]]</td>
            <td><emu-val>"currencyDisplay"</emu-val></td>
          </tr>
          <tr>
            <td>[[CurrencySign]]</td>
            <td><emu-val>"currencySign"</emu-val></td>
          </tr>
          <tr>
            <td>[[Unit]]</td>
            <td><emu-val>"unit"</emu-val></td>
          </tr>
          <tr>
            <td>[[UnitDisplay]]</td>
            <td><emu-val>"unitDisplay"</emu-val></td>
          </tr>
          <tr>
            <td>[[MinimumIntegerDigits]]</td>
            <td><emu-val>"minimumIntegerDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MinimumFractionDigits]]</td>
            <td><emu-val>"minimumFractionDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MaximumFractionDigits]]</td>
            <td><emu-val>"maximumFractionDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MinimumSignificantDigits]]</td>
            <td><emu-val>"minimumSignificantDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MaximumSignificantDigits]]</td>
            <td><emu-val>"maximumSignificantDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[UseGrouping]]</td>
            <td><emu-val>"useGrouping"</emu-val></td>
          </tr>
          <tr>
            <td>[[Notation]]</td>
            <td><emu-val>"notation"</emu-val></td>
          </tr>
          <tr>
            <td>[[CompactDisplay]]</td>
            <td><emu-val>"compactDisplay"</emu-val></td>
          </tr>
          <tr>
            <td>[[SignDisplay]]</td>
            <td><emu-val>"signDisplay"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-numberformat-instances">
    <h1><span class="secnum">15.4</span> Properties of Intl.NumberFormat Instances</h1>

    <p>
      Intl.NumberFormat instances are ordinary objects that inherit properties from <emu-xref href="#sec-properties-of-intl-numberformat-prototype-object" id="_ref_605"><a href="#sec-properties-of-intl-numberformat-prototype-object">%NumberFormat.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.NumberFormat instances have an [[InitializedNumberFormat]] internal slot.
    </p>

    <p>
      Intl.NumberFormat instances also have several internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used for formatting.</li>
      <li>[[DataLocale]] is a String value with the language tag of the nearest locale for which the implementation has data to perform the formatting operation. It will be a parent locale of [[Locale]].</li>
      <li>[[NumberingSystem]] is a String value with the "type" given in Unicode Technical Standard 35 for the numbering system used for formatting.</li>
      <li>[[Style]] is one of the String values <emu-val>"decimal"</emu-val>, <emu-val>"currency"</emu-val>, <emu-val>"percent"</emu-val>, or <emu-val>"unit"</emu-val>, identifying the type of quantity being measured.</li>
      <li>[[Currency]] is a String value with the currency code identifying the currency to be used if formatting with the <emu-val>"currency"</emu-val> unit type. It is only used when [[Style]] has the value <emu-val>"currency"</emu-val>.</li>
      <li>[[CurrencyDisplay]] is one of the String values <emu-val>"code"</emu-val>, <emu-val>"symbol"</emu-val>, <emu-val>"narrowSymbol"</emu-val>, or <emu-val>"name"</emu-val>, specifying whether to display the currency as an ISO 4217 alphabetic currency code, a localized currency symbol, or a localized currency name if formatting with the <emu-val>"currency"</emu-val> style. It is only used when [[Style]] has the value <emu-val>"currency"</emu-val>.</li>
      <li>[[CurrencySign]] is one of the String values <emu-val>"standard"</emu-val> or <emu-val>"accounting"</emu-val>, specifying whether to render negative numbers in accounting format, often signified by parenthesis. It is only used when [[Style]] has the value <emu-val>"currency"</emu-val> and when [[SignDisplay]] is not <emu-val>"never"</emu-val>.</li>
      <li>[[Unit]] is a core unit identifier, as defined by Unicode Technical Standard #35, Part 2, Section 6. It is only used when [[Style]] has the value <emu-val>"unit"</emu-val>.</li>
      <li>[[UnitDisplay]] is one of the String values <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val>, or <emu-val>"long"</emu-val>, specifying whether to display the unit as a symbol, narrow symbol, or localized long name if formatting with the <emu-val>"unit"</emu-val> style. It is only used when [[Style]] has the value <emu-val>"unit"</emu-val>.</li>
      <li>[[MinimumIntegerDigits]] is a non-negative <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref> indicating the minimum <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> digits to be used. Numbers will be padded with leading zeroes if necessary.</li>
      <li>[[MinimumFractionDigits]] and [[MaximumFractionDigits]] are non-negative <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> Number values indicating the minimum and maximum fraction digits to be used. Numbers will be rounded or padded with trailing zeroes if necessary. These properties are only used when [[RoundingType]] is <emu-const>fractionDigits</emu-const>.</li>
      <li>[[MinimumSignificantDigits]] and [[MaximumSignificantDigits]] are positive <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> Number values indicating the minimum and maximum fraction digits to be shown. If present, the formatter uses however many fraction digits are required to display the specified number of significant digits. These properties are only used when [[RoundingType]] is <emu-const>significantDigits</emu-const>.</li>
      <li>[[UseGrouping]] is a Boolean value indicating whether a grouping separator should be used.</li>
      <li>[[RoundingType]] is one of the values <emu-const>fractionDigits</emu-const>, <emu-const>significantDigits</emu-const>, or <emu-const>compactRounding</emu-const>, indicating which rounding strategy to use. If <emu-const>fractionDigits</emu-const>, the number is rounded according to [[MinimumFractionDigits]] and [[MaximumFractionDigits]], as described above. If <emu-const>significantDigits</emu-const>, the number is rounded according to [[MinimumSignificantDigits]] and [[MaximumSignificantDigits]] as described above. If <emu-const>compactRounding</emu-const>, the number is rounded to 1 maximum fraction digit if there is 1 digit before the decimal separator, and otherwise round to 0 fraction digits.</li>
      <li>[[Notation]] is one of the String values <emu-val>"standard"</emu-val>, <emu-val>"scientific"</emu-val>, <emu-val>"engineering"</emu-val>, or <emu-val>"compact"</emu-val>, specifying whether the number should be displayed without scaling, scaled to the units place with the power of ten in scientific notation, scaled to the nearest thousand with the power of ten in scientific notation, or scaled to the nearest locale-dependent compact decimal notation power of ten with the corresponding compact decimal notation affix.</li>
      <li>[[CompactDisplay]] is one of the String values <emu-val>"short"</emu-val> or <emu-val>"long"</emu-val>, specifying whether to display compact notation affixes in short form ("5K") or long form ("5 thousand") if formatting with the <emu-val>"compact"</emu-val> notation. It is only used when [[Notation]] has the value <emu-val>"compact"</emu-val>.</li>
      <li>
        [[SignDisplay]] is one of the String values <emu-val>"auto"</emu-val>, <emu-val>"always"</emu-val>, <emu-val>"never"</emu-val>, or <emu-val>"exceptZero"</emu-val>, specifying whether to show the sign on negative numbers only, positive and negative numbers including zero, neither positive nor negative numbers, or positive and negative numbers but not zero.
        In scientific notation, this slot affects the sign display of the mantissa but not the exponent.
      </li>
    </ul>

    <p>
      Finally, Intl.NumberFormat instances have a [[BoundFormat]] internal slot that caches the function returned by the format accessor (<emu-xref href="#sec-intl.numberformat.prototype.format" id="_ref_105"><a href="#sec-intl.numberformat.prototype.format">15.3.3</a></emu-xref>).
    </p>
  </emu-clause>

  <emu-clause id="sec-numberformat-abstracts">
    <h1><span class="secnum">15.5</span> Abstract Operations for NumberFormat Objects</h1>

    <emu-clause id="sec-currencydigits" aoid="CurrencyDigits">
      <h1><span class="secnum">15.5.1</span> CurrencyDigits ( <var>currency</var> )</h1>

      <p>
        When the CurrencyDigits abstract operation is called with an argument <var>currency</var> (which must be an upper case String value), the following steps are taken:
      </p>

      <emu-alg><ol><li>If the ISO 4217 currency and funds code list contains <var>currency</var> as an alphabetic code, return the minor unit value corresponding to the <var>currency</var> from the list; otherwise, return 2.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-number-format-functions">
      <h1><span class="secnum">15.5.2</span> Number Format Functions</h1>

      <p>A Number format function is an anonymous built-in function that has a [[NumberFormat]] internal slot.</p>
      <p>When a Number format function <var>F</var> is called with optional argument <var>value</var>, the following steps are taken:</p>

      <emu-alg><ol><li>Let <var>nf</var> be <var>F</var>.[[NumberFormat]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_606"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>nf</var>) is Object and <var>nf</var> has an [[InitializedNumberFormat]] internal slot.</li><li>If <var>value</var> is not provided, let <var>value</var> be <emu-val>undefined</emu-val>.</li><li>Let <var>x</var> be ?&nbsp;<emu-xref aoid="ToNumeric" id="_ref_607"><a href="https://tc39.es/ecma262/#sec-tonumeric">ToNumeric</a></emu-xref>(<var>value</var>).</li><li>Return ?&nbsp;<emu-xref aoid="FormatNumeric" id="_ref_608"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>nf</var>, <var>x</var>).</li></ol></emu-alg>

      <p>
        The <emu-val>"length"</emu-val> property of a Number format function is 1.
      </p>
    </emu-clause>

    <emu-clause id="sec-formatnumberstring" aoid="FormatNumericToString">
      <h1><span class="secnum">15.5.3</span> FormatNumericToString ( <var>intlObject</var>, <var>x</var> )</h1>

      <p>
        The FormatNumericToString abstract operation is called with arguments <var>intlObject</var> (which must be an object with [[RoundingType]], [[MinimumSignificantDigits]], [[MaximumSignificantDigits]], [[MinimumIntegerDigits]], [[MinimumFractionDigits]], and [[MaximumFractionDigits]] internal slots), and <var>x</var> (which must be a Number or BigInt value), and returns a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> containing two values: <var>x</var> as a String value with digits formatted according to the five formatting parameters in the field [[FormattedString]], and the final floating decimal value of <var>x</var> after rounding has been performed in the field [[RoundedNumber]].
      </p>

      <emu-alg><ol><li>If <var>x</var> &lt; 0 or <var>x</var> is <emu-val>-0</emu-val><sub>𝔽</sub>, let <var>isNegative</var> be <emu-val>true</emu-val>; else let <var>isNegative</var> be <emu-val>false</emu-val>.</li><li>If <var>isNegative</var>, then<ol><li>Let <var>x</var> be -<var>x</var>.</li></ol></li><li>If <var>intlObject</var>.[[RoundingType]] is <emu-const>significantDigits</emu-const>, then<ol><li>Let <var>result</var> be <emu-xref aoid="ToRawPrecision" id="_ref_609"><a href="#sec-torawprecision">ToRawPrecision</a></emu-xref>(<var>x</var>, <var>intlObject</var>.[[MinimumSignificantDigits]], <var>intlObject</var>.[[MaximumSignificantDigits]]).</li></ol></li><li>Else if <var>intlObject</var>.[[RoundingType]] is <emu-const>fractionDigits</emu-const>, then<ol><li>Let <var>result</var> be <emu-xref aoid="ToRawFixed" id="_ref_610"><a href="#sec-torawfixed">ToRawFixed</a></emu-xref>(<var>x</var>, <var>intlObject</var>.[[MinimumFractionDigits]], <var>intlObject</var>.[[MaximumFractionDigits]]).</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>intlObject</var>.[[RoundingType]] is <emu-const>compactRounding</emu-const>.</li><li>Let <var>result</var> be <emu-xref aoid="ToRawPrecision" id="_ref_611"><a href="#sec-torawprecision">ToRawPrecision</a></emu-xref>(<var>x</var>, 1, 2).</li><li>If <var>result</var>.[[IntegerDigitsCount]] &gt; 1, then<ol><li>Let <var>result</var> be <emu-xref aoid="ToRawFixed" id="_ref_612"><a href="#sec-torawfixed">ToRawFixed</a></emu-xref>(<var>x</var>, 0, 0).</li></ol></li></ol></li><li>Let <var>x</var> be <var>result</var>.[[RoundedNumber]].</li><li>Let <var>string</var> be <var>result</var>.[[FormattedString]].</li><li>Let <var>int</var> be <var>result</var>.[[IntegerDigitsCount]].</li><li>Let <var>minInteger</var> be <var>intlObject</var>.[[MinimumIntegerDigits]].</li><li>If <var>int</var> &lt; <var>minInteger</var>, then<ol><li>Let <var>forwardZeros</var> be the String consisting of <var>minInteger</var>–<var>int</var> occurrences of the character <emu-val>"0"</emu-val>.</li><li>Set <var>string</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>forwardZeros</var> and <var>string</var>.</li></ol></li><li>If <var>isNegative</var>, then<ol><li>Let <var>x</var> be -<var>x</var>.</li></ol></li><li>Return the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[RoundedNumber]]: <var>x</var>, [[FormattedString]]: <var>string</var> }.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitionnumberpattern" aoid="PartitionNumberPattern">
      <h1><span class="secnum">15.5.4</span> PartitionNumberPattern ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>The abstract operation PartitionNumberPattern takes arguments <var>numberFormat</var> (an object initialized as a NumberFormat) and <var>x</var> (a Number or a BigInt). It creates the parts representing the <emu-xref href="#mathematical-value"><a href="https://tc39.es/ecma262/#mathematical-value">mathematical value</a></emu-xref> of <var>x</var> according to the effective locale and the formatting options of <var>numberFormat</var>. It performs the following steps when called:</p>

      <emu-alg><ol><li>Let <var>exponent</var> be 0.</li><li>If <var>x</var> is <emu-val>NaN</emu-val>, then<ol><li>Let <var>n</var> be an implementation- and locale-dependent (ILD) String value indicating the <emu-val>NaN</emu-val> value.</li></ol></li><li>Else if <var>x</var> is <emu-val>+∞</emu-val><sub>𝔽</sub>, then<ol><li>Let <var>n</var> be an ILD String value indicating positive infinity.</li></ol></li><li>Else if <var>x</var> is <emu-val>-∞</emu-val><sub>𝔽</sub>, then<ol><li>Let <var>n</var> be an ILD String value indicating negative infinity.</li></ol></li><li>Else,<ol><li>Set <var>x</var> to <emu-xref href="#ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(<var>x</var>).</li><li>If <var>numberFormat</var>.[[Style]] is <emu-val>"percent"</emu-val>, set <var>x</var> to 100 × <var>x</var>.</li><li>Let <var>exponent</var> be <emu-xref aoid="ComputeExponent" id="_ref_613"><a href="#sec-computeexponent">ComputeExponent</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li><li>Set <var>x</var> to <var>x</var> × 10<sup>-<var>exponent</var></sup>.</li><li>Let <var>formatNumberResult</var> be <emu-xref aoid="FormatNumericToString" id="_ref_614"><a href="#sec-formatnumberstring">FormatNumericToString</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li><li>Let <var>n</var> be <var>formatNumberResult</var>.[[FormattedString]].</li><li>Set <var>x</var> to <var>formatNumberResult</var>.[[RoundedNumber]].</li></ol></li><li>Let <var>pattern</var> be <emu-xref aoid="GetNumberFormatPattern" id="_ref_615"><a href="#sec-getnumberformatpattern">GetNumberFormatPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li><li>Let <var>result</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>patternParts</var> be <emu-xref aoid="PartitionPattern" id="_ref_616"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>).</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>patternPart</var> of <var>patternParts</var>, do<ol><li>Let <var>p</var> be <var>patternPart</var>.[[Type]].</li><li>If <var>p</var> is <emu-val>"literal"</emu-val>, then<ol><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>patternPart</var>.[[Value]] } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"number"</emu-val>, then<ol><li>Let <var>notationSubParts</var> be <emu-xref aoid="PartitionNotationSubPattern" id="_ref_617"><a href="#sec-partitionnotationsubpattern">PartitionNotationSubPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>, <var>n</var>, <var>exponent</var>).</li><li>Append all elements of <var>notationSubParts</var> to <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"plusSign"</emu-val>, then<ol><li>Let <var>plusSignSymbol</var> be the ILND String representing the plus sign.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"plusSign"</emu-val>, [[Value]]: <var>plusSignSymbol</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"minusSign"</emu-val>, then<ol><li>Let <var>minusSignSymbol</var> be the ILND String representing the minus sign.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"minusSign"</emu-val>, [[Value]]: <var>minusSignSymbol</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"percentSign"</emu-val> and <var>numberFormat</var>.[[Style]] is <emu-val>"percent"</emu-val>, then<ol><li>Let <var>percentSignSymbol</var> be the ILND String representing the percent sign.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"percentSign"</emu-val>, [[Value]]: <var>percentSignSymbol</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"unitPrefix"</emu-val> and <var>numberFormat</var>.[[Style]] is <emu-val>"unit"</emu-val>, then<ol><li>Let <var>unit</var> be <var>numberFormat</var>.[[Unit]].</li><li>Let <var>unitDisplay</var> be <var>numberFormat</var>.[[UnitDisplay]].</li><li>Let <var>mu</var> be an ILD String value representing <var>unit</var> before <var>x</var> in <var>unitDisplay</var> form, which may depend on <var>x</var> in languages having different plural forms.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"unit"</emu-val>, [[Value]]: <var>mu</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"unitSuffix"</emu-val> and <var>numberFormat</var>.[[Style]] is <emu-val>"unit"</emu-val>, then<ol><li>Let <var>unit</var> be <var>numberFormat</var>.[[Unit]].</li><li>Let <var>unitDisplay</var> be <var>numberFormat</var>.[[UnitDisplay]].</li><li>Let <var>mu</var> be an ILD String value representing <var>unit</var> after <var>x</var> in <var>unitDisplay</var> form, which may depend on <var>x</var> in languages having different plural forms.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"unit"</emu-val>, [[Value]]: <var>mu</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"currencyCode"</emu-val> and <var>numberFormat</var>.[[Style]] is <emu-val>"currency"</emu-val>, then<ol><li>Let <var>currency</var> be <var>numberFormat</var>.[[Currency]].</li><li>Let <var>cd</var> be <var>currency</var>.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"currency"</emu-val>, [[Value]]: <var>cd</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"currencyPrefix"</emu-val> and <var>numberFormat</var>.[[Style]] is <emu-val>"currency"</emu-val>, then<ol><li>Let <var>currency</var> be <var>numberFormat</var>.[[Currency]].</li><li>Let <var>currencyDisplay</var> be <var>numberFormat</var>.[[CurrencyDisplay]].</li><li>Let <var>cd</var> be an ILD String value representing <var>currency</var> before <var>x</var> in <var>currencyDisplay</var> form, which may depend on <var>x</var> in languages having different plural forms.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"currency"</emu-val>, [[Value]]: <var>cd</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"currencySuffix"</emu-val> and <var>numberFormat</var>.[[Style]] is <emu-val>"currency"</emu-val>, then<ol><li>Let <var>currency</var> be <var>numberFormat</var>.[[Currency]].</li><li>Let <var>currencyDisplay</var> be <var>numberFormat</var>.[[CurrencyDisplay]].</li><li>Let <var>cd</var> be an ILD String value representing <var>currency</var> after <var>x</var> in <var>currencyDisplay</var> form, which may depend on <var>x</var> in languages having different plural forms. If the implementation does not have such a representation of <var>currency</var>, use <var>currency</var> itself.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"currency"</emu-val>, [[Value]]: <var>cd</var> } as the last element of <var>result</var>.</li></ol></li><li>Else,<ol><li>Let <var>unknown</var> be an ILND String based on <var>x</var> and <var>p</var>.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"unknown"</emu-val>, [[Value]]: <var>unknown</var> } as the last element of <var>result</var>.</li></ol></li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-partitionnotationsubpattern" aoid="PartitionNotationSubPattern">
      <h1><span class="secnum">15.5.5</span> PartitionNotationSubPattern ( <var>numberFormat</var>, <var>x</var>, <var>n</var>, <var>exponent</var> )</h1>
      <p>
        The PartitionNotationSubPattern abstract operation is called with arguments <var>numberFormat</var> (which must be an object initialized as a NumberFormat), <var>x</var> (which is a numeric value after rounding is applied), <var>n</var> (which is an intermediate formatted string), and <var>exponent</var> (an <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref>), and creates the corresponding parts for the number and notation according to the effective locale and the formatting options of <var>numberFormat</var>. The following steps are taken:
      </p>
      <emu-alg><ol><li>Let <var>result</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <var>x</var> is <emu-val>NaN</emu-val>, then<ol><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"nan"</emu-val>, [[Value]]: <var>n</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>x</var> is a non-finite Number, then<ol><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"infinity"</emu-val>, [[Value]]: <var>n</var> } as the last element of <var>result</var>.</li></ol></li><li>Else,<ol><li>Let <var>notationSubPattern</var> be <emu-xref aoid="GetNotationSubPattern" id="_ref_618"><a href="#sec-getnotationsubpattern">GetNotationSubPattern</a></emu-xref>(<var>numberFormat</var>, <var>exponent</var>).</li><li>Let <var>patternParts</var> be <emu-xref aoid="PartitionPattern" id="_ref_619"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>notationSubPattern</var>).</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>patternPart</var> of <var>patternParts</var>, do<ol><li>Let <var>p</var> be <var>patternPart</var>.[[Type]].</li><li>If <var>p</var> is <emu-val>"literal"</emu-val>, then<ol><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>patternPart</var>.[[Value]] } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"number"</emu-val>, then<ol><li>If the <var>numberFormat</var>.[[NumberingSystem]] matches one of the values in the <emu-val>"Numbering System"</emu-val> column of <emu-xref href="#table-numbering-system-digits" id="_ref_106"><a href="#table-numbering-system-digits">Table 12</a></emu-xref> below, then<ol><li>Let <var>digits</var> be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> whose 10 String valued elements are the UTF-16 string representations of the 10 <var>digits</var> specified in the <emu-val>"Digits"</emu-val> column of the matching row in <emu-xref href="#table-numbering-system-digits" id="_ref_107"><a href="#table-numbering-system-digits">Table 12</a></emu-xref>.</li><li>Replace each <var>digit</var> in <var>n</var> with the value of <var>digits</var>[<var>digit</var>].</li></ol></li><li>Else use an implementation dependent algorithm to map <var>n</var> to the appropriate representation of <var>n</var> in the given numbering system.</li><li>Let <var>decimalSepIndex</var> be !&nbsp;<emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>n</var>, <emu-val>"."</emu-val>, 0).</li><li>If <var>decimalSepIndex</var> &gt; 0, then<ol><li>Let <var>integer</var> be the substring of <var>n</var> from position 0, inclusive, to position <var>decimalSepIndex</var>, exclusive.</li><li>Let <var>fraction</var> be the substring of <var>n</var> from position <var>decimalSepIndex</var>, exclusive, to the end of <var>n</var>.</li></ol></li><li>Else,<ol><li>Let <var>integer</var> be <var>n</var>.</li><li>Let <var>fraction</var> be <emu-val>undefined</emu-val>.</li></ol></li><li>If the <var>numberFormat</var>.[[UseGrouping]] is <emu-val>true</emu-val>, then<ol><li>Let <var>groupSepSymbol</var> be the implementation-, locale-, and numbering system-dependent (ILND) String representing the grouping separator.</li><li>Let <var>groups</var> be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> whose elements are, in left to right order, the substrings defined by ILND set of locations within the <var>integer</var>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: The number of elements in <var>groups</var> <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> is greater than 0.</li><li>Repeat, while <var>groups</var> <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> is not empty,<ol><li>Remove the first element from <var>groups</var> and let <var>integerGroup</var> be the value of that element.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"integer"</emu-val>, [[Value]]: <var>integerGroup</var> } as the last element of <var>result</var>.</li><li>If <var>groups</var> <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> is not empty, then<ol><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"group"</emu-val>, [[Value]]: <var>groupSepSymbol</var> } as the last element of <var>result</var>.</li></ol></li></ol></li></ol></li><li>Else,<ol><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"integer"</emu-val>, [[Value]]: <var>integer</var> } as the last element of <var>result</var>.</li></ol></li><li>If <var>fraction</var> is not <emu-val>undefined</emu-val>, then<ol><li>Let <var>decimalSepSymbol</var> be the ILND String representing the decimal separator.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"decimal"</emu-val>, [[Value]]: <var>decimalSepSymbol</var> } as the last element of <var>result</var>.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"fraction"</emu-val>, [[Value]]: <var>fraction</var> } as the last element of <var>result</var>.</li></ol></li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"compactSymbol"</emu-val>, then<ol><li>Let <var>compactSymbol</var> be an ILD string representing <var>exponent</var> in short form, which may depend on <var>x</var> in languages having different plural forms. The implementation must be able to provide this string, or else the pattern would not have a <emu-val>"{compactSymbol}"</emu-val> placeholder.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"compact"</emu-val>, [[Value]]: <var>compactSymbol</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"compactName"</emu-val>, then<ol><li>Let <var>compactName</var> be an ILD string representing <var>exponent</var> in long form, which may depend on <var>x</var> in languages having different plural forms. The implementation must be able to provide this string, or else the pattern would not have a <emu-val>"{compactName}"</emu-val> placeholder.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"compact"</emu-val>, [[Value]]: <var>compactName</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"scientificSeparator"</emu-val>, then<ol><li>Let <var>scientificSeparator</var> be the ILND String representing the exponent separator.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"exponentSeparator"</emu-val>, [[Value]]: <var>scientificSeparator</var> } as the last element of <var>result</var>.</li></ol></li><li>Else if <var>p</var> is equal to <emu-val>"scientificExponent"</emu-val>, then<ol><li>If <var>exponent</var> &lt; 0, then<ol><li>Let <var>minusSignSymbol</var> be the ILND String representing the minus sign.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"exponentMinusSign"</emu-val>, [[Value]]: <var>minusSignSymbol</var> } as the last element of <var>result</var>.</li><li>Let <var>exponent</var> be -<var>exponent</var>.</li></ol></li><li>Let <var>exponentResult</var> be <emu-xref aoid="ToRawFixed" id="_ref_620"><a href="#sec-torawfixed">ToRawFixed</a></emu-xref>(<var>exponent</var>, 1, 0, 0).</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"exponentInteger"</emu-val>, [[Value]]: <var>exponentResult</var>.[[FormattedString]] } as the last element of <var>result</var>.</li></ol></li><li>Else,<ol><li>Let <var>unknown</var> be an ILND String based on <var>x</var> and <var>p</var>.</li><li>Append a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"unknown"</emu-val>, [[Value]]: <var>unknown</var> } as the last element of <var>result</var>.</li></ol></li></ol></li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>

      <emu-table id="table-numbering-system-digits"><figure><figcaption>Table 12: Numbering systems with simple digit mappings</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Numbering System</th>
              <th>Digits</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>adlm</td>
            <td>U+1E950 to U+1E959</td>
          </tr>
          <tr>
            <td>ahom</td>
            <td>U+11730 to U+11739</td>
          </tr>
          <tr>
            <td>arab</td>
            <td>U+0660 to U+0669</td>
          </tr>
          <tr>
            <td>arabext</td>
            <td>U+06F0 to U+06F9</td>
          </tr>
          <tr>
            <td>bali</td>
            <td>U+1B50 to U+1B59</td>
          </tr>
          <tr>
            <td>beng</td>
            <td>U+09E6 to U+09EF</td>
          </tr>
          <tr>
            <td>bhks</td>
            <td>U+11C50 to U+11C59</td>
          </tr>
          <tr>
            <td>brah</td>
            <td>U+11066 to U+1106F</td>
          </tr>
          <tr>
            <td>cakm</td>
            <td>U+11136 to U+1113F</td>
          </tr>
          <tr>
            <td>cham</td>
            <td>U+AA50 to U+AA59</td>
          </tr>
          <tr>
            <td>deva</td>
            <td>U+0966 to U+096F</td>
          </tr>
          <tr>
            <td>diak</td>
            <td>U+11950 to U+11959</td>
          </tr>
          <tr>
            <td>fullwide</td>
            <td>U+FF10 to U+FF19</td>
          </tr>
          <tr>
            <td>gong</td>
            <td>U+11DA0 to U+11DA9</td>
          </tr>
          <tr>
            <td>gonm</td>
            <td>U+11D50 to U+11D59</td>
          </tr>
          <tr>
            <td>gujr</td>
            <td>U+0AE6 to U+0AEF</td>
          </tr>
          <tr>
            <td>guru</td>
            <td>U+0A66 to U+0A6F</td>
          </tr>
          <tr>
            <td>hanidec</td>
            <td>U+3007, U+4E00, U+4E8C, U+4E09, U+56DB, U+4E94, U+516D, U+4E03, U+516B, U+4E5D</td>
          </tr>
          <tr>
            <td>hmng</td>
            <td>U+16B50 to U+16B59</td>
          </tr>
          <tr>
            <td>hmnp</td>
            <td>U+1E140 to U+1E149</td>
          </tr>
          <tr>
            <td>java</td>
            <td>U+A9D0 to U+A9D9</td>
          </tr>
          <tr>
            <td>kali</td>
            <td>U+A900 to U+A909</td>
          </tr>
          <tr>
            <td>khmr</td>
            <td>U+17E0 to U+17E9</td>
          </tr>
          <tr>
            <td>knda</td>
            <td>U+0CE6 to U+0CEF</td>
          </tr>
          <tr>
            <td>lana</td>
            <td>U+1A80 to U+1A89</td>
          </tr>
          <tr>
            <td>lanatham</td>
            <td>U+1A90 to U+1A99</td>
          </tr>
          <tr>
            <td>laoo</td>
            <td>U+0ED0 to U+0ED9</td>
          </tr>
          <tr>
            <td>latn</td>
            <td>U+0030 to U+0039</td>
          </tr>
          <tr>
            <td>lepc</td>
            <td>U+1C40 to U+1C49</td>
          </tr>
          <tr>
            <td>limb</td>
            <td>U+1946 to U+194F</td>
          </tr>
          <tr>
            <td>mathbold</td>
            <td>U+1D7CE to U+1D7D7</td>
          </tr>
          <tr>
            <td>mathdbl</td>
            <td>U+1D7D8 to U+1D7E1</td>
          </tr>
          <tr>
            <td>mathmono</td>
            <td>U+1D7F6 to U+1D7FF</td>
          </tr>
          <tr>
            <td>mathsanb</td>
            <td>U+1D7EC to U+1D7F5</td>
          </tr>
          <tr>
            <td>mathsans</td>
            <td>U+1D7E2 to U+1D7EB</td>
          </tr>
          <tr>
            <td>mlym</td>
            <td>U+0D66 to U+0D6F</td>
          </tr>
          <tr>
            <td>modi</td>
            <td>U+11650 to U+11659</td>
          </tr>
          <tr>
            <td>mong</td>
            <td>U+1810 to U+1819</td>
          </tr>
          <tr>
            <td>mroo</td>
            <td>U+16A60 to U+16A69</td>
          </tr>
          <tr>
            <td>mtei</td>
            <td>U+ABF0 to U+ABF9</td>
          </tr>
          <tr>
            <td>mymr</td>
            <td>U+1040 to U+1049</td>
          </tr>
          <tr>
            <td>mymrshan</td>
            <td>U+1090 to U+1099</td>
          </tr>
          <tr>
            <td>mymrtlng</td>
            <td>U+A9F0 to U+A9F9</td>
          </tr>
          <tr>
            <td>newa</td>
            <td>U+11450 to U+11459</td>
          </tr>
          <tr>
            <td>nkoo</td>
            <td>U+07C0 to U+07C9</td>
          </tr>
          <tr>
            <td>olck</td>
            <td>U+1C50 to U+1C59</td>
          </tr>
          <tr>
            <td>orya</td>
            <td>U+0B66 to U+0B6F</td>
          </tr>
          <tr>
            <td>osma</td>
            <td>U+104A0 to U+104A9</td>
          </tr>
          <tr>
            <td>rohg</td>
            <td>U+10D30 to U+10D39</td>
          </tr>
          <tr>
            <td>saur</td>
            <td>U+A8D0 to U+A8D9</td>
          </tr>
          <tr>
            <td>segment</td>
            <td>U+1FBF0 to U+1FBF9</td>
          </tr>
          <tr>
            <td>shrd</td>
            <td>U+111D0 to U+111D9</td>
          </tr>
          <tr>
            <td>sind</td>
            <td>U+112F0 to U+112F9</td>
          </tr>
          <tr>
            <td>sinh</td>
            <td>U+0DE6 to U+0DEF</td>
          </tr>
          <tr>
            <td>sora</td>
            <td>U+110F0 to U+110F9</td>
          </tr>
          <tr>
            <td>sund</td>
            <td>U+1BB0 to U+1BB9</td>
          </tr>
          <tr>
            <td>takr</td>
            <td>U+116C0 to U+116C9</td>
          </tr>
          <tr>
            <td>talu</td>
            <td>U+19D0 to U+19D9</td>
          </tr>
          <tr>
            <td>tamldec</td>
            <td>U+0BE6 to U+0BEF</td>
          </tr>
          <tr>
            <td>telu</td>
            <td>U+0C66 to U+0C6F</td>
          </tr>
          <tr>
            <td>thai</td>
            <td>U+0E50 to U+0E59</td>
          </tr>
          <tr>
            <td>tibt</td>
            <td>U+0F20 to U+0F29</td>
          </tr>
          <tr>
            <td>tirh</td>
            <td>U+114D0 to U+114D9</td>
          </tr>
          <tr>
            <td>tnsa</td>
            <td>U+16AC0 to U+16AC9</td>
          </tr>
          <tr>
            <td>vaii</td>
            <td>U+A620 to U+A629</td>
          </tr>
          <tr>
            <td>wara</td>
            <td>U+118E0 to U+118E9</td>
          </tr>
          <tr>
            <td>wcho</td>
            <td>U+1E2F0 to U+1E2F9</td>
          </tr>
        </tbody></table>
      </figure></emu-table>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        The computations rely on String values and locations within numeric strings that are dependent upon the implementation and the effective locale of <var>numberFormat</var> ("ILD") or upon the implementation, the effective locale, and the numbering system of <var>numberFormat</var> ("ILND"). The ILD and ILND Strings mentioned, other than those for currency names, must not contain any characters in the General Category "Number, decimal digit" as specified by the Unicode Standard.
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        It is recommended that implementations use the locale provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sec-formatnumber" aoid="FormatNumeric">
      <h1><span class="secnum">15.5.6</span> FormatNumeric ( <var>numberFormat</var>, <var>x</var> )</h1>

      <p>
        The FormatNumeric abstract operation is called with arguments <var>numberFormat</var> (which must be an object initialized as a NumberFormat) and <var>x</var> (which must be a Number or BigInt value), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionNumberPattern" id="_ref_621"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li><li>Let <var>result</var> be the empty String.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>part</var> in <var>parts</var>, do<ol><li>Set <var>result</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>result</var> and <var>part</var>.[[Value]].</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-formatnumbertoparts" aoid="FormatNumericToParts">
      <h1><span class="secnum">15.5.7</span> FormatNumericToParts ( <var>numberFormat</var>, <var>x</var> )</h1>

      <p>
        The FormatNumericToParts abstract operation is called with arguments <var>numberFormat</var> (which must be an object initialized as a NumberFormat) and <var>x</var> (which must be a Number or BigInt value), and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionNumberPattern" id="_ref_622"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li><li>Let <var>result</var> be <emu-xref aoid="ArrayCreate" id="_ref_623"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0).</li><li>Let <var>n</var> be 0.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>part</var> in <var>parts</var>, do<ol><li>Let <var>O</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_624"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.[[Type]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_625"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.[[Value]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_626"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString" id="_ref_627"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>n</var>), <var>O</var>).</li><li>Increment <var>n</var> by 1.</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-torawprecision" aoid="ToRawPrecision">
      <h1><span class="secnum">15.5.8</span> ToRawPrecision ( <var>x</var>, <var>minPrecision</var>, <var>maxPrecision</var> )</h1>

      <p>
        When the ToRawPrecision abstract operation is called with arguments <var>x</var> (which must be a finite non-negative Number or BigInt), <var>minPrecision</var>, and <var>maxPrecision</var> (both must be integers between 1 and 21), the following steps are taken:
      </p>

      <emu-alg><ol><li>Set x to <emu-xref href="#ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(x).</li><li>Let <var>p</var> be <var>maxPrecision</var>.</li><li>If <var>x</var> = 0, then<ol><li>Let <var>m</var> be the String consisting of <var>p</var> occurrences of the character <emu-val>"0"</emu-val>.</li><li>Let <var>e</var> be 0.</li><li>Let <var>xFinal</var> be 0.</li></ol></li><li>Else,<ol><li>Let <var>e</var> and <var>n</var> be integers such that 10<sup><var>p</var> - 1</sup> ≤ <var>n</var> &lt; 10<sup><var>p</var></sup> and for which <var>n</var> × 10<sup><var>e</var> - <var>p</var> + 1</sup> - <var>x</var> is as close to zero as possible. If there are two such sets of <var>e</var> and <var>n</var>, pick the <var>e</var> and <var>n</var> for which <var>n</var> × 10<sup><var>e</var> - <var>p</var> + 1</sup> is larger.</li><li>Let <var>m</var> be the String consisting of the digits of the decimal representation of <var>n</var> (in order, with no leading zeroes).</li><li>Let <var>xFinal</var> be <var>n</var> × 10<sup><var>e</var>–<var>p</var>+1</sup>.</li></ol></li><li>If <var>e</var> ≥ <var>p</var>–1, then<ol><li>Let <var>m</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>m</var> and <var>e</var>–<var>p</var>+1 occurrences of the character <emu-val>"0"</emu-val>.</li><li>Let <var>int</var> be <var>e</var>+1.</li></ol></li><li>Else if <var>e</var> ≥ 0, then<ol><li>Let <var>m</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of the first <var>e</var>+1 characters of <var>m</var>, the character <emu-val>"."</emu-val>, and the remaining <var>p</var>–(<var>e</var>+1) characters of <var>m</var>.</li><li>Let <var>int</var> be <var>e</var>+1.</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>e</var> &lt; 0.</li><li>Let <var>m</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of the String value <emu-val>"0."</emu-val>, –(<var>e</var>+1) occurrences of the character <emu-val>"0"</emu-val>, and <var>m</var>.</li><li>Let <var>int</var> be 1.</li></ol></li><li>If <var>m</var> contains the character <emu-val>"."</emu-val>, and <var>maxPrecision</var> &gt; <var>minPrecision</var>, then<ol><li>Let <var>cut</var> be <var>maxPrecision</var> – <var>minPrecision</var>.</li><li>Repeat, while <var>cut</var> &gt; 0 and the last character of <var>m</var> is <emu-val>"0"</emu-val>,<ol><li>Remove the last character from <var>m</var>.</li><li>Decrease <var>cut</var> by 1.</li></ol></li><li>If the last character of <var>m</var> is <emu-val>"."</emu-val>, then<ol><li>Remove the last character from <var>m</var>.</li></ol></li></ol></li><li>Return the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[FormattedString]]: <var>m</var>, [[RoundedNumber]]: <var>xFinal</var>, [[IntegerDigitsCount]]: <var>int</var> }.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-torawfixed" aoid="ToRawFixed">
      <h1><span class="secnum">15.5.9</span> ToRawFixed ( <var>x</var>, <var>minInteger</var>, <var>minFraction</var>, <var>maxFraction</var> )</h1>

      <p>
        When the ToRawFixed abstract operation is called with arguments <var>x</var> (which must be a finite non-negative Number or BigInt), <var>minInteger</var> (which must be an <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> between 1 and 21), <var>minFraction</var>, and <var>maxFraction</var> (which must be integers between 0 and 20), the following steps are taken:
      </p>

      <emu-alg><ol><li>Set x to <emu-xref href="#ℝ"><a href="https://tc39.es/ecma262/#ℝ">ℝ</a></emu-xref>(x).</li><li>Let <var>f</var> be <var>maxFraction</var>.</li><li>Let <var>n</var> be an <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> for which the exact <emu-xref href="#mathematical-value"><a href="https://tc39.es/ecma262/#mathematical-value">mathematical value</a></emu-xref> of <var>n</var> / 10<sup><var>f</var></sup> – <var>x</var> is as close to zero as possible. If there are two such <var>n</var>, pick the larger <var>n</var>.</li><li>Let <var>xFinal</var> be <var>n</var> / 10<sup><var>f</var></sup>.</li><li>If <var>n</var> = 0, let <var>m</var> be the String <emu-val>"0"</emu-val>. Otherwise, let <var>m</var> be the String consisting of the digits of the decimal representation of <var>n</var> (in order, with no leading zeroes).</li><li>If <var>f</var> ≠ 0, then<ol><li>Let <var>k</var> be the number of characters in <var>m</var>.</li><li>If <var>k</var> ≤ <var>f</var>, then<ol><li>Let <var>z</var> be the String value consisting of <var>f</var>+1–<var>k</var> occurrences of the character <emu-val>"0"</emu-val>.</li><li>Let <var>m</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>z</var> and <var>m</var>.</li><li>Let <var>k</var> be <var>f</var>+1.</li></ol></li><li>Let <var>a</var> be the first <var>k</var>–<var>f</var> characters of <var>m</var>, and let <var>b</var> be the remaining <var>f</var> characters of <var>m</var>.</li><li>Let <var>m</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>a</var>, <emu-val>"."</emu-val>, and <var>b</var>.</li><li>Let <var>int</var> be the number of characters in <var>a</var>.</li></ol></li><li>Else, let <var>int</var> be the number of characters in <var>m</var>.</li><li>Let <var>cut</var> be <var>maxFraction</var> – <var>minFraction</var>.</li><li>Repeat, while <var>cut</var> &gt; 0 and the last character of <var>m</var> is <emu-val>"0"</emu-val>,<ol><li>Remove the last character from <var>m</var>.</li><li>Decrease <var>cut</var> by 1.</li></ol></li><li>If the last character of <var>m</var> is <emu-val>"."</emu-val>, then<ol><li>Remove the last character from <var>m</var>.</li></ol></li><li>Return the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[FormattedString]]: <var>m</var>, [[RoundedNumber]]: <var>xFinal</var>, [[IntegerDigitsCount]]: <var>int</var> }.</li></ol></emu-alg>
    </emu-clause>

    <emu-normative-optional>
    <emu-clause id="sec-unwrapnumberformat" aoid="UnwrapNumberFormat">
      <h1><span class="secnum">15.5.10</span> UnwrapNumberFormat ( <var>nf</var> )</h1>
      <p>
        The UnwrapNumberFormat abstract operation returns the NumberFormat instance
        of its input object, which is either the value itself or a value associated
        with it by <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_628"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref> according to the normative optional
        <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> mode of <emu-xref href="#legacy-constructor" id="_ref_108"><a href="#legacy-constructor">4.3 Note 1</a></emu-xref>.
      </p>
      <emu-alg><ol><li>If <emu-xref aoid="Type" id="_ref_629"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>nf</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>nf</var> does not have an [[InitializedNumberFormat]] internal slot and ?&nbsp;<emu-xref aoid="OrdinaryHasInstance" id="_ref_630"><a href="https://tc39.es/ecma262/#sec-ordinaryhasinstance">OrdinaryHasInstance</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_631"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, <var>nf</var>) is <emu-val>true</emu-val>, then<ol><li>Return ?&nbsp;<emu-xref aoid="Get" id="_ref_632"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>nf</var>, <emu-xref href="#intl-object" id="_ref_633"><a href="#intl-object">%Intl%</a></emu-xref>.[[FallbackSymbol]]).</li></ol></li><li>Return <var>nf</var>.</li></ol></emu-alg>
    </emu-clause>
    </emu-normative-optional>

    <emu-clause id="sec-getnumberformatpattern" aoid="GetNumberFormatPattern">
      <h1><span class="secnum">15.5.11</span> GetNumberFormatPattern ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>
        The abstract operation GetNumberFormatPattern considers the resolved unit-related options in the number format object along with the final scaled and rounded number being formatted and returns a pattern, a String value as described in <emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_109"><a href="#sec-intl.numberformat-internal-slots">15.2.3</a></emu-xref>.
      </p>
      <emu-alg><ol><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_634"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>dataLocale</var> be <var>numberFormat</var>.[[DataLocale]].</li><li>Let <var>dataLocaleData</var> be <var>localeData</var>.[[&lt;<var>dataLocale</var>&gt;]].</li><li>Let <var>patterns</var> be <var>dataLocaleData</var>.[[patterns]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>patterns</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> (see <emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_110"><a href="#sec-intl.numberformat-internal-slots">15.2.3</a></emu-xref>).</li><li>Let <var>style</var> be <var>numberFormat</var>.[[Style]].</li><li>If <var>style</var> is <emu-val>"percent"</emu-val>, then<ol><li>Let <var>patterns</var> be <var>patterns</var>.[[percent]].</li></ol></li><li>Else if <var>style</var> is <emu-val>"unit"</emu-val>, then<ol><li>Let <var>unit</var> be <var>numberFormat</var>.[[Unit]].</li><li>Let <var>unitDisplay</var> be <var>numberFormat</var>.[[UnitDisplay]].</li><li>Let <var>patterns</var> be <var>patterns</var>.[[unit]].</li><li>If <var>patterns</var> doesn't have a field [[&lt;<var>unit</var>&gt;]], then<ol><li>Let <var>unit</var> be <emu-val>"fallback"</emu-val>.</li></ol></li><li>Let <var>patterns</var> be <var>patterns</var>.[[&lt;<var>unit</var>&gt;]].</li><li>Let <var>patterns</var> be <var>patterns</var>.[[&lt;<var>unitDisplay</var>&gt;]].</li></ol></li><li>Else if <var>style</var> is <emu-val>"currency"</emu-val>, then<ol><li>Let <var>currency</var> be <var>numberFormat</var>.[[Currency]].</li><li>Let <var>currencyDisplay</var> be <var>numberFormat</var>.[[CurrencyDisplay]].</li><li>Let <var>currencySign</var> be <var>numberFormat</var>.[[CurrencySign]].</li><li>Let <var>patterns</var> be <var>patterns</var>.[[currency]].</li><li>If <var>patterns</var> doesn't have a field [[&lt;<var>currency</var>&gt;]], then<ol><li>Let <var>currency</var> be <emu-val>"fallback"</emu-val>.</li></ol></li><li>Let <var>patterns</var> be <var>patterns</var>.[[&lt;<var>currency</var>&gt;]].</li><li>Let <var>patterns</var> be <var>patterns</var>.[[&lt;<var>currencyDisplay</var>&gt;]].</li><li>Let <var>patterns</var> be <var>patterns</var>.[[&lt;<var>currencySign</var>&gt;]].</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>style</var> is <emu-val>"decimal"</emu-val>.</li><li>Let <var>patterns</var> be <var>patterns</var>.[[decimal]].</li></ol></li><li>Let <var>signDisplay</var> be <var>numberFormat</var>.[[SignDisplay]].</li><li>If <var>signDisplay</var> is <emu-val>"never"</emu-val>, then<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[zeroPattern]].</li></ol></li><li>Else if <var>signDisplay</var> is <emu-val>"auto"</emu-val>, then<ol><li>If <var>x</var> is 0 or <var>x</var> &gt; 0 or <var>x</var> is <emu-val>NaN</emu-val>, then<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[zeroPattern]].</li></ol></li><li>Else,<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[negativePattern]].</li></ol></li></ol></li><li>Else if <var>signDisplay</var> is <emu-val>"always"</emu-val>, then<ol><li>If <var>x</var> is 0 or <var>x</var> &gt; 0 or <var>x</var> is <emu-val>NaN</emu-val>, then<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[positivePattern]].</li></ol></li><li>Else,<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[negativePattern]].</li></ol></li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>signDisplay</var> is <emu-val>"exceptZero"</emu-val>.</li><li>If <var>x</var> is 0 or <var>x</var> is -0 or <var>x</var> is <emu-val>NaN</emu-val>, then<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[zeroPattern]].</li></ol></li><li>Else if <var>x</var> &gt; 0, then<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[positivePattern]].</li></ol></li><li>Else,<ol><li>Let <var>pattern</var> be <var>patterns</var>.[[negativePattern]].</li></ol></li></ol></li><li>Return <var>pattern</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-getnotationsubpattern" aoid="GetNotationSubPattern">
      <h1><span class="secnum">15.5.12</span> GetNotationSubPattern ( <var>numberFormat</var>, <var>exponent</var> )</h1>
      <p>
        The abstract operation GetNotationSubPattern considers the resolved notation and <var>exponent</var>, and returns a String value for the notation sub pattern as described in <emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_111"><a href="#sec-intl.numberformat-internal-slots">15.2.3</a></emu-xref>.
      </p>
      <emu-alg><ol><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_635"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>dataLocale</var> be <var>numberFormat</var>.[[DataLocale]].</li><li>Let <var>dataLocaleData</var> be <var>localeData</var>.[[&lt;<var>dataLocale</var>&gt;]].</li><li>Let <var>notationSubPatterns</var> be <var>dataLocaleData</var>.[[notationSubPatterns]].</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>notationSubPatterns</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> (see <emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_112"><a href="#sec-intl.numberformat-internal-slots">15.2.3</a></emu-xref>).</li><li>Let <var>notation</var> be <var>numberFormat</var>.[[Notation]].</li><li>If <var>notation</var> is <emu-val>"scientific"</emu-val> or <var>notation</var> is <emu-val>"engineering"</emu-val>, then<ol><li>Return <var>notationSubPatterns</var>.[[scientific]].</li></ol></li><li>Else if <var>exponent</var> is not 0, then<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>notation</var> is <emu-val>"compact"</emu-val>.</li><li>Let <var>compactDisplay</var> be <var>numberFormat</var>.[[CompactDisplay]].</li><li>Let <var>compactPatterns</var> be <var>notationSubPatterns</var>.[[compact]].[[&lt;<var>compactDisplay</var>&gt;]].</li><li>Return <var>compactPatterns</var>.[[&lt;<var>exponent</var>&gt;]].</li></ol></li><li>Else,<ol><li>Return <emu-val>"{number}"</emu-val>.</li></ol></li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-computeexponent" aoid="ComputeExponent">
      <h1><span class="secnum">15.5.13</span> ComputeExponent ( <var>numberFormat</var>, <var>x</var> )</h1>
      <p>
        The abstract operation ComputeExponent computes an exponent (power of ten) by which to scale <var>x</var> according to the number formatting settings.
        It handles cases such as 999 rounding up to 1000, requiring a different exponent.
      </p>
      <emu-alg><ol><li>If <var>x</var> = 0, then<ol><li>Return 0.</li></ol></li><li>If <var>x</var> &lt; 0, then<ol><li>Let <var>x</var> = -<var>x</var>.</li></ol></li><li>Let <var>magnitude</var> be the base 10 logarithm of <var>x</var> rounded down to the nearest <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref>.</li><li>Let <var>exponent</var> be <emu-xref aoid="ComputeExponentForMagnitude" id="_ref_636"><a href="#sec-computeexponentformagnitude">ComputeExponentForMagnitude</a></emu-xref>(<var>numberFormat</var>, <var>magnitude</var>).</li><li>Let <var>x</var> be <var>x</var> × 10<sup>-<var>exponent</var></sup>.</li><li>Let <var>formatNumberResult</var> be <emu-xref aoid="FormatNumericToString" id="_ref_637"><a href="#sec-formatnumberstring">FormatNumericToString</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li><li>If <var>formatNumberResult</var>.[[RoundedNumber]] = 0, then<ol><li>Return <var>exponent</var>.</li></ol></li><li>Let <var>newMagnitude</var> be the base 10 logarithm of <var>formatNumberResult</var>.[[RoundedNumber]] rounded down to the nearest <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref>.</li><li>If <var>newMagnitude</var> is <var>magnitude</var> – <var>exponent</var>, then<ol><li>Return <var>exponent</var>.</li></ol></li><li>Return <emu-xref aoid="ComputeExponentForMagnitude" id="_ref_638"><a href="#sec-computeexponentformagnitude">ComputeExponentForMagnitude</a></emu-xref>(<var>numberFormat</var>, <var>magnitude</var> + 1).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-computeexponentformagnitude" aoid="ComputeExponentForMagnitude">
      <h1><span class="secnum">15.5.14</span> ComputeExponentForMagnitude ( <var>numberFormat</var>, <var>magnitude</var> )</h1>
      <p>
        The abstract operation ComputeExponentHelper computes an exponent by which to scale a number of the given magnitude (power of ten of the most significant digit) according to the locale and the desired notation (scientific, engineering, or compact).
      </p>
      <emu-alg><ol><li>Let <var>notation</var> be <var>numberFormat</var>.[[Notation]].</li><li>If <var>notation</var> is <emu-val>"standard"</emu-val>, then<ol><li>Return 0.</li></ol></li><li>Else if <var>notation</var> is <emu-val>"scientific"</emu-val>, then<ol><li>Return <var>magnitude</var>.</li></ol></li><li>Else if <var>notation</var> is <emu-val>"engineering"</emu-val>, then<ol><li>Let <var>thousands</var> be the greatest <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> that is not greater than <var>magnitude</var> / 3.</li><li>Return <var>thousands</var> × 3.</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>notation</var> is <emu-val>"compact"</emu-val>.</li><li>Let <var>exponent</var> be an implementation- and locale-dependent (ILD) <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> by which to scale a number of the given magnitude in compact notation for the current locale.</li><li>Return <var>exponent</var>.</li></ol></li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./pluralrules.html"><emu-clause id="pluralrules-objects">
  <h1><span class="secnum">16</span> PluralRules Objects</h1>

  <emu-clause id="sec-intl-pluralrules-constructor">
    <h1><span class="secnum">16.1</span> The Intl.PluralRules Constructor</h1>

    <p>
      The PluralRules <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%PluralRules%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_639"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_113"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-intl.pluralrules">
      <h1><span class="secnum">16.1.1</span> Intl.PluralRules ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        When the <code>Intl.PluralRules</code> function is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>pluralRules</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_640"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%PluralRules.prototype%"</emu-val>, « [[InitializedPluralRules]], [[Locale]], [[Type]], [[MinimumIntegerDigits]], [[MinimumFractionDigits]], [[MaximumFractionDigits]], [[MinimumSignificantDigits]], [[MaximumSignificantDigits]], [[RoundingType]] »).</li><li>Return ?&nbsp;<emu-xref aoid="InitializePluralRules" id="_ref_641"><a href="#sec-initializepluralrules">InitializePluralRules</a></emu-xref>(<var>pluralRules</var>, <var>locales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-initializepluralrules" aoid="InitializePluralRules">
      <h1><span class="secnum">16.1.2</span> InitializePluralRules ( <var>pluralRules</var>, <var>locales</var>, <var>options</var> )</h1>

      <p>
        The abstract operation InitializePluralRules accepts the arguments <var>pluralRules</var> (which must be an object), <var>locales</var>, and <var>options</var>. It initializes <var>pluralRules</var> as a PluralRules object. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_642"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_643"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_644"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[localeMatcher]] to <var>matcher</var>.</li><li>Let <var>t</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_645"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"type"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"cardinal"</emu-val>, <emu-val>"ordinal"</emu-val> », <emu-val>"cardinal"</emu-val>).</li><li>Set <var>pluralRules</var>.[[Type]] to <var>t</var>.</li><li>Perform ?&nbsp;<emu-xref aoid="SetNumberFormatDigitOptions" id="_ref_646"><a href="#sec-setnfdigitoptions">SetNumberFormatDigitOptions</a></emu-xref>(<var>pluralRules</var>, <var>options</var>, <emu-val>+0</emu-val><sub>𝔽</sub>, <emu-val>3</emu-val><sub>𝔽</sub>, <emu-val>"standard"</emu-val>).</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_647"><a href="#sec-intl-pluralrules-constructor">%PluralRules%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_648"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_649"><a href="#sec-intl-pluralrules-constructor">%PluralRules%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_650"><a href="#sec-intl-pluralrules-constructor">%PluralRules%</a></emu-xref>.[[RelevantExtensionKeys]], <var>localeData</var>).</li><li>Set <var>pluralRules</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Return <var>pluralRules</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-pluralrules-constructor">
    <h1><span class="secnum">16.2</span> Properties of the Intl.PluralRules Constructor</h1>

    <p>
      The Intl.PluralRules <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-intl.pluralrules.prototype">
      <h1><span class="secnum">16.2.1</span> Intl.PluralRules.prototype</h1>

      <p>
        The value of <code>Intl.PluralRules.prototype</code> is <emu-xref href="#sec-properties-of-intl-pluralrules-prototype-object" id="_ref_651"><a href="#sec-properties-of-intl-pluralrules-prototype-object">%PluralRules.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.supportedlocalesof">
      <h1><span class="secnum">16.2.2</span> Intl.PluralRules.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_652"><a href="#sec-intl-pluralrules-constructor">%PluralRules%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_653"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_654"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules-internal-slots">
      <h1><span class="secnum">16.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_114"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « ».
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        Unicode Technical Standard 35 describes no locale extension keys that are relevant to the pluralization process.
      </div></emu-note>

      <p>
        The value of the [[LocaleData]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_115"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        It is recommended that implementations use the locale data provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-pluralrules-prototype-object">
    <h1><span class="secnum">16.3</span> Properties of the Intl.PluralRules Prototype Object</h1>

    <p>
      The Intl.PluralRules prototype object is itself an ordinary object. <dfn>%PluralRules.prototype%</dfn> is not an Intl.PluralRules instance and does not have an [[InitializedPluralRules]] internal slot or any of the other internal slots of Intl.PluralRules instance objects.
    </p>

    <emu-clause id="sec-intl.pluralrules.prototype.constructor">
      <h1><span class="secnum">16.3.1</span> Intl.PluralRules.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.PluralRules.prototype.constructor</code> is <emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_655"><a href="#sec-intl-pluralrules-constructor">%PluralRules%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.prototype-tostringtag">
      <h1><span class="secnum">16.3.2</span> Intl.PluralRules.prototype [ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.PluralRules"</emu-val>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.prototype.select">
      <h1><span class="secnum">16.3.3</span> Intl.PluralRules.prototype.select ( <var>value</var> )</h1>

      <p>
        When the <code>select</code> method is called with an argument <var>value</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>pr</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_656"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>pr</var>, [[InitializedPluralRules]]).</li><li>Let <var>n</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_657"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>value</var>).</li><li>Return !&nbsp;<emu-xref aoid="ResolvePlural" id="_ref_658"><a href="#sec-resolveplural">ResolvePlural</a></emu-xref>(<var>pr</var>, <var>n</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.pluralrules.prototype.resolvedoptions">
      <h1><span class="secnum">16.3.4</span> Intl.PluralRules.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>pr</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_659"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>pr</var>, [[InitializedPluralRules]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-pluralrules-resolvedoptions-properties" id="_ref_116"><a href="#table-pluralrules-resolvedoptions-properties">Table 13</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>Let <var>v</var> be the value of <var>pr</var>'s internal slot whose name is the Internal Slot value of the current row.</li><li>If <var>v</var> is not <emu-val>undefined</emu-val>, then<ol><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_660"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li></ol></li><li>Let <var>pluralCategories</var> be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of Strings containing all possible results of <emu-xref href="#sec-pluralruleselect" id="_ref_117"><a href="#sec-pluralruleselect">PluralRuleSelect</a></emu-xref> for the selected locale <var>pr</var>.[[Locale]].</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_661"><a href="https://tc39.es/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>options</var>, <emu-val>"pluralCategories"</emu-val>, <emu-xref aoid="CreateArrayFromList" id="_ref_662"><a href="https://tc39.es/ecma262/#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(<var>pluralCategories</var>)).</li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-pluralrules-resolvedoptions-properties"><figure><figcaption>Table 13: Resolved Options of PluralRules Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td>[[Type]]</td>
            <td><emu-val>"type"</emu-val></td>
          </tr>
          <tr>
            <td>[[MinimumIntegerDigits]]</td>
            <td><emu-val>"minimumIntegerDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MinimumFractionDigits]]</td>
            <td><emu-val>"minimumFractionDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MaximumFractionDigits]]</td>
            <td><emu-val>"maximumFractionDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MinimumSignificantDigits]]</td>
            <td><emu-val>"minimumSignificantDigits"</emu-val></td>
          </tr>
          <tr>
            <td>[[MaximumSignificantDigits]]</td>
            <td><emu-val>"maximumSignificantDigits"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-pluralrules-instances">
    <h1><span class="secnum">16.4</span> Properties of Intl.PluralRules Instances</h1>

    <p>
      Intl.PluralRules instances are ordinary objects that inherit properties from <emu-xref href="#sec-properties-of-intl-pluralrules-prototype-object" id="_ref_663"><a href="#sec-properties-of-intl-pluralrules-prototype-object">%PluralRules.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.PluralRules instances have an [[InitializedPluralRules]] internal slot.
    </p>

    <p>
      Intl.PluralRules instances also have several internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used by the plural rules.</li>
      <li>[[Type]] is one of the String values <emu-val>"cardinal"</emu-val> or <emu-val>"ordinal"</emu-val>, identifying the plural rules used.</li>
      <li>[[MinimumIntegerDigits]] is a non-negative <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref> indicating the minimum <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> digits to be used.</li>
      <li>[[MinimumFractionDigits]] and [[MaximumFractionDigits]] are non-negative <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> Number values indicating the minimum and maximum fraction digits to be used. Numbers will be rounded or padded with trailing zeroes if necessary.</li>
      <li>[[MinimumSignificantDigits]] and [[MaximumSignificantDigits]] are positive <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> Number values indicating the minimum and maximum fraction digits to be used. Either none or both of these properties are present; if they are, they override minimum and maximum <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> and fraction digits.</li>
      <li>[[RoundingType]] is one of the values <emu-const>fractionDigits</emu-const> or <emu-const>significantDigits</emu-const>, indicating which rounding strategy to use, as discussed in <emu-xref href="#sec-properties-of-intl-numberformat-instances" id="_ref_118"><a href="#sec-properties-of-intl-numberformat-instances">15.4</a></emu-xref>.</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-pluralrules-abstracts">
    <h1><span class="secnum">16.5</span> Abstract Operations for PluralRules Objects</h1>

    <emu-clause id="sec-getoperands" aoid="GetOperands">
       <h1><span class="secnum">16.5.1</span> GetOperands ( <var>s</var> )</h1>
       <p>The abstract operation GetOperands takes argument <var>s</var> (a decimal String). It extracts numeric features from <var>s</var> that correspond with the operands of <a href="https://unicode.org/reports/tr35/tr35-numbers.html#Operands">Unicode Technical Standard #35, Part 3, Section 5.1.1</a>. It performs the following steps when called:</p>
       <emu-alg><ol><li>Let <var>n</var> be !&nbsp;<emu-xref aoid="ToNumber" id="_ref_664"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>s</var>).</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>n</var> is finite.</li><li>Let <var>dp</var> be !&nbsp;<emu-xref aoid="StringIndexOf"><a href="https://tc39.es/ecma262/#sec-stringindexof">StringIndexOf</a></emu-xref>(<var>s</var>, <emu-val>"."</emu-val>, 0).</li><li>If <var>dp</var> = -1, then<ol><li>Let <var>intPart</var> be <var>n</var>.</li><li>Let <var>fracSlice</var> be <emu-val>""</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>intPart</var> be the substring of <var>s</var> from 0 to <var>dp</var>.</li><li>Let <var>fracSlice</var> be the substring of <var>s</var> from <var>dp</var> + 1.</li></ol></li><li>Let <var>i</var> be <emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(! <emu-xref aoid="ToNumber" id="_ref_665"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>intPart</var>)).</li><li>Let <var>fracDigitCount</var> be the length of <var>fracSlice</var>.</li><li>Let <var>f</var> be !&nbsp;<emu-xref aoid="ToNumber" id="_ref_666"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>fracSlice</var>).</li><li>Let <var>significantFracSlice</var> be the value of <var>fracSlice</var> stripped of trailing <emu-val>"0"</emu-val>.</li><li>Let <var>significantFracDigitCount</var> be the length of <var>significantFracSlice</var>.</li><li>Let <var>significantFrac</var> be !&nbsp;<emu-xref aoid="ToNumber" id="_ref_667"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>significantFracSlice</var>).</li><li>Return a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Number]]: <emu-xref aoid="abs"><a href="https://tc39.es/ecma262/#eqn-abs">abs</a></emu-xref>(<var>n</var>), [[IntegerDigits]]: <var>i</var>, [[FractionDigits]]: <var>f</var>, [[NumberOfFractionDigits]]: <var>fracDigitCount</var>, [[FractionDigitsWithoutTrailing]]: <var>significantFrac</var>, [[NumberOfFractionDigitsWithoutTrailing]]: <var>significantFracDigitCount</var> }.</li></ol></emu-alg>

       <emu-table id="table-plural-operands"><figure><figcaption>Table 14: Plural Rules Operands <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> Fields</figcaption>
         
         <table class="real-table">
           <thead>
             <tr>
               <th>Internal Slot</th>
               <th>Type</th>
               <th>UTS #35 Operand</th>
               <th>Description</th>
             </tr>
           </thead>
           <tbody><tr>
             <td>[[Number]]</td>
             <td>Number</td>
             <td>n</td>
             <td>Absolute value of the source number</td>
           </tr>
           <tr>
             <td>[[IntegerDigits]]</td>
             <td>Number</td>
             <td>i</td>
             <td><emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">Integer</a></emu-xref> part of [[Number]].</td>
           </tr>
           <tr>
             <td>[[FractionDigits]]</td>
             <td>Number</td>
             <td>f</td>
             <td>Visible fraction digits in [[Number]], <em>with</em> trailing zeroes, as an <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> having [[NumberOfFractionDigits]] digits.</td>
           </tr>
           <tr>
             <td>[[NumberOfFractionDigits]]</td>
             <td>Number</td>
             <td>v</td>
             <td>Number of visible fraction digits in [[Number]], <em>with</em> trailing zeroes.</td>
           </tr>
           <tr>
             <td>[[FractionDigitsWithoutTrailing]]</td>
             <td>Number</td>
             <td>t</td>
             <td>Visible fraction digits in [[Number]], <em>without</em> trailing zeroes, as an <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> having [[NumberOfFractionDigitsWithoutTrailing]] digits.</td>
           </tr>
           <tr>
             <td>[[NumberOfFractionDigitsWithoutTrailing]]</td>
             <td>Number</td>
             <td>w</td>
             <td>Number of visible fraction digits in [[Number]], <em>without</em> trailing zeroes.</td>
           </tr>
         </tbody></table>
       </figure></emu-table>
    </emu-clause>

    <emu-clause id="sec-pluralruleselect" aoid="PluralRuleSelect">
      <h1><span class="secnum">16.5.2</span> PluralRuleSelect ( <var>locale</var>, <var>type</var>, <var>n</var>, <var>operands</var> )</h1>
      <p>The implementation-defined abstract operation PluralRuleSelect takes arguments <var>locale</var> (a String), <var>type</var> (a String), <var>n</var> (a finite Number), and <var>operands</var> (a Plural Rules Operands <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> derived from formatting <var>n</var>). It returns the String from « <emu-val>"zero"</emu-val>, <emu-val>"one"</emu-val>, <emu-val>"two"</emu-val>, <emu-val>"few"</emu-val>, <emu-val>"many"</emu-val>, <emu-val>"other"</emu-val> » that best categorizes the <var>operands</var> representation of <var>n</var> according to the rules for <var>locale</var> and <var>type</var>.</p>
    </emu-clause>

    <emu-clause id="sec-resolveplural" aoid="ResolvePlural">
      <h1><span class="secnum">16.5.3</span> ResolvePlural ( <var>pluralRules</var>, <var>n</var> )</h1>
      <p>
        When the ResolvePlural abstract operation is called with arguments <var>pluralRules</var> (which must be an object initialized as a PluralRules) and <var>n</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), it returns a String value representing the plural form of <var>n</var> according to the effective locale and the options of <var>pluralRules</var>. The following steps are taken:
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_668"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>pluralRules</var>) is Object.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>pluralRules</var> has an [[InitializedPluralRules]] internal slot.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_669"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>n</var>) is Number.</li><li>If <var>n</var> is not a finite Number, then<ol><li>Return <emu-val>"other"</emu-val>.</li></ol></li><li>Let <var>locale</var> be <var>pluralRules</var>.[[Locale]].</li><li>Let <var>type</var> be <var>pluralRules</var>.[[Type]].</li><li>Let <var>res</var> be !&nbsp;<emu-xref aoid="FormatNumericToString" id="_ref_670"><a href="#sec-formatnumberstring">FormatNumericToString</a></emu-xref>(<var>pluralRules</var>, <var>n</var>).</li><li>Let <var>s</var> be <var>res</var>.[[FormattedString]].</li><li>Let <var>operands</var> be !&nbsp;<emu-xref aoid="GetOperands" id="_ref_671"><a href="#sec-getoperands">GetOperands</a></emu-xref>(<var>s</var>).</li><li>Return !&nbsp;<emu-xref aoid="PluralRuleSelect" id="_ref_672"><a href="#sec-pluralruleselect">PluralRuleSelect</a></emu-xref>(<var>locale</var>, <var>type</var>, <var>n</var>, <var>operands</var>).</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./relativetimeformat.html"><emu-clause id="relativetimeformat-objects">
  <h1><span class="secnum">17</span> RelativeTimeFormat Objects</h1>

  <emu-clause id="sec-intl-relativetimeformat-constructor">
    <h1><span class="secnum">17.1</span> The Intl.RelativeTimeFormat Constructor</h1>

    <p>
      The RelativeTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%RelativeTimeFormat%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_673"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_119"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-Intl.RelativeTimeFormat">
      <h1><span class="secnum">17.1.1</span> Intl.RelativeTimeFormat ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        When the <code>Intl.RelativeTimeFormat</code> function is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>relativeTimeFormat</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_674"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%RelativeTimeFormat.prototype%"</emu-val>, « [[InitializedRelativeTimeFormat]], [[Locale]], [[DataLocale]], [[Style]], [[Numeric]], [[NumberFormat]], [[NumberingSystem]], [[PluralRules]] »).</li><li>Return ?&nbsp;<emu-xref aoid="InitializeRelativeTimeFormat" id="_ref_675"><a href="#sec-InitializeRelativeTimeFormat">InitializeRelativeTimeFormat</a></emu-xref>(<var>relativeTimeFormat</var>, <var>locales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-InitializeRelativeTimeFormat" aoid="InitializeRelativeTimeFormat">
      <h1><span class="secnum">17.1.2</span> InitializeRelativeTimeFormat ( <var>relativeTimeFormat</var>, <var>locales</var>, <var>options</var> )</h1>

      <p>
        The abstract operation InitializeRelativeTimeFormat accepts the arguments <var>relativeTimeFormat</var> (which must be an object), <var>locales</var>, and <var>options</var>. It initializes <var>relativeTimeFormat</var> as a RelativeTimeFormat object.
      </p>
      <p>
        The following algorithm refers to the <code>type</code> nonterminal from <a href="https://www.unicode.org/reports/tr35/#Unicode_locale_identifier">UTS 35's Unicode Locale Identifier grammar</a>.
        The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_676"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="CoerceOptionsToObject" id="_ref_677"><a href="#sec-coerceoptionstoobject">CoerceOptionsToObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_678"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[LocaleMatcher]] to <var>matcher</var>.</li><li>Let <var>numberingSystem</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_679"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numberingSystem"</emu-val>, <emu-val>"string"</emu-val>, <emu-val>undefined</emu-val>, <emu-val>undefined</emu-val>).</li><li>If <var>numberingSystem</var> is not <emu-val>undefined</emu-val>, then<ol><li>If <var>numberingSystem</var> does not match the Unicode Locale Identifier <code>type</code> nonterminal, throw a <emu-val>RangeError</emu-val> exception.</li></ol></li><li>Set <var>opt</var>.[[nu]] to <var>numberingSystem</var>.</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_680"><a href="#sec-intl-relativetimeformat-constructor">%RelativeTimeFormat%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_681"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_682"><a href="#sec-intl-relativetimeformat-constructor">%RelativeTimeFormat%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_683"><a href="#sec-intl-relativetimeformat-constructor">%RelativeTimeFormat%</a></emu-xref>.[[RelevantExtensionKeys]], <var>localeData</var>).</li><li>Let <var>locale</var> be <var>r</var>.[[locale]].</li><li>Set <var>relativeTimeFormat</var>.[[Locale]] to <var>locale</var>.</li><li>Set <var>relativeTimeFormat</var>.[[DataLocale]] to <var>r</var>.[[dataLocale]].</li><li>Set <var>relativeTimeFormat</var>.[[NumberingSystem]] to <var>r</var>.[[nu]].</li><li>Let <var>style</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_684"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"style"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, <emu-val>"narrow"</emu-val> », <emu-val>"long"</emu-val>).</li><li>Set <var>relativeTimeFormat</var>.[[Style]] to <var>style</var>.</li><li>Let <var>numeric</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_685"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"numeric"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"always"</emu-val>, <emu-val>"auto"</emu-val> », <emu-val>"always"</emu-val>).</li><li>Set <var>relativeTimeFormat</var>.[[Numeric]] to <var>numeric</var>.</li><li>Let <var>relativeTimeFormat</var>.[[NumberFormat]] be !&nbsp;<emu-xref aoid="Construct" id="_ref_686"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_687"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, « <var>locale</var> »).</li><li>Let <var>relativeTimeFormat</var>.[[PluralRules]] be !&nbsp;<emu-xref aoid="Construct" id="_ref_688"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-pluralrules-constructor" id="_ref_689"><a href="#sec-intl-pluralrules-constructor">%PluralRules%</a></emu-xref>, « <var>locale</var> »).</li><li>Return <var>relativeTimeFormat</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-relativetimeformat-constructor">
    <h1><span class="secnum">17.2</span> Properties of the Intl.RelativeTimeFormat Constructor</h1>

    <p>
      The Intl.RelativeTimeFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype">
      <h1><span class="secnum">17.2.1</span> Intl.RelativeTimeFormat.prototype</h1>

      <p>
        The value of <code>Intl.RelativeTimeFormat.prototype</code> is <emu-xref href="#sec-properties-of-intl-relativetimeformat-prototype-object" id="_ref_690"><a href="#sec-properties-of-intl-relativetimeformat-prototype-object">%RelativeTimeFormat.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.supportedLocalesOf">
      <h1><span class="secnum">17.2.2</span> Intl.RelativeTimeFormat.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_691"><a href="#sec-intl-relativetimeformat-constructor">%RelativeTimeFormat%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_692"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_693"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat-internal-slots">
      <h1><span class="secnum">17.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_120"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « <emu-val>"nu"</emu-val> ».
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        Unicode Technical Standard 35 describes one locale extension key that is relevant to relative time formatting: <emu-val>"nu"</emu-val> for numbering system (of formatted numbers).
      </div></emu-note>

      <p>
        The value of the [[LocaleData]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_121"><a href="#sec-internal-slots">9.1</a></emu-xref> and the following additional constraints, for all locale values <var>locale</var>:
      </p>

      <ul>
        <li>[[LocaleData]].[[&lt;<var>locale</var>&gt;]] has fields <emu-val>"second"</emu-val>, <emu-val>"minute"</emu-val>, <emu-val>"hour"</emu-val>, <emu-val>"day"</emu-val>, <emu-val>"week"</emu-val>, <emu-val>"month"</emu-val>, <emu-val>"quarter"</emu-val>, and <emu-val>"year"</emu-val>. Additional fields may exist with the previous names concatenated with the strings <emu-val>"-narrow"</emu-val> or <emu-val>"-short"</emu-val>. The values corresponding to these fields are Records which contain these two categories of fields:
        <ul>
        <li><emu-val>"future"</emu-val> and <emu-val>"past"</emu-val> fields, which are Records with a field for each of the plural categories relevant for <var>locale</var>. The value corresponding to those fields is a pattern which may contain <emu-val>"{0}"</emu-val> to be replaced by a formatted number.</li>
        <li>Optionally, additional fields whose key is the result of <emu-xref aoid="ToString" id="_ref_694"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref> of a Number, and whose values are literal Strings which are not treated as templates.</li>
        </ul>
        </li>
        <li>
          The list that is the value of the <emu-val>"nu"</emu-val> field of any locale field of [[LocaleData]] must not include the values <emu-val>"native"</emu-val>, <emu-val>"traditio"</emu-val>, or <emu-val>"finance"</emu-val>.
        </li>
      </ul>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        It is recommended that implementations use the locale data provided by the Common Locale Data Repository (available at <a href="https://cldr.unicode.org/">https://cldr.unicode.org/</a>).
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-relativetimeformat-prototype-object">
    <h1><span class="secnum">17.3</span> Properties of the Intl.RelativeTimeFormat Prototype Object</h1>

    <p>
      The Intl.RelativeTimeFormat prototype object is itself an ordinary object. <dfn>%RelativeTimeFormat.prototype%</dfn> is not an Intl.RelativeTimeFormat instance and does not have an [[InitializedRelativeTimeFormat]] internal slot or any of the other internal slots of Intl.RelativeTimeFormat instance objects.
    </p>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype.constructor">
      <h1><span class="secnum">17.3.1</span> Intl.RelativeTimeFormat.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.RelativeTimeFormat.prototype.constructor</code> is <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_695"><a href="#sec-intl-relativetimeformat-constructor">%RelativeTimeFormat%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype-toStringTag">
      <h1><span class="secnum">17.3.2</span> Intl.RelativeTimeFormat.prototype[ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.RelativeTimeFormat"</emu-val>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype.format">
      <h1><span class="secnum">17.3.3</span> Intl.RelativeTimeFormat.prototype.format ( <var>value</var>, <var>unit</var> )</h1>

      <p>
        When the <code>format</code> method is called with arguments <var>value</var> and <var>unit</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>relativeTimeFormat</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_696"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>relativeTimeFormat</var>, [[InitializedRelativeTimeFormat]]).</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_697"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>value</var>).</li><li>Let <var>unit</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_698"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>unit</var>).</li><li>Return ?&nbsp;<emu-xref aoid="FormatRelativeTime" id="_ref_699"><a href="#sec-FormatRelativeTime">FormatRelativeTime</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-Intl.RelativeTimeFormat.prototype.formatToParts">
      <h1><span class="secnum">17.3.4</span> Intl.RelativeTimeFormat.prototype.formatToParts ( <var>value</var>, <var>unit</var> )</h1>

      <p>
        When the <code>formatToParts</code> method is called with arguments <var>value</var> and <var>unit</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>relativeTimeFormat</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_700"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>relativeTimeFormat</var>, [[InitializedRelativeTimeFormat]]).</li><li>Let <var>value</var> be ?&nbsp;<emu-xref aoid="ToNumber" id="_ref_701"><a href="https://tc39.es/ecma262/#sec-tonumber">ToNumber</a></emu-xref>(<var>value</var>).</li><li>Let <var>unit</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_702"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>unit</var>).</li><li>Return ?&nbsp;<emu-xref aoid="FormatRelativeTimeToParts" id="_ref_703"><a href="#sec-FormatRelativeTimeToParts">FormatRelativeTimeToParts</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.relativetimeformat.prototype.resolvedoptions">
      <h1><span class="secnum">17.3.5</span> Intl.RelativeTimeFormat.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>relativeTimeFormat</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_704"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>relativeTimeFormat</var>, [[InitializedRelativeTimeFormat]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-relativetimeformat-resolvedoptions-properties" id="_ref_122"><a href="#table-relativetimeformat-resolvedoptions-properties">Table 15</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>Let <var>v</var> be the value of <var>relativeTimeFormat</var>'s internal slot whose name is the Internal Slot value of the current row.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>v</var> is not <emu-val>undefined</emu-val>.</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_705"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-relativetimeformat-resolvedoptions-properties"><figure><figcaption>Table 15: Resolved Options of RelativeTimeFormat Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td>[[Style]]</td>
            <td><emu-val>"style"</emu-val></td>
          </tr>
          <tr>
            <td>[[Numeric]]</td>
            <td><emu-val>"numeric"</emu-val></td>
          </tr>
          <tr>
            <td>[[NumberingSystem]]</td>
            <td><emu-val>"numberingSystem"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-relativetimeformat-instances">
    <h1><span class="secnum">17.4</span> Properties of Intl.RelativeTimeFormat Instances</h1>

    <p>
      Intl.RelativeTimeFormat instances are ordinary objects that inherit properties from <emu-xref href="#sec-properties-of-intl-relativetimeformat-prototype-object" id="_ref_706"><a href="#sec-properties-of-intl-relativetimeformat-prototype-object">%RelativeTimeFormat.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.RelativeTimeFormat instances have an [[InitializedRelativeTimeFormat]] internal slot.
    </p>

    <p>
      Intl.RelativeTimeFormat instances also have several internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used for formatting.</li>
      <li>[[DataLocale]] is a String value with the language tag of the nearest locale for which the implementation has data to perform the formatting operation. It will be a parent locale of [[Locale]].</li>
      <li>[[Style]] is one of the String values <emu-val>"long"</emu-val>, <emu-val>"short"</emu-val>, or <emu-val>"narrow"</emu-val>, identifying the relative time format style used.</li>
      <li>[[Numeric]] is one of the String values <emu-val>"always"</emu-val> or <emu-val>"auto"</emu-val>, identifying whether numerical descriptions are always used, or used only when no more specific version is available (e.g., "1 day ago" vs "yesterday").</li>
      <li>[[NumberFormat]] is an Intl.NumberFormat object used for formatting.</li>
      <li>[[NumberingSystem]] is a String value with the <emu-val>"type"</emu-val> given in Unicode Technical Standard 35 for the numbering system used for formatting.</li>
      <li>[[PluralRules]] is an Intl.PluralRules object used for formatting.</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-intl-relativetimeformat--abstracts">
    <h1><span class="secnum">17.5</span> Abstract Operations for RelativeTimeFormat Objects</h1>

    <emu-clause id="sec-singularrelativetimeunit" aoid="SingularRelativeTimeUnit">
      <h1><span class="secnum">17.5.1</span> SingularRelativeTimeUnit ( <var>unit</var> )</h1>
      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_707"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>unit</var>) is String.</li><li>If <var>unit</var> is <emu-val>"seconds"</emu-val>, return <emu-val>"second"</emu-val>.</li><li>If <var>unit</var> is <emu-val>"minutes"</emu-val>, return <emu-val>"minute"</emu-val>.</li><li>If <var>unit</var> is <emu-val>"hours"</emu-val>, return <emu-val>"hour"</emu-val>.</li><li>If <var>unit</var> is <emu-val>"days"</emu-val>, return <emu-val>"day"</emu-val>.</li><li>If <var>unit</var> is <emu-val>"weeks"</emu-val>, return <emu-val>"week"</emu-val>.</li><li>If <var>unit</var> is <emu-val>"months"</emu-val>, return <emu-val>"month"</emu-val>.</li><li>If <var>unit</var> is <emu-val>"quarters"</emu-val>, return <emu-val>"quarter"</emu-val>.</li><li>If <var>unit</var> is <emu-val>"years"</emu-val>, return <emu-val>"year"</emu-val>.</li><li>If <var>unit</var> is not one of <emu-val>"second"</emu-val>, <emu-val>"minute"</emu-val>, <emu-val>"hour"</emu-val>, <emu-val>"day"</emu-val>, <emu-val>"week"</emu-val>, <emu-val>"month"</emu-val>, <emu-val>"quarter"</emu-val>, or <emu-val>"year"</emu-val>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Return <var>unit</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-PartitionRelativeTimePattern" aoid="PartitionRelativeTimePattern">
      <h1><span class="secnum">17.5.2</span> PartitionRelativeTimePattern ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</h1>

      <p>
        When the PartitionRelativeTimePattern abstract operation is called with arguments <var>relativeTimeFormat</var>, <var>value</var>, and <var>unit</var> it returns a String value representing <var>value</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>) according to the effective locale and the formatting options of <var>relativeTimeFormat</var>.
      </p>

      <emu-alg><ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>relativeTimeFormat</var> has an [[InitializedRelativeTimeFormat]] internal slot.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_708"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>value</var>) is Number.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <emu-xref aoid="Type" id="_ref_709"><a href="https://tc39.es/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>unit</var>) is String.</li><li>If <var>value</var> is <emu-val>NaN</emu-val>, <emu-val>+∞</emu-val><sub>𝔽</sub>, or <emu-val>-∞</emu-val><sub>𝔽</sub>, throw a <emu-val>RangeError</emu-val> exception.</li><li>Let <var>unit</var> be ?&nbsp;<emu-xref aoid="SingularRelativeTimeUnit" id="_ref_710"><a href="#sec-singularrelativetimeunit">SingularRelativeTimeUnit</a></emu-xref>(<var>unit</var>).</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-relativetimeformat-constructor" id="_ref_711"><a href="#sec-intl-relativetimeformat-constructor">%RelativeTimeFormat%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>dataLocale</var> be <var>relativeTimeFormat</var>.[[DataLocale]].</li><li>Let <var>fields</var> be <var>localeData</var>.[[&lt;<var>dataLocale</var>&gt;]].</li><li>Let <var>style</var> be <var>relativeTimeFormat</var>.[[Style]].</li><li>If <var>style</var> is equal to <emu-val>"short"</emu-val>, then<ol><li>Let <var>entry</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>unit</var> and <emu-val>"-short"</emu-val>.</li></ol></li><li>Else if <var>style</var> is equal to <emu-val>"narrow"</emu-val>, then<ol><li>Let <var>entry</var> be the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>unit</var> and <emu-val>"-narrow"</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>entry</var> be <var>unit</var>.</li></ol></li><li>If <var>fields</var> doesn't have a field [[&lt;<var>entry</var>&gt;]], then<ol><li>Let <var>entry</var> be <var>unit</var>.</li></ol></li><li>Let <var>patterns</var> be <var>fields</var>.[[&lt;<var>entry</var>&gt;]].</li><li>Let <var>numeric</var> be <var>relativeTimeFormat</var>.[[Numeric]].</li><li>If <var>numeric</var> is equal to <emu-val>"auto"</emu-val>, then<ol><li>Let <var>valueString</var> be <emu-xref aoid="ToString" id="_ref_712"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>value</var>).</li><li>If <var>patterns</var> has a field [[&lt;<var>valueString</var>&gt;]], then<ol><li>Let <var>result</var> be <var>patterns</var>.[[&lt;<var>valueString</var>&gt;]].</li><li>Return a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> containing the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>result</var> }.</li></ol></li></ol></li><li>If <var>value</var> is <emu-val>-0</emu-val><sub>𝔽</sub> or if <var>value</var> is less than 0, then<ol><li>Let <var>tl</var> be <emu-val>"past"</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>tl</var> be <emu-val>"future"</emu-val>.</li></ol></li><li>Let <var>po</var> be <var>patterns</var>.[[&lt;<var>tl</var>&gt;]].</li><li>Let <var>fv</var> be !&nbsp;<emu-xref aoid="PartitionNumberPattern" id="_ref_713"><a href="#sec-partitionnumberpattern">PartitionNumberPattern</a></emu-xref>(<var>relativeTimeFormat</var>.[[NumberFormat]], <var>value</var>).</li><li>Let <var>pr</var> be !&nbsp;<emu-xref aoid="ResolvePlural" id="_ref_714"><a href="#sec-resolveplural">ResolvePlural</a></emu-xref>(<var>relativeTimeFormat</var>.[[PluralRules]], <var>value</var>).</li><li>Let <var>pattern</var> be <var>po</var>.[[&lt;<var>pr</var>&gt;]].</li><li>Return !&nbsp;<emu-xref aoid="MakePartsList" id="_ref_715"><a href="#sec-makepartslist">MakePartsList</a></emu-xref>(<var>pattern</var>, <var>unit</var>, <var>fv</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-makepartslist" aoid="MakePartsList">
      <h1><span class="secnum">17.5.3</span> MakePartsList ( <var>pattern</var>, <var>unit</var>, <var>parts</var> )</h1>

      <p>
        The MakePartsList abstract operation is called with arguments <var>pattern</var>, a pattern String, <var>unit</var>, a String, and <var>parts</var>, a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of Records representing a formatted Number.
      </p>

      <emu-note><span class="note">Note</span><div class="note-contents">
        Example:
        <emu-alg><ol><li>Return !&nbsp;<emu-xref aoid="MakePartsList" id="_ref_716"><a href="#sec-makepartslist">MakePartsList</a></emu-xref>(<emu-val>"AA{0}BB"</emu-val>, <emu-val>"hour"</emu-val>, « <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"integer"</emu-val>, [[Value]]: <emu-val>"15"</emu-val> } »).</li></ol></emu-alg>
        will return a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of Records like
        <kbd style="font: inherit; white-space: pre-wrap">
          «
            { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <emu-val>"AA"</emu-val>, [[Unit]]: <emu-const>empty</emu-const>},
            { [[Type]]: <emu-val>"integer"</emu-val>, [[Value]]: <emu-val>"15"</emu-val>, [[Unit]]: <emu-val>"hour"</emu-val>},
            { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <emu-val>"BB"</emu-val>, [[Unit]]: <emu-const>empty</emu-const>}
          »
        </kbd>
      </div></emu-note>

      <emu-alg><ol><li>Let <var>patternParts</var> be <emu-xref aoid="PartitionPattern" id="_ref_717"><a href="#sec-partitionpattern">PartitionPattern</a></emu-xref>(<var>pattern</var>).</li><li>Let <var>result</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>patternPart</var> in <var>patternParts</var>, do<ol><li>If <var>patternPart</var>.[[Type]] is <emu-val>"literal"</emu-val>, then<ol><li>Append <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <emu-val>"literal"</emu-val>, [[Value]]: <var>patternPart</var>.[[Value]], [[Unit]]: <emu-const>empty</emu-const> } to <var>result</var>.</li></ol></li><li>Else,<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>patternPart</var>.[[Type]] is <emu-val>"0"</emu-val>.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]] } <var>part</var> in <var>parts</var>, do<ol><li>Append <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]]: <var>part</var>.[[Type]], [[Value]]: <var>part</var>.[[Value]], [[Unit]]: <var>unit</var> } to <var>result</var>.</li></ol></li></ol></li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-FormatRelativeTime" aoid="FormatRelativeTime">
      <h1><span class="secnum">17.5.4</span> FormatRelativeTime ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</h1>

      <p>
        The FormatRelativeTime abstract operation is called with arguments <var>relativeTimeFormat</var> (which must be an object initialized as a RelativeTimeFormat), <var>value</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), and <var>unit</var> (which must be a String denoting the value unit) and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionRelativeTimePattern" id="_ref_718"><a href="#sec-PartitionRelativeTimePattern">PartitionRelativeTimePattern</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>).</li><li>Let <var>result</var> be an empty String.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]], [[Unit]] } <var>part</var> in <var>parts</var>, do<ol><li>Set <var>result</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>result</var> and <var>part</var>.[[Value]].</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-FormatRelativeTimeToParts" aoid="FormatRelativeTimeToParts">
      <h1><span class="secnum">17.5.5</span> FormatRelativeTimeToParts ( <var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var> )</h1>

      <p>
        The FormatRelativeTimeToParts abstract operation is called with arguments <var>relativeTimeFormat</var> (which must be an object initialized as a RelativeTimeFormat), <var>value</var> (which must be a <emu-xref href="#number-value"><a href="https://tc39.es/ecma262/#number-value">Number value</a></emu-xref>), and <var>unit</var> (which must be a String denoting the value unit) and performs the following steps:
      </p>

      <emu-alg><ol><li>Let <var>parts</var> be ?&nbsp;<emu-xref aoid="PartitionRelativeTimePattern" id="_ref_719"><a href="#sec-PartitionRelativeTimePattern">PartitionRelativeTimePattern</a></emu-xref>(<var>relativeTimeFormat</var>, <var>value</var>, <var>unit</var>).</li><li>Let <var>result</var> be <emu-xref aoid="ArrayCreate" id="_ref_720"><a href="https://tc39.es/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(0).</li><li>Let <var>n</var> be 0.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Type]], [[Value]], [[Unit]] } <var>part</var> in <var>parts</var>, do<ol><li>Let <var>O</var> be <emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_721"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"type"</emu-val>, <var>part</var>.[[Type]]).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_722"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"value"</emu-val>, <var>part</var>.[[Value]]).</li><li>If <var>part</var>.[[Unit]] is not <emu-const>empty</emu-const>, then<ol><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_723"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>O</var>, <emu-val>"unit"</emu-val>, <var>part</var>.[[Unit]]).</li></ol></li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_724"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, !&nbsp;<emu-xref aoid="ToString" id="_ref_725"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>n</var>), <var>O</var>).</li><li>Increment <var>n</var> by 1.</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./segmenter.html"><emu-clause id="segmenter-objects">
  <h1><span class="secnum">18</span> Segmenter Objects</h1>

  <emu-clause id="sec-intl-segmenter-constructor">
    <h1><span class="secnum">18.1</span> The Intl.Segmenter Constructor</h1>

    <p>
      The Segmenter <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> is the <dfn>%Segmenter%</dfn> intrinsic object and a standard built-in property of the Intl object. Behaviour common to all <emu-xref href="#service-constructor" id="_ref_726"><a href="#service-constructor">service constructor</a></emu-xref> properties of the Intl object is specified in <emu-xref href="#sec-internal-slots" id="_ref_123"><a href="#sec-internal-slots">9.1</a></emu-xref>.
    </p>

    <emu-clause id="sec-intl.segmenter">
      <h1><span class="secnum">18.1.1</span> Intl.Segmenter ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        When the <code>Intl.Segmenter</code> function is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>internalSlotsList</var> be « [[InitializedSegmenter]], [[Locale]], [[SegmenterGranularity]] ».</li><li>Let <var>segmenter</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_727"><a href="https://tc39.es/ecma262/#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Segmenter.prototype%"</emu-val>, <var>internalSlotsList</var>).</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_728"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Set <var>options</var> to ?&nbsp;<emu-xref aoid="GetOptionsObject" id="_ref_729"><a href="#sec-getoptionsobject">GetOptionsObject</a></emu-xref>(<var>options</var>).</li><li>Let <var>opt</var> be a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">Record</a></emu-xref>.</li><li>Let <var>matcher</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_730"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"localeMatcher"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"lookup"</emu-val>, <emu-val>"best fit"</emu-val> », <emu-val>"best fit"</emu-val>).</li><li>Set <var>opt</var>.[[localeMatcher]] to <var>matcher</var>.</li><li>Let <var>localeData</var> be <emu-xref href="#sec-intl-segmenter-constructor" id="_ref_731"><a href="#sec-intl-segmenter-constructor">%Segmenter%</a></emu-xref>.[[LocaleData]].</li><li>Let <var>r</var> be <emu-xref aoid="ResolveLocale" id="_ref_732"><a href="#sec-resolvelocale">ResolveLocale</a></emu-xref>(<emu-xref href="#sec-intl-segmenter-constructor" id="_ref_733"><a href="#sec-intl-segmenter-constructor">%Segmenter%</a></emu-xref>.[[AvailableLocales]], <var>requestedLocales</var>, <var>opt</var>, <emu-xref href="#sec-intl-segmenter-constructor" id="_ref_734"><a href="#sec-intl-segmenter-constructor">%Segmenter%</a></emu-xref>.[[RelevantExtensionKeys]], <var>localeData</var>).</li><li>Set <var>segmenter</var>.[[Locale]] to <var>r</var>.[[locale]].</li><li>Let <var>granularity</var> be ?&nbsp;<emu-xref aoid="GetOption" id="_ref_735"><a href="#sec-getoption">GetOption</a></emu-xref>(<var>options</var>, <emu-val>"granularity"</emu-val>, <emu-val>"string"</emu-val>, « <emu-val>"grapheme"</emu-val>, <emu-val>"word"</emu-val>, <emu-val>"sentence"</emu-val> », <emu-val>"grapheme"</emu-val>).</li><li>Set <var>segmenter</var>.[[SegmenterGranularity]] to <var>granularity</var>.</li><li>Return <var>segmenter</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-segmenter-constructor">
    <h1><span class="secnum">18.2</span> Properties of the Intl.Segmenter Constructor</h1>

    <p>
      The Intl.Segmenter <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> has the following properties:
    </p>

    <emu-clause id="sec-intl.segmenter.prototype">
      <h1><span class="secnum">18.2.1</span> Intl.Segmenter.prototype</h1>

      <p>
        The value of <code>Intl.Segmenter.prototype</code> is <emu-xref href="#sec-properties-of-intl-segmenter-prototype-object" id="_ref_736"><a href="#sec-properties-of-intl-segmenter-prototype-object">%Segmenter.prototype%</a></emu-xref>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.supportedlocalesof">
      <h1><span class="secnum">18.2.2</span> Intl.Segmenter.supportedLocalesOf ( <var>locales</var> [ , <var>options</var> ] )</h1>

      <p>
        When the <code>supportedLocalesOf</code> method is called with arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>availableLocales</var> be <emu-xref href="#sec-intl-segmenter-constructor" id="_ref_737"><a href="#sec-intl-segmenter-constructor">%Segmenter%</a></emu-xref>.[[AvailableLocales]].</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_738"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>Return ?&nbsp;<emu-xref aoid="SupportedLocales" id="_ref_739"><a href="#sec-supportedlocales">SupportedLocales</a></emu-xref>(<var>availableLocales</var>, <var>requestedLocales</var>, <var>options</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter-internal-slots">
      <h1><span class="secnum">18.2.3</span> Internal slots</h1>

      <p>
        The value of the [[AvailableLocales]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_124"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>

      <p>
        The value of the [[RelevantExtensionKeys]] internal slot is « ».
      </p>
      <emu-note><span class="note">Note</span><div class="note-contents">
        Intl.Segmenter does not have any relevant extension keys.
      </div></emu-note>

      <p>
        The value of the [[LocaleData]] internal slot is implementation-defined within the constraints described in <emu-xref href="#sec-internal-slots" id="_ref_125"><a href="#sec-internal-slots">9.1</a></emu-xref>.
      </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-segmenter-prototype-object">
    <h1><span class="secnum">18.3</span> Properties of the Intl.Segmenter Prototype Object</h1>

    <p>
      The Intl.Segmenter prototype object is itself an ordinary object. <dfn>%Segmenter.prototype%</dfn> is not an Intl.Segmenter instance and does not have an [[InitializedSegmenter]] internal slot or any of the other internal slots of Intl.Segmenter instance objects.
    </p>

    <emu-clause id="sec-intl.segmenter.prototype.constructor">
      <h1><span class="secnum">18.3.1</span> Intl.Segmenter.prototype.constructor</h1>

      <p>
        The initial value of <code>Intl.Segmenter.prototype.constructor</code> is <emu-xref href="#sec-intl-segmenter-constructor" id="_ref_740"><a href="#sec-intl-segmenter-constructor">%Segmenter%</a></emu-xref>.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.prototype-@@tostringtag">
      <h1><span class="secnum">18.3.2</span> Intl.Segmenter.prototype [ @@toStringTag ]</h1>

      <p>
        The initial value of the @@toStringTag property is the String value <emu-val>"Intl.Segmenter"</emu-val>.
      </p>
      <p>
        This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
      </p>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.prototype.segment">
      <h1><span class="secnum">18.3.3</span> Intl.Segmenter.prototype.segment ( <var>string</var> )</h1>

      <p>
        The <code>Intl.Segmenter.prototype.segment</code> method is called on an Intl.Segmenter instance with argument <var>string</var> to create a Segments instance for the string using the locale and options of the Intl.Segmenter instance. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>segmenter</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_741"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segmenter</var>, [[InitializedSegmenter]]).</li><li>Let <var>string</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_742"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>string</var>).</li><li>Return !&nbsp;<emu-xref aoid="CreateSegmentsObject" id="_ref_743"><a href="#sec-createsegmentsobject">CreateSegmentsObject</a></emu-xref>(<var>segmenter</var>, <var>string</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-intl.segmenter.prototype.resolvedoptions">
      <h1><span class="secnum">18.3.4</span> Intl.Segmenter.prototype.resolvedOptions ( )</h1>

      <p>
        This function provides access to the locale and options computed during initialization of the object.
      </p>

      <emu-alg><ol><li>Let <var>segmenter</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_744"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segmenter</var>, [[InitializedSegmenter]]).</li><li>Let <var>options</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>For each row of <emu-xref href="#table-segmenter-resolvedoptions-properties" id="_ref_126"><a href="#table-segmenter-resolvedoptions-properties">Table 16</a></emu-xref>, except the header row, in table order, do<ol><li>Let <var>p</var> be the Property value of the current row.</li><li>Let <var>v</var> be the value of <var>segmenter</var>'s internal slot whose name is the Internal Slot value of the current row.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>v</var> is not <emu-val>undefined</emu-val>.</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_745"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>options</var>, <var>p</var>, <var>v</var>).</li></ol></li><li>Return <var>options</var>.</li></ol></emu-alg>

      <emu-table id="table-segmenter-resolvedoptions-properties"><figure><figcaption>Table 16: Resolved Options of Segmenter Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Property</th>
            </tr>
          </thead>
          <tbody><tr>
            <td>[[Locale]]</td>
            <td><emu-val>"locale"</emu-val></td>
          </tr>
          <tr>
            <td>[[SegmenterGranularity]]</td>
            <td><emu-val>"granularity"</emu-val></td>
          </tr>
        </tbody></table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-properties-of-intl-segmenter-instances">
    <h1><span class="secnum">18.4</span> Properties of Intl.Segmenter Instances</h1>

    <p>
      Intl.Segmenter instances are ordinary objects that inherit properties from <emu-xref href="#sec-properties-of-intl-segmenter-prototype-object" id="_ref_746"><a href="#sec-properties-of-intl-segmenter-prototype-object">%Segmenter.prototype%</a></emu-xref>.
    </p>

    <p>
      Intl.Segmenter instances have an [[InitializedSegmenter]] internal slot.
    </p>

    <p>
      Intl.Segmenter instances also have internal slots that are computed by the <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref>:
    </p>

    <ul>
      <li>[[Locale]] is a String value with the language tag of the locale whose localization is used for segmentation.</li>
      <li>[[SegmenterGranularity]] is one of the String values <emu-val>"grapheme"</emu-val>, <emu-val>"word"</emu-val>, or <emu-val>"sentence"</emu-val>, identifying the kind of text element to segment.</li>
    </ul>
  </emu-clause>

  <emu-clause id="sec-segments-objects">
    <h1><span class="secnum">18.5</span> Segments Objects</h1>

    <p>
      A Segments instance is an object that represents the segments of a specific string, subject to the locale and options of its constructing Intl.Segmenter instance.
    </p>

    <emu-clause id="sec-createsegmentsobject" aoid="CreateSegmentsObject">
      <h1><span class="secnum">18.5.1</span> CreateSegmentsObject ( <var>segmenter</var>, <var>string</var> )</h1>
      <p>The CreateSegmentsObject abstract operation is called with arguments Intl.Segmenter instance <var>segmenter</var> and String value <var>string</var> to create a Segments instance referencing both. The following steps are taken:</p>
      <emu-alg><ol><li>Let <var>internalSlotsList</var> be « [[SegmentsSegmenter]], [[SegmentsString]] ».</li><li>Let <var>segments</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-%segmentsprototype%-object" id="_ref_747"><a href="#sec-%segmentsprototype%-object">%SegmentsPrototype%</a></emu-xref>, <var>internalSlotsList</var>).</li><li>Set <var>segments</var>.[[SegmentsSegmenter]] to <var>segmenter</var>.</li><li>Set <var>segments</var>.[[SegmentsString]] to <var>string</var>.</li><li>Return <var>segments</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-%segmentsprototype%-object">
      <h1><span class="secnum">18.5.2</span> The %SegmentsPrototype% Object</h1>
      <p>The <dfn>%SegmentsPrototype%</dfn> object:</p>
      <ul>
        <li>is the prototype of all Segments objects.</li>
        <li>is an ordinary object.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-%segmentsprototype%.containing">
        <h1><span class="secnum">18.5.2.1</span> %SegmentsPrototype%.containing ( <var>index</var> )</h1>
        <p>The <code>containing</code> method is called on a Segments instance with argument <var>index</var> to return a Segment Data object describing the segment in the string including the code unit at the specified index according to the locale and options of the Segments intance's constructing Intl.Segmenter instance. The following steps are taken:</p>
        <emu-alg><ol><li>Let <var>segments</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_748"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segments</var>, [[SegmentsSegmenter]]).</li><li>Let <var>segmenter</var> be <var>segments</var>.[[SegmentsSegmenter]].</li><li>Let <var>string</var> be <var>segments</var>.[[SegmentsString]].</li><li>Let <var>len</var> be the length of <var>string</var>.</li><li>Let <var>n</var> be ?&nbsp;<emu-xref aoid="ToIntegerOrInfinity"><a href="https://tc39.es/ecma262/#sec-tointegerorinfinity">ToIntegerOrInfinity</a></emu-xref>(<var>index</var>).</li><li>If <var>n</var> &lt; 0 or <var>n</var> ≥ <var>len</var>, return <emu-val>undefined</emu-val>.</li><li>Let <var>startIndex</var> be !&nbsp;<emu-xref aoid="FindBoundary" id="_ref_749"><a href="#sec-findboundary">FindBoundary</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>n</var>, <emu-const>before</emu-const>).</li><li>Let <var>endIndex</var> be !&nbsp;<emu-xref aoid="FindBoundary" id="_ref_750"><a href="#sec-findboundary">FindBoundary</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>n</var>, <emu-const>after</emu-const>).</li><li>Return !&nbsp;<emu-xref aoid="CreateSegmentDataObject" id="_ref_751"><a href="#sec-createsegmentdataobject">CreateSegmentDataObject</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-%segmentsprototype%-@@iterator">
        <h1><span class="secnum">18.5.2.2</span> %SegmentsPrototype% [ @@iterator ] ( )</h1>
        <p>The <code>@@iterator</code> method is called on a Segments instance to create a Segment Iterator over its string using the locale and options of its constructing Intl.Segmenter instance. The following steps are taken:</p>
        <emu-alg><ol><li>Let <var>segments</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_752"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>segments</var>, [[SegmentsSegmenter]]).</li><li>Let <var>segmenter</var> be <var>segments</var>.[[SegmentsSegmenter]].</li><li>Let <var>string</var> be <var>segments</var>.[[SegmentsString]].</li><li>Return !&nbsp;<emu-xref aoid="CreateSegmentIterator" id="_ref_753"><a href="#sec-createsegmentiterator">CreateSegmentIterator</a></emu-xref>(<var>segmenter</var>, <var>string</var>).</li></ol></emu-alg>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-segments-instances">
      <h1><span class="secnum">18.5.3</span> Properties of Segments Instances</h1>

      <p>
        Segments instances are ordinary objects that inherit properties from <emu-xref href="#sec-%segmentsprototype%-object" id="_ref_754"><a href="#sec-%segmentsprototype%-object">%SegmentsPrototype%</a></emu-xref>.
      </p>

      <p>
        Segments instances have a [[SegmentsSegmenter]] internal slot that references the constructing Intl.Segmenter instance.
      </p>

      <p>
        Segments instances have a [[SegmentsString]] internal slot that references the String value whose segments they expose.
      </p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-segment-iterator-objects">
    <h1><span class="secnum">18.6</span> Segment Iterator Objects</h1>

    <p>
      A Segment Iterator is an object that represents a particular iteration over the segments of a specific string.
    </p>

    <emu-clause id="sec-createsegmentiterator" aoid="CreateSegmentIterator">
      <h1><span class="secnum">18.6.1</span> CreateSegmentIterator ( <var>segmenter</var>, <var>string</var> )</h1>
      <p>The CreateSegmentIterator abstract operation is called with arguments Intl.Segmenter instance <var>segmenter</var> and String value <var>string</var> to create a Segment Iterator over <var>string</var> using the locale and options of <var>segmenter</var>. The following steps are taken:</p>
      <emu-alg><ol><li>Let <var>internalSlotsList</var> be « [[IteratingSegmenter]], [[IteratedString]], [[IteratedStringNextSegmentCodeUnitIndex]] ».</li><li>Let <var>iterator</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-%segmentiteratorprototype%-object" id="_ref_755"><a href="#sec-%segmentiteratorprototype%-object">%SegmentIteratorPrototype%</a></emu-xref>, <var>internalSlotsList</var>).</li><li>Set <var>iterator</var>.[[IteratingSegmenter]] to <var>segmenter</var>.</li><li>Set <var>iterator</var>.[[IteratedString]] to <var>string</var>.</li><li>Set <var>iterator</var>.[[IteratedStringNextSegmentCodeUnitIndex]] to 0.</li><li>Return <var>iterator</var>.</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sec-%segmentiteratorprototype%-object">
      <h1><span class="secnum">18.6.2</span> The %SegmentIteratorPrototype% Object</h1>
      <p>The <dfn>%SegmentIteratorPrototype%</dfn> object:</p>
      <ul>
        <li>is the prototype of all Segment Iterator objects.</li>
        <li>is an ordinary object.</li>
        <li>has a [[Prototype]] internal slot whose value is the intrinsic object %Iterator.prototype%.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-%segmentiteratorprototype%.next">
        <h1><span class="secnum">18.6.2.1</span> %SegmentIteratorPrototype%.next ( )</h1>
        <p>The <code>next</code> method is called on a Segment Iterator instance to advance it forward one segment and return an <i>IteratorResult</i> object either describing the new segment or declaring iteration done. The following steps are taken:</p>
        <emu-alg><ol><li>Let <var>iterator</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_756"><a href="https://tc39.es/ecma262/#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>iterator</var>, [[IteratingSegmenter]]).</li><li>Let <var>segmenter</var> be <var>iterator</var>.[[IteratingSegmenter]].</li><li>Let <var>string</var> be <var>iterator</var>.[[IteratedString]].</li><li>Let <var>startIndex</var> be <var>iterator</var>.[[IteratedStringNextSegmentCodeUnitIndex]].</li><li>Let <var>endIndex</var> be !&nbsp;<emu-xref aoid="FindBoundary" id="_ref_757"><a href="#sec-findboundary">FindBoundary</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <emu-const>after</emu-const>).</li><li>If <var>endIndex</var> is not finite, then<ol><li>Return !&nbsp;<emu-xref aoid="CreateIterResultObject" id="_ref_758"><a href="https://tc39.es/ecma262/#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<emu-val>undefined</emu-val>, <emu-val>true</emu-val>).</li></ol></li><li>Set <var>iterator</var>.[[IteratedStringNextSegmentCodeUnitIndex]] to <var>endIndex</var>.</li><li>Let <var>segmentData</var> be !&nbsp;<emu-xref aoid="CreateSegmentDataObject" id="_ref_759"><a href="#sec-createsegmentdataobject">CreateSegmentDataObject</a></emu-xref>(<var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var>).</li><li>Return !&nbsp;<emu-xref aoid="CreateIterResultObject" id="_ref_760"><a href="https://tc39.es/ecma262/#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>segmentData</var>, <emu-val>false</emu-val>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-%segmentiteratorprototype%.@@tostringtag">
        <h1><span class="secnum">18.6.2.2</span> %SegmentIteratorPrototype% [ @@toStringTag ]</h1>

        <p>
          The initial value of the @@toStringTag property is the String value <emu-val>"Segmenter String Iterator"</emu-val>.
        </p>
        <p>
          This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.
        </p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-segment-iterator-instances">
      <h1><span class="secnum">18.6.3</span> Properties of Segment Iterator Instances</h1>
      <p>Segment Iterator instances are ordinary objects that inherit properties from <emu-xref href="#sec-%segmentiteratorprototype%-object" id="_ref_761"><a href="#sec-%segmentiteratorprototype%-object">%SegmentIteratorPrototype%</a></emu-xref>. Segment Iterator instances are initially created with the internal slots described in <emu-xref href="#table-segment-iterator-instance-slots" id="_ref_127"><a href="#table-segment-iterator-instance-slots">Table 17</a></emu-xref>.</p>
      <emu-table id="table-segment-iterator-instance-slots"><figure><figcaption>Table 17: Internal Slots of Segment Iterator Instances</figcaption>
        
        <table class="real-table">
          <thead>
            <tr>
              <th>Internal Slot</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>[[IteratingSegmenter]]</td>
              <td>The Intl.Segmenter instance used for iteration.</td>
            </tr>
            <tr>
              <td>[[IteratedString]]</td>
              <td>The String value being iterated upon.</td>
            </tr>
            <tr>
              <td>[[IteratedStringNextSegmentCodeUnitIndex]]</td>
              <td>The code unit index in the String value being iterated upon at the start of the next segment.</td>
            </tr>
          </tbody>
        </table>
      </figure></emu-table>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-segment-data-objects">
    <h1><span class="secnum">18.7</span> Segment Data Objects</h1>

    <p>
      A Segment Data object is an object that represents a particular segment from a string.
    </p>

    <emu-clause id="sec-createsegmentdataobject" aoid="CreateSegmentDataObject">
      <h1><span class="secnum">18.7.1</span> CreateSegmentDataObject ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>endIndex</var> )</h1>
      <p>The CreateSegmentDataObject abstract operation is called with arguments Intl.Segmenter instance <var>segmenter</var>, String value <var>string</var>, and indices <var>startIndex</var> and <var>endIndex</var> within <var>string</var> to create a Segment Data object describing the segment within <var>string</var> from <var>segmenter</var> that is bounded by the indices. The following steps are taken:</p>
      <emu-alg><ol><li>Let <var>len</var> be the length of <var>string</var>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>startIndex</var> ≥ 0.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>endIndex</var> ≤ <var>len</var>.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>startIndex</var> &lt; <var>endIndex</var>.</li><li>Let <var>result</var> be !&nbsp;<emu-xref aoid="OrdinaryObjectCreate"><a href="https://tc39.es/ecma262/#sec-ordinaryobjectcreate">OrdinaryObjectCreate</a></emu-xref>(<emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>).</li><li>Let <var>segment</var> be the substring of <var>string</var> from <var>startIndex</var> to <var>endIndex</var>.</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_762"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"segment"</emu-val>, <var>segment</var>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_763"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"index"</emu-val>, <emu-xref href="#𝔽"><a href="https://tc39.es/ecma262/#𝔽">𝔽</a></emu-xref>(<var>startIndex</var>)).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_764"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"input"</emu-val>, <var>string</var>).</li><li>Let <var>granularity</var> be <var>segmenter</var>.[[SegmenterGranularity]].</li><li>If <var>granularity</var> is <code>"word"</code>, then<ol><li>Let <var>isWordLike</var> be a Boolean value indicating whether the <var>segment</var> in <var>string</var> is "word-like" according to locale <var>segmenter</var>.[[Locale]].</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataPropertyOrThrow" id="_ref_765"><a href="https://tc39.es/ecma262/#sec-createdatapropertyorthrow">CreateDataPropertyOrThrow</a></emu-xref>(<var>result</var>, <emu-val>"isWordLike"</emu-val>, <var>isWordLike</var>).</li></ol></li><li>Return <var>result</var>.</li></ol></emu-alg>
      <emu-note><span class="note">Note</span><div class="note-contents">Whether a segment is "word-like" is implementation-dependent, and implementations are recommended to use locale-sensitive tailorings. In general, segments consisting solely of spaces and/or punctuation (such as those terminated with "WORD_NONE" boundaries by ICU [International Components for Unicode, documented at <a href="https://unicode-org.github.io/icu-docs/">https://unicode-org.github.io/icu-docs/</a>]) are not considered to be "word-like".</div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-intl-segmenter-abstracts">
    <h1><span class="secnum">18.8</span> Abstract Operations for Segmenter Objects</h1>

    <emu-clause id="sec-findboundary" aoid="FindBoundary">
      <h1><span class="secnum">18.8.1</span> FindBoundary ( <var>segmenter</var>, <var>string</var>, <var>startIndex</var>, <var>direction</var> )</h1>
      <p>The FindBoundary abstract operation is called with arguments Intl.Segmenter instance <var>segmenter</var>, String <var>string</var>, <emu-xref href="#integer"><a href="https://tc39.es/ecma262/#integer">integer</a></emu-xref> <var>startIndex</var>, and <var>direction</var> (which must be <emu-const>before</emu-const> or <emu-const>after</emu-const>) to find a segmentation boundary between two code units in <var>string</var> in the specified <var>direction</var> from the code unit at index <var>startIndex</var> according to the locale and options of <var>segmenter</var> and return the immediately following code unit index (which will be infinite if no such boundary exists). The following steps are taken:</p>
      <emu-note><span class="note">Note</span><div class="note-contents">Boundary determination is implementation-dependent, but general default algorithms are specified in Unicode Standard Annex 29 (available at <a href="https://www.unicode.org/reports/tr29/">https://www.unicode.org/reports/tr29/</a>). It is recommended that implementations use locale-sensitive tailorings such as those provided by the Common Locale Data Repository (available at <a href="http://cldr.unicode.org">http://cldr.unicode.org</a>).</div></emu-note>
      <emu-alg><ol><li>Let <var>locale</var> be <var>segmenter</var>.[[Locale]].</li><li>Let <var>granularity</var> be <var>segmenter</var>.[[SegmenterGranularity]].</li><li>Let <var>len</var> be the length of <var>string</var>.</li><li>If <var>direction</var> is <emu-const>before</emu-const>, then<ol><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>startIndex</var> ≥ 0.</li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>startIndex</var> &lt; <var>len</var>.</li><li>Search <var>string</var> for the last segmentation boundary that is preceded by at most <var>startIndex</var> code units from the beginning, using locale <var>locale</var> and text element granularity <var>granularity</var>.</li><li>If a boundary is found, return the count of code units in <var>string</var> preceding it.</li><li>Return 0.</li></ol></li><li><emu-xref href="#assert"><a href="https://tc39.es/ecma262/#assert">Assert</a></emu-xref>: <var>direction</var> is <emu-const>after</emu-const>.</li><li>If <var>len</var> is 0 or <var>startIndex</var> ≥ <var>len</var>, return +∞.</li><li>Search <var>string</var> for the first segmentation boundary that follows the code unit at index <var>startIndex</var>, using locale <var>locale</var> and text element granularity <var>granularity</var>.</li><li>If a boundary is found, return the count of code units in <var>string</var> preceding it.</li><li>Return <var>len</var>.</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>

<emu-import href="./locale-sensitive-functions.html"><emu-clause id="locale-sensitive-functions">
  <h1><span class="secnum">19</span> Locale Sensitive Functions of the ECMAScript Language Specification</h1>

  <p>
    The ECMAScript Language Specification, edition 10 or successor, describes several locale sensitive functions. An ECMAScript implementation that implements this Internationalization API Specification shall implement these functions as described here.
  </p>

  <emu-note><span class="note">Note</span><div class="note-contents">
    The Collator, NumberFormat, or DateTimeFormat objects created in the algorithms in this clause are only used within these algorithms. They are never directly accessed by ECMAScript code and need not actually exist within an implementation.
  </div></emu-note>

  <emu-clause id="sup-properties-of-the-string-prototype-object">
    <h1><span class="secnum">19.1</span> Properties of the String Prototype Object</h1>

    <emu-clause id="sup-String.prototype.localeCompare">
      <h1><span class="secnum">19.1.1</span> String.prototype.localeCompare ( <var>that</var> [ , <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-string.prototype.localecompare"><a href="https://tc39.es/ecma262/#sec-string.prototype.localecompare">21.1.3.10</a></emu-xref>.
      </p>

      <p>
        When the <code>localeCompare</code> method is called with argument <var>that</var> and optional arguments <var>locales</var>, and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>O</var> be <emu-xref aoid="RequireObjectCoercible" id="_ref_766"><a href="https://tc39.es/ecma262/#sec-requireobjectcoercible">RequireObjectCoercible</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>S</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_767"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>O</var>).</li><li>Let <var>thatValue</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_768"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>that</var>).</li><li>Let <var>collator</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_769"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-the-intl-collator-constructor" id="_ref_770"><a href="#sec-the-intl-collator-constructor">%Collator%</a></emu-xref>, « <var>locales</var>, <var>options</var> »).</li><li>Return <emu-xref aoid="CompareStrings" id="_ref_771"><a href="#sec-collator-comparestrings">CompareStrings</a></emu-xref>(<var>collator</var>, <var>S</var>, <var>thatValue</var>).</li></ol></emu-alg>

      <p>
        The value of the <emu-val>"length"</emu-val> property of the <code>localeCompare</code> method is 1.
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        The <code>localeCompare</code> method itself is not directly suitable as an argument to <code>Array.prototype.sort</code> because the latter requires a function of two arguments.
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        The <code>localeCompare</code> function is intentionally generic; it does not require that its <emu-val>this</emu-val> value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sup-string.prototype.tolocalelowercase">
      <h1><span class="secnum">19.1.2</span> String.prototype.toLocaleLowerCase ( [ <var>locales</var> ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-string.prototype.tolocalelowercase"><a href="https://tc39.es/ecma262/#sec-string.prototype.tolocalelowercase">21.1.3.23</a></emu-xref>.
      </p>

      <p>
        This function interprets a String value as a sequence of code points, as described in es2022, <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">6.1.4</a></emu-xref>. The following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>O</var> be <emu-xref aoid="RequireObjectCoercible" id="_ref_772"><a href="https://tc39.es/ecma262/#sec-requireobjectcoercible">RequireObjectCoercible</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>S</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_773"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>O</var>).</li><li>Let <var>requestedLocales</var> be ?&nbsp;<emu-xref aoid="CanonicalizeLocaleList" id="_ref_774"><a href="#sec-canonicalizelocalelist">CanonicalizeLocaleList</a></emu-xref>(<var>locales</var>).</li><li>If <var>requestedLocales</var> is not an empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>, then<ol><li>Let <var>requestedLocale</var> be <var>requestedLocales</var>[0].</li></ol></li><li>Else,<ol><li>Let <var>requestedLocale</var> be <emu-xref aoid="DefaultLocale" id="_ref_775"><a href="#sec-defaultlocale">DefaultLocale</a></emu-xref>().</li></ol></li><li>Let <var>noExtensionsLocale</var> be the String value that is <var>requestedLocale</var> with any Unicode locale extension sequences (<emu-xref href="#sec-unicode-locale-extension-sequences" id="_ref_128"><a href="#sec-unicode-locale-extension-sequences">6.2.1</a></emu-xref>) removed.</li><li>Let <var>availableLocales</var> be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> with language tags that includes the languages for which the Unicode Character Database contains language sensitive case mappings. Implementations may add additional language tags if they support case mapping for additional locales.</li><li>Let <var>locale</var> be <emu-xref aoid="BestAvailableLocale" id="_ref_776"><a href="#sec-bestavailablelocale">BestAvailableLocale</a></emu-xref>(<var>availableLocales</var>, <var>noExtensionsLocale</var>).</li><li>If <var>locale</var> is <emu-val>undefined</emu-val>, let <var>locale</var> be <emu-val>"und"</emu-val>.</li><li>Let <var>cpList</var> be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> containing in order the code points of <var>S</var> as defined in es2022, <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">6.1.4</a></emu-xref>, starting at the first element of <var>S</var>.</li><li>Let <var>cuList</var> be a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> where the elements are the result of a lower case transformation of the ordered code points in <var>cpList</var> according to the Unicode Default Case Conversion algorithm or an implementation-defined conversion algorithm. A conforming implementation's lower case transformation algorithm must always yield the same <var>cpList</var> given the same <var>cuList</var> and locale.</li><li>Let <var>L</var> be a String whose elements are the UTF-16 Encoding (defined in es2022, <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">6.1.4</a></emu-xref>) of the code points of <var>cuList</var>.</li><li>Return <var>L</var>.</li></ol></emu-alg>

      <p>
        Lower case code point mappings may be derived according to a tailored version of the Default Case Conversion Algorithms of the Unicode Standard. Implementations may use locale specific tailoring defined in SpecialCasings.txt and/or CLDR and/or any other custom tailoring.
      </p>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        The case mapping of some code points may produce multiple code points. In this case the result String may not be the same length as the source String. Because both <code>toLocaleUpperCase</code> and <code>toLocaleLowerCase</code> have context-sensitive behaviour, the functions are not symmetrical. In other words, <code>s.toLocaleUpperCase().toLocaleLowerCase()</code> is not necessarily equal to <code>s.toLocaleLowerCase()</code>.
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        The <code>toLocaleLowerCase</code> function is intentionally generic; it does not require that its <emu-val>this</emu-val> value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.
      </div></emu-note>
    </emu-clause>

    <emu-clause id="sup-string.prototype.tolocaleuppercase">
      <h1><span class="secnum">19.1.3</span> String.prototype.toLocaleUpperCase ( [ <var>locales</var> ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-string.prototype.tolocaleuppercase"><a href="https://tc39.es/ecma262/#sec-string.prototype.tolocaleuppercase">21.1.3.24</a></emu-xref>.
      </p>

      <p>
        This function interprets a String value as a sequence of code points, as described in es2022, <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">6.1.4</a></emu-xref>. This function behaves in exactly the same way as <code>String.prototype.toLocaleLowerCase</code>, except that characters are mapped to their <var>uppercase</var> equivalents. A conforming implementation's upper case transformation algorithm must always yield the same result given the same sequence of code points and locale.
      </p>

      <emu-note><span class="note">Note</span><div class="note-contents">
        The <code>toLocaleUpperCase</code> function is intentionally generic; it does not require that its <emu-val>this</emu-val> value be a String object. Therefore, it can be transferred to other kinds of objects for use as a method.
      </div></emu-note>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-number-prototype-object">
    <h1><span class="secnum">19.2</span> Properties of the Number Prototype Object</h1>

    <p>
      The following definition(s) refer to the abstract operation <emu-xref href="#sec-thisnumbervalue"><a href="https://tc39.es/ecma262/#sec-thisnumbervalue">thisNumberValue</a></emu-xref> as defined in es2022, <emu-xref href="#sec-properties-of-the-number-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-number-prototype-object">20.1.3</a></emu-xref>.
    </p>

    <emu-clause id="sup-number.prototype.tolocalestring">
      <h1><span class="secnum">19.2.1</span> Number.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-number.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-number.prototype.tolocalestring">20.1.3.4</a></emu-xref>.
      </p>

      <p>
        When the <code>toLocaleString</code> method is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>x</var> be ?&nbsp;<emu-xref href="#sec-thisnumbervalue"><a href="https://tc39.es/ecma262/#sec-thisnumbervalue">thisNumberValue</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>numberFormat</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_777"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_778"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, « <var>locales</var>, <var>options</var> »).</li><li>Return ?&nbsp;<emu-xref aoid="FormatNumeric" id="_ref_779"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-bigint-prototype-object">
    <h1><span class="secnum">19.3</span> Properties of the BigInt Prototype Object</h1>

    <p>
      The following definition(s) refer to the abstract operation <emu-xref href="#sec-thisbigintvalue"><a href="https://tc39.es/ecma262/#sec-thisbigintvalue">thisBigIntValue</a></emu-xref> as defined in es2022, <emu-xref href="#sec-properties-of-the-bigint-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-bigint-prototype-object">20.2.3</a></emu-xref>.
    </p>

    <emu-clause id="sup-bigint.prototype.tolocalestring">
      <h1><span class="secnum">19.3.1</span> BigInt.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-bigint.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-bigint.prototype.tolocalestring">20.2.3.2</a></emu-xref>.
      </p>

      <p>
        When the <code>toLocaleString</code> method is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>x</var> be ?&nbsp;<emu-xref href="#sec-thisbigintvalue"><a href="https://tc39.es/ecma262/#sec-thisbigintvalue">thisBigIntValue</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>numberFormat</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_780"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-numberformat-constructor" id="_ref_781"><a href="#sec-intl-numberformat-constructor">%NumberFormat%</a></emu-xref>, « <var>locales</var>, <var>options</var> »).</li><li>Return ?&nbsp;<emu-xref aoid="FormatNumeric" id="_ref_782"><a href="#sec-formatnumber">FormatNumeric</a></emu-xref>(<var>numberFormat</var>, <var>x</var>).</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-date-prototype-object">
    <h1><span class="secnum">19.4</span> Properties of the Date Prototype Object</h1>

    <p>
      The following definition(s) refer to the abstract operation <emu-xref href="#sec-thistimevalue"><a href="https://tc39.es/ecma262/#sec-thistimevalue">thisTimeValue</a></emu-xref> as defined in es2022, <emu-xref href="#sec-properties-of-the-date-prototype-object"><a href="https://tc39.es/ecma262/#sec-properties-of-the-date-prototype-object">20.4.4</a></emu-xref>.
    </p>

    <emu-clause id="sup-date.prototype.tolocalestring">
      <h1><span class="secnum">19.4.1</span> Date.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-date.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-date.prototype.tolocalestring">20.4.4.39</a></emu-xref>.
      </p>

      <p>
        When the <code>toLocaleString</code> method is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>x</var> be ?&nbsp;<emu-xref href="#sec-thistimevalue"><a href="https://tc39.es/ecma262/#sec-thistimevalue">thisTimeValue</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <var>x</var> is <emu-val>NaN</emu-val>, return <emu-val>"Invalid Date"</emu-val>.</li><li>Let <var>options</var> be ?&nbsp;<emu-xref aoid="ToDateTimeOptions" id="_ref_783"><a href="#sec-todatetimeoptions">ToDateTimeOptions</a></emu-xref>(<var>options</var>, <emu-val>"any"</emu-val>, <emu-val>"all"</emu-val>).</li><li>Let <var>dateFormat</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_784"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_785"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>, « <var>locales</var>, <var>options</var> »).</li><li>Return ?&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_786"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>dateFormat</var>, <var>x</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sup-date.prototype.tolocaledatestring">
      <h1><span class="secnum">19.4.2</span> Date.prototype.toLocaleDateString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-date.prototype.tolocaledatestring"><a href="https://tc39.es/ecma262/#sec-date.prototype.tolocaledatestring">20.4.4.38</a></emu-xref>.
      </p>

      <p>
        When the <code>toLocaleDateString</code> method is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>x</var> be ?&nbsp;<emu-xref href="#sec-thistimevalue"><a href="https://tc39.es/ecma262/#sec-thistimevalue">thisTimeValue</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <var>x</var> is <emu-val>NaN</emu-val>, return <emu-val>"Invalid Date"</emu-val>.</li><li>Let <var>options</var> be ?&nbsp;<emu-xref aoid="ToDateTimeOptions" id="_ref_787"><a href="#sec-todatetimeoptions">ToDateTimeOptions</a></emu-xref>(<var>options</var>, <emu-val>"date"</emu-val>, <emu-val>"date"</emu-val>).</li><li>Let <var>dateFormat</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_788"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_789"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>, « <var>locales</var>, <var>options</var> »).</li><li>Return ?&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_790"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>dateFormat</var>, <var>x</var>).</li></ol></emu-alg>
    </emu-clause>

    <emu-clause id="sup-date.prototype.tolocaletimestring">
      <h1><span class="secnum">19.4.3</span> Date.prototype.toLocaleTimeString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-date.prototype.tolocaletimestring"><a href="https://tc39.es/ecma262/#sec-date.prototype.tolocaletimestring">20.4.4.40</a></emu-xref>.
      </p>

      <p>
        When the <code>toLocaleTimeString</code> method is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>x</var> be ?&nbsp;<emu-xref href="#sec-thistimevalue"><a href="https://tc39.es/ecma262/#sec-thistimevalue">thisTimeValue</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>If <var>x</var> is <emu-val>NaN</emu-val>, return <emu-val>"Invalid Date"</emu-val>.</li><li>Let <var>options</var> be ?&nbsp;<emu-xref aoid="ToDateTimeOptions" id="_ref_791"><a href="#sec-todatetimeoptions">ToDateTimeOptions</a></emu-xref>(<var>options</var>, <emu-val>"time"</emu-val>, <emu-val>"time"</emu-val>).</li><li>Let <var>timeFormat</var> be ?&nbsp;<emu-xref aoid="Construct" id="_ref_792"><a href="https://tc39.es/ecma262/#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_793"><a href="#sec-intl-datetimeformat-constructor">%DateTimeFormat%</a></emu-xref>, « <var>locales</var>, <var>options</var> »).</li><li>Return ?&nbsp;<emu-xref aoid="FormatDateTime" id="_ref_794"><a href="#sec-formatdatetime">FormatDateTime</a></emu-xref>(<var>timeFormat</var>, <var>x</var>).</li></ol></emu-alg>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sup-properties-of-the-array-prototype-object">
    <h1><span class="secnum">19.5</span> Properties of the Array Prototype Object</h1>

    <emu-clause id="sup-array.prototype.tolocalestring">
      <h1><span class="secnum">19.5.1</span> Array.prototype.toLocaleString ( [ <var>locales</var> [ , <var>options</var> ] ] )</h1>

      <p>
        This definition supersedes the definition provided in es2022, <emu-xref href="#sec-array.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-array.prototype.tolocalestring">22.1.3.29</a></emu-xref>.
      </p>

      <p>
        When the <code>toLocaleString</code> method is called with optional arguments <var>locales</var> and <var>options</var>, the following steps are taken:
      </p>

      <emu-alg><ol><li>Let <var>array</var> be ?&nbsp;<emu-xref aoid="ToObject" id="_ref_795"><a href="https://tc39.es/ecma262/#sec-toobject">ToObject</a></emu-xref>(<emu-val>this</emu-val> value).</li><li>Let <var>len</var> be ?&nbsp;<emu-xref aoid="ToLength" id="_ref_796"><a href="https://tc39.es/ecma262/#sec-tolength">ToLength</a></emu-xref>(? <emu-xref aoid="Get" id="_ref_797"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>array</var>, <emu-val>"length"</emu-val>)).</li><li>Let <var>separator</var> be the String value for the list-separator String appropriate for the host environment's current locale (this is derived in an implementation-defined way).</li><li>Let <var>R</var> be the empty String.</li><li>Let <var>k</var> be 0.</li><li>Repeat, while <var>k</var> &lt; <var>len</var>,<ol><li>If <var>k</var> &gt; 0, then<ol><li>Set <var>R</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>R</var> and <var>separator</var>.</li></ol></li><li>Let <var>nextElement</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_798"><a href="https://tc39.es/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>array</var>, !&nbsp;<emu-xref aoid="ToString" id="_ref_799"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>k</var>)).</li><li>If <var>nextElement</var> is not <emu-val>undefined</emu-val> or <emu-val>null</emu-val>, then<ol><li>Let <var>S</var> be ?&nbsp;<emu-xref aoid="ToString" id="_ref_800"><a href="https://tc39.es/ecma262/#sec-tostring">ToString</a></emu-xref>(? <emu-xref aoid="Invoke" id="_ref_801"><a href="https://tc39.es/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>nextElement</var>, <emu-val>"toLocaleString"</emu-val>, « <var>locales</var>, <var>options</var> »)).</li><li>Set <var>R</var> to the <emu-xref href="#sec-ecmascript-language-types-string-type"><a href="https://tc39.es/ecma262/#sec-ecmascript-language-types-string-type">string-concatenation</a></emu-xref> of <var>R</var> and <var>S</var>.</li></ol></li><li>Increase <var>k</var> by 1.</li></ol></li><li>Return <var>R</var>.</li></ol></emu-alg>

      <emu-note><span class="note">Note 1</span><div class="note-contents">
        This algorithm's steps mirror the steps taken in <emu-xref href="#sec-array.prototype.tolocalestring"><a href="https://tc39.es/ecma262/#sec-array.prototype.tolocalestring">22.1.3.29</a></emu-xref>, with the exception that <emu-xref aoid="Invoke" id="_ref_802"><a href="https://tc39.es/ecma262/#sec-invoke">Invoke</a></emu-xref>(<var>nextElement</var>, <emu-val>"toLocaleString"</emu-val>) now takes <var>locales</var> and <var>options</var> as arguments.
      </div></emu-note>

      <emu-note><span class="note">Note 2</span><div class="note-contents">
        The elements of the array are converted to Strings using their <code>toLocaleString</code> methods, and these Strings are then concatenated, separated by occurrences of a separator String that has been derived in an implementation-defined locale-specific way. The result of calling this function is intended to be analogous to the result of <code>toString</code>, except that the result of this function is intended to be locale-specific.
      </div></emu-note>

      <emu-note><span class="note">Note 3</span><div class="note-contents">
        The <code>toLocaleString</code> function is intentionally generic; it does not require that its <emu-val>this</emu-val> value be an Array object. Therefore it can be transferred to other kinds of objects for use as a method.
      </div></emu-note>
    </emu-clause>
  </emu-clause>
</emu-clause></emu-import>
<emu-import href="./annexes.html"><emu-annex id="annex-implementation-dependent-behaviour">
  <h1><span class="secnum">A</span> Implementation Dependent Behaviour</h1>

  <p>
    The following aspects of the ECMAScript 2022 Internationalization API Specification are implementation dependent:
  </p>

  <ul>
    <li>
      In all functionality:
      <ul>
        <li>
          Additional values for some properties of <var>options</var> arguments (<emu-xref href="#conformance" id="_ref_129"><a href="#conformance">2</a></emu-xref>)
        </li>
        <li>
          The default locale (<emu-xref href="#sec-defaultlocale" id="_ref_130"><a href="#sec-defaultlocale">6.2.4</a></emu-xref>)
        </li>
        <li>
          The default time zone (<emu-xref href="#sec-defaulttimezone" id="_ref_131"><a href="#sec-defaulttimezone">6.4.3</a></emu-xref>)
        </li>
        <li>
          The set of available locales for each <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> (<emu-xref href="#sec-internal-slots" id="_ref_132"><a href="#sec-internal-slots">9.1</a></emu-xref>)
        </li>
        <li>
          The <emu-xref aoid="BestFitMatcher" id="_ref_803"><a href="#sec-bestfitmatcher">BestFitMatcher</a></emu-xref> algorithm (<emu-xref href="#sec-bestfitmatcher" id="_ref_133"><a href="#sec-bestfitmatcher">9.2.4</a></emu-xref>)
        </li>
        <li>
          The <emu-xref aoid="BestFitSupportedLocales" id="_ref_804"><a href="#sec-bestfitsupportedlocales">BestFitSupportedLocales</a></emu-xref> algorithm (<emu-xref href="#sec-bestfitsupportedlocales" id="_ref_134"><a href="#sec-bestfitsupportedlocales">9.2.9</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      In Collator:
      <ul>
        <li>
          Support for the Unicode extensions keys <emu-val>"kf"</emu-val>, <emu-val>"kn"</emu-val> and the parallel options properties <emu-val>"caseFirst"</emu-val>, <emu-val>"numeric"</emu-val> (<emu-xref href="#sec-initializecollator" id="_ref_135"><a href="#sec-initializecollator">10.1.2</a></emu-xref>)
        </li>
        <li>
          The set of supported <emu-val>"co"</emu-val> key values (collations) per locale beyond a default collation (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_136"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          The set of supported <emu-val>"kf"</emu-val> key values (case order) per locale (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_137"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          The set of supported <emu-val>"kn"</emu-val> key values (numeric collation) per locale (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_138"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          The default search sensitivity per locale (<emu-xref href="#sec-intl-collator-internal-slots" id="_ref_139"><a href="#sec-intl-collator-internal-slots">10.2.3</a></emu-xref>)
        </li>
        <li>
          The sort order for each supported locale and options combination (<emu-xref href="#sec-collator-compare-functions" id="_ref_140"><a href="#sec-collator-compare-functions">10.3.3.1</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>In DateTimeFormat:
      <ul>
        <li>
          The <emu-xref aoid="BestFitFormatMatcher" id="_ref_805"><a href="#sec-bestfitformatmatcher">BestFitFormatMatcher</a></emu-xref> algorithm (<emu-xref href="#sec-initializedatetimeformat" id="_ref_141"><a href="#sec-initializedatetimeformat">11.1.2</a></emu-xref>)
        </li>
        <li>
          The set of supported <emu-val>"ca"</emu-val> key values (calendars) per locale (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_142"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          The set of supported <emu-val>"nu"</emu-val> key values (numbering systems) per locale (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_143"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          The default hourCycle setting per locale (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_144"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          The set of supported date-time formats per locale beyond a core set, including the representations used for each component and the associated patterns (<emu-xref href="#sec-intl.datetimeformat-internal-slots" id="_ref_145"><a href="#sec-intl.datetimeformat-internal-slots">11.2.3</a></emu-xref>)
        </li>
        <li>
          Localized weekday names, era names, month names, day period names, am/pm indicators, and time zone names (<emu-xref href="#sec-formatdatetime" id="_ref_146"><a href="#sec-formatdatetime">11.5.8</a></emu-xref>)
        </li>
        <li>
          The calendric calculations used for calendars other than <emu-val>"gregory"</emu-val>, and adjustments for local time zones and daylight saving time (<emu-xref href="#sec-formatdatetime" id="_ref_147"><a href="#sec-formatdatetime">11.5.8</a></emu-xref>)
        </li>
        <li>
          The set of all known registered Zone and Link names of the IANA Time Zone Database and the information about their offsets from UTC and their daylight saving time rules (<emu-xref href="#sec-time-zone-names" id="_ref_148"><a href="#sec-time-zone-names">6.4</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      In DisplayNames:
      <ul>
        <li>
          The localized names (<emu-xref href="#sec-Intl.DisplayNames-internal-slots" id="_ref_149"><a href="#sec-Intl.DisplayNames-internal-slots">12.2.3</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      In ListFormat:
      <ul>
        <li>
          The patterns used for formatting values (<emu-xref href="#sec-Intl.ListFormat-internal-slots" id="_ref_150"><a href="#sec-Intl.ListFormat-internal-slots">13.2.3</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      In Locale:
      <ul>
        <li>
          Support for the Unicode extensions keys <emu-val>"kf"</emu-val>, <emu-val>"kn"</emu-val> and the parallel options properties <emu-val>"caseFirst"</emu-val>, <emu-val>"numeric"</emu-val> (<emu-xref href="#sec-Intl.Locale" id="_ref_151"><a href="#sec-Intl.Locale">14.1.1</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      In NumberFormat:
      <ul>
        <li>
          The set of supported <emu-val>"nu"</emu-val> key values (numbering systems) per locale (<emu-xref href="#sec-intl.numberformat-internal-slots" id="_ref_152"><a href="#sec-intl.numberformat-internal-slots">15.2.3</a></emu-xref>)
        </li>
        <li>
          The patterns used for formatting values as decimal, percent, currency, or unit values per locale, with or without the sign, with or without accounting format for currencies, and in standard, compact, or scientific notation (<emu-xref href="#sec-formatnumber" id="_ref_153"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized representations of <emu-val>NaN</emu-val> and <emu-val>Infinity</emu-val> (<emu-xref href="#sec-formatnumber" id="_ref_154"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          The implementation of numbering systems not listed in <emu-xref href="#table-numbering-system-digits" id="_ref_155"><a href="#table-numbering-system-digits">Table 12</a></emu-xref> (<emu-xref href="#sec-formatnumber" id="_ref_156"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized decimal and grouping separators (<emu-xref href="#sec-formatnumber" id="_ref_157"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized plus and minus signs (<emu-xref href="#sec-formatnumber" id="_ref_158"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized digit grouping schemata (<emu-xref href="#sec-formatnumber" id="_ref_159"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized magnitude thresholds for compact notation (<emu-xref href="#sec-formatnumber" id="_ref_160"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized symbols for compact and scientific notation (<emu-xref href="#sec-formatnumber" id="_ref_161"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized narrow, short, and long currency symbols and names (<emu-xref href="#sec-formatnumber" id="_ref_162"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        <li>
          Localized narrow, short, and long unit symbols (<emu-xref href="#sec-formatnumber" id="_ref_163"><a href="#sec-formatnumber">15.5.6</a></emu-xref>)
        </li>
        </ul>
    </li>
    <li>
      In PluralRules:
      <ul>
        <li>
          <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.es/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of Strings representing the possible results of plural selection and their corresponding order per locale. (<emu-xref href="#sec-initializepluralrules" id="_ref_164"><a href="#sec-initializepluralrules">16.1.2</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      In RelativeTimeFormat:
      <ul>
        <li>
          The set of supported <emu-val>"nu"</emu-val> key values (numbering systems) per locale (<emu-xref href="#sec-Intl.RelativeTimeFormat-internal-slots" id="_ref_165"><a href="#sec-Intl.RelativeTimeFormat-internal-slots">17.2.3</a></emu-xref>)
        </li>
        <li>
          The patterns used for formatting values (<emu-xref href="#sec-Intl.RelativeTimeFormat-internal-slots" id="_ref_166"><a href="#sec-Intl.RelativeTimeFormat-internal-slots">17.2.3</a></emu-xref>)
        </li>
      </ul>
    </li>
    <li>
      In Segmenter:
      <ul>
        <li>
          Boundary determination algorithms (<emu-xref href="#sec-findboundary" id="_ref_167"><a href="#sec-findboundary">18.8.1</a></emu-xref>)
        </li>
        <li>
          Classification of segments as "word-like" (<emu-xref href="#sec-createsegmentdataobject" id="_ref_168"><a href="#sec-createsegmentdataobject">18.7.1</a></emu-xref>)
        </li>
      </ul>
    </li>
  </ul>
</emu-annex><emu-annex id="annex-incompatibilities">
  <h1><span class="secnum">B</span> Additions and Changes That Introduce Incompatibilities with Prior Editions</h1>

  <ul>
    <li>
      <emu-xref href="#sec-the-intl-collator-constructor" id="_ref_169"><a href="#sec-the-intl-collator-constructor">10.1</a></emu-xref>, <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_170"><a href="#sec-intl-numberformat-constructor">15.1</a></emu-xref>, <emu-xref href="#sec-intl-datetimeformat-constructor" id="_ref_171"><a href="#sec-intl-datetimeformat-constructor">11.1</a></emu-xref> In ECMA-402, 1<sup>st</sup> Edition, constructors could be used to create Intl objects from arbitrary objects. This is no longer possible in 2nd Edition.
    </li>
    <li>
      <emu-xref href="#sec-intl.datetimeformat.prototype.format" id="_ref_172"><a href="#sec-intl.datetimeformat.prototype.format">11.3.3</a></emu-xref> In ECMA-402, 1<sup>st</sup> Edition, the <emu-val>"length"</emu-val> property of the <emu-xref href="#function-object"><a href="https://tc39.es/ecma262/#function-object">function object</a></emu-xref> <var>F</var> was set to <emu-val>+0</emu-val><sub>𝔽</sub>. In 2nd Edition, <emu-val>"length"</emu-val> is set to <emu-val>1</emu-val><sub>𝔽</sub>.
    </li>
    <li>
      <emu-xref href="#sec-intl.collator.prototype-@@tostringtag" id="_ref_173"><a href="#sec-intl.collator.prototype-@@tostringtag">10.3.2</a></emu-xref> In ECMA-402, 7<sup></sup>th Edition, the @@toStringTag property of <code>Intl.Collator.prototype</code> was set to <emu-val>"Object"</emu-val>. In 8<sup>th</sup> Edition, @@toStringTag is set to <emu-val>"Intl.Collator"</emu-val>.
    </li>
    <li>
      <emu-xref href="#sec-intl.datetimeformat.prototype-@@tostringtag" id="_ref_174"><a href="#sec-intl.datetimeformat.prototype-@@tostringtag">11.3.2</a></emu-xref> In ECMA-402, 7<sup>th</sup> Edition, the @@toStringTag property of <code>Intl.DateTimeFormat.prototype</code> was set to <emu-val>"Object"</emu-val>. In 8<sup>th</sup> Edition, @@toStringTag is set to <emu-val>"Intl.DateTimeFormat"</emu-val>.
    </li>
    <li>
      <emu-xref href="#sec-intl.numberformat.prototype-@@tostringtag" id="_ref_175"><a href="#sec-intl.numberformat.prototype-@@tostringtag">15.3.2</a></emu-xref> In ECMA-402, 7<sup>th</sup> Edition, the @@toStringTag property of <code>Intl.NumberFormat.prototype</code> was set to <emu-val>"Object"</emu-val>. In 8<sup>th</sup> Edition, @@toStringTag is set to <emu-val>"Intl.NumberFormat"</emu-val>.
    </li>
    <li>
      <emu-xref href="#sec-intl.pluralrules.prototype-tostringtag" id="_ref_176"><a href="#sec-intl.pluralrules.prototype-tostringtag">16.3.2</a></emu-xref> In ECMA-402, 7<sup>th</sup> Edition, the @@toStringTag property of <code>Intl.PluralRules.prototype</code> was set to <emu-val>"Object"</emu-val>. In 8<sup>th</sup> Edition, @@toStringTag is set to <emu-val>"Intl.PluralRules"</emu-val>.
    </li>
    <li>
      <emu-xref href="#sec-Intl-toStringTag" id="_ref_177"><a href="#sec-Intl-toStringTag">8.1.1</a></emu-xref> In ECMA-402, 7<sup>th</sup> Edition, the @@toStringTag property of <code>Intl</code> was not defined. In 8<sup>th</sup> Edition, @@toStringTag is set to <emu-val>"Intl"</emu-val>.
    </li>
    <li>
      <emu-xref href="#sec-intl-numberformat-constructor" id="_ref_178"><a href="#sec-intl-numberformat-constructor">15.1</a></emu-xref> In ECMA-402, 8<sup>th</sup> Edition, the NumberFormat <emu-xref href="#constructor"><a href="https://tc39.es/ecma262/#constructor">constructor</a></emu-xref> used to throw an error when style is <emu-val>"currency"</emu-val> and maximumFractionDigits was set to a value lower than the default fractional digits for that currency. This behaviour was corrected in the 9<sup>th</sup> edition, and it no longer throws an error.
    </li>
  </ul>
</emu-annex></emu-import>
<emu-import href="./colophon.html"><emu-annex id="sec-colophon">
  <h1><span class="secnum">C</span> Colophon</h1>
  <p>This specification is authored on <a href="https://github.com/tc39/ecma402">GitHub</a> in a plaintext source format called <a href="https://github.com/bterlson/ecmarkup">Ecmarkup</a>. Ecmarkup is an HTML and Markdown dialect that provides a framework and toolset for authoring ECMAScript specifications in plaintext and processing the specification into a full-featured HTML rendering that follows the editorial conventions for this document. Ecmarkup builds on and integrates a number of other formats and technologies including <a href="https://github.com/rbuckton/grammarkdown">Grammarkdown</a> for defining syntax and <a href="https://github.com/domenic/ecmarkdown">Ecmarkdown</a> for authoring algorithm steps. PDF renderings of this specification are produced by printing the HTML rendering to a PDF.</p>
  <p>Prior editions of this specification were authored using Word—the Ecmarkup source text that formed the basis of this edition was produced by converting the ECMAScript 2015 Word document to Ecmarkup using an automated conversion tool.</p>
</emu-annex><emu-annex id="sec-copyright-and-software-license">
      <h1><span class="secnum">D</span> Copyright &amp; Software License</h1>
      <p class="ECMAaddress">Ecma International</p>
<p class="ECMAaddress">Rue du Rhone 114</p>
<p class="ECMAaddress">CH-1204 Geneva</p>
<p class="ECMAaddress">Tel: +41 22 849 6000</p>
<p class="ECMAaddress">Fax: +41 22 849 6001</p>
<p class="ECMAaddress">Web: <a href="https://ecma-international.org/">https://ecma-international.org/</a></p>

      <h2>Copyright Notice</h2>
      <p>© 2022 Ecma International</p>

<p>This draft document may be copied and furnished to others, and derivative works that comment on or otherwise explain it or assist in its implementation may be prepared, copied, published, and distributed, in whole or in part, without restriction of any kind, provided that the above copyright notice and this section are included on all such copies and derivative works. However, this document itself may not be modified in any way, including by removing the copyright notice or references to Ecma International, except as needed for the purpose of developing any document or deliverable produced by Ecma International.</p>

<p>This disclaimer is valid only prior to final version of this document. After approval all rights on the standard are reserved by Ecma International.</p>

<p>The limited permissions are granted through the standardization phase and will not be revoked by Ecma International or its successors or assigns during this time.</p>

<p>This document and the information contained herein is provided on an "AS IS" basis and ECMA INTERNATIONAL DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY OWNERSHIP RIGHTS OR ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>

      <h2>Software License</h2>
      <p>All Software contained in this document ("Software") is protected by copyright and is being made available under the "BSD License", included below. This Software may be subject to third party rights (rights from parties other than Ecma International), including patent rights, and no licenses under such third party rights are granted under this license even if the third party concerned is a member of Ecma International. SEE THE ECMA CODE OF CONDUCT IN PATENT MATTERS AVAILABLE AT https://ecma-international.org/memento/codeofconduct.htm FOR INFORMATION REGARDING THE LICENSING OF PATENT CLAIMS THAT ARE REQUIRED TO IMPLEMENT ECMA INTERNATIONAL STANDARDS.</p>

<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p>

<ol>
  <li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
  <li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
  <li>Neither the name of the authors nor Ecma International may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ol>

<p>THIS SOFTWARE IS PROVIDED BY THE ECMA INTERNATIONAL "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL ECMA INTERNATIONAL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>

    </emu-annex></emu-import>
</div></body>